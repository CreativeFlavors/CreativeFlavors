@model MMS.Web.Models.InvoiceDetails.InvoiceDetails

@using MMS.Repository.Managers
@using MMS.Core.Entities

<div class="right-form-section clearfix">
    <form class="form-inline" role="form">
        <div class="tab-content">
            <div id="step1" class="tab-pane fade in active">
                <div class="container-fluid">
                    <div class="row" style="margin-top: 20px;">
                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Buyer</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.BuyerName, MMS.Web.ExtensionMethod.HtmlHelper.BuyerName(), new { @class = "select-style text-field" })

                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">order No</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @*@Html.DropDownListFor(m => m.OrderId, MMS.Web.ExtensionMethod.HtmlHelper.GetBuyerOrderlist(), new { @class = "select-style text-field" })*@
                                        @Html.DropDownListFor(m => m.OrderId, new SelectList(
                                              new List<Object>{
                                                   new { value = "" , text = "Please Select"  }

                                                },
                                              "value",
                                              "text",
                                               2), new { @class = "select-style text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Category Code</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @Html.TextBoxFor(m => m.CCode, new { @class = "form-control text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Order Date</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">


                                        @Html.TextBoxFor(m => m.OrderDate, new { @class = "datepicker" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">OrderFullFill Date</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @Html.TextBoxFor(m => m.OrderFullFillDate, new { @class = "form-control text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Notes</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @Html.TextAreaFor(m => m.Notes, new { @class = "form-control text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Company Address</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @*@Html.DropDownListFor(m => m.AddCode, MMS.Web.ExtensionMethod.HtmlHelper.GetBuyerOrderAddress1list(), new { @class = "select-style text-field" })*@
                                        @Html.DropDownListFor(m => m.AddCode, new SelectList(
                                              new List<Object>{
                                                   new { value = "" , text = "Please Select"  }

                                                },
                                              "value",
                                              "text",
                                               2), new { @class = "select-style text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Shipping Address</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @*@Html.DropDownListFor(m => m.ShipAddCode, MMS.Web.ExtensionMethod.HtmlHelper.AddressTypebind(), new { @class = "select-style text-field" })*@
                                        @Html.DropDownListFor(m => m.ShipAddCode, new SelectList(
                                                  new List<Object>{
                                                       new { value = "" , text = "Please Select"  }

                                                    },
                                                  "value",
                                                  "text",
                                                   2), new { @class = "select-style text-field" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">

                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Billing Address</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @*@Html.DropDownListFor(m => m.BillAddCode, MMS.Web.ExtensionMethod.HtmlHelper.AddressTypebind(), new { @class = "select-style text-field" })*@
                                        @Html.DropDownListFor(m => m.BillAddCode, new SelectList(
                                                  new List<Object>{
                                                       new { value = "" , text = "Please Select"  }

                                                    },
                                                  "value",
                                                  "text",
                                                   2), new { @class = "select-style text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Total Amount</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @Html.TextBoxFor(m => m.TotalAmount, new { @class = "form-control text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Discount Amount</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @Html.TextBoxFor(m => m.DiscAmount, new { @class = "form-control text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Tax Amount</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @Html.TextBoxFor(m => m.TaxAmount, new { @class = "form-control text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Bill Amount</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @Html.TextBoxFor(m => m.BillAmount, new { @class = "form-control text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Freight Amount</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @Html.TextBoxFor(m => m.FreightAmount, new { @class = "form-control text-field" })
                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Is Quote</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">


                                        @Html.DropDownListFor(m => m.IsQuote, new SelectList(
                                              new List<Object>{
                                                   new { value = "" , text = "Please Select"  },
                                                   new { value = 0 , text = "Yes"  },
                                                   new { value = 1 , text = "No" }

                                                },
                                              "value",
                                              "text",
                                               2), new { @class = "select-style text-field" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-footer">
            <div class="row">
                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 text-center">
                    <input type="button" onclick="Cancel()" style="cursor: pointer;" title="Back" value="Back" class="btn btn-default btn-style">
                    @*@if (Model != null && Model.BuyerMasterId != 0)
                        {
                            <input type="hidden" id="BuyerMasterId" value="@Model.BuyerMasterId" />
                            <input type="button" onclick="Update()" style="cursor: pointer;" id="BuyerMasterId" title="Update" value="Update" class="btn btn-default btn-style">
                        }
                        else
                        {*@
                    <input type="button" onclick="Save()" style="cursor: pointer;" title="Save" value="Save" class="btn btn-default btn-style">
                    @*}*@

                    <button type="submit" class="btn btn-default btn-style">Clear</button>

                </div>
            </div>
        </div>
    </form>
</div>
<link rel="stylesheet" href="/resources/demos/style.css">
<link href="~/Scripts/EasyAutocomplete-1.3.5/comboStyles.css" rel="stylesheet" />
<script src="~/Scripts/EasyAutocomplete-1.3.5/ComboBox.js"></script>


<script>
    $('#OrderId').change(function () {
        $.ajax({
            url: '/InvoiceDetails/GetInvoiceAddressDetailbind',
            type: "GET",
            dataType: "JSON",
            data: { orderid: $("#OrderId").val() },
            success: function (data) {
                debugger;
                console.log(data);
                $("#AddCode").html(""); // clear before appending new list
                $("#ShipAddCode").html("");
                $("#BillAddCode").html("");
                $("#AddCode").prepend(
                    $('<option></option>').val("").text("Please Select")
                );
                $("#ShipAddCode").prepend(
                    $('<option></option>').val("").text("Please Select")
                );
                $("#BillAddCode").prepend(
                    $('<option></option>').val("").text("Please Select")
                );
                $.each(data, function (i, da) {
                    $("#AddCode").append(
                        $('<option></option>').val(da.addressid).html(da.add1));
                });
                $.each(data, function (i, da) {
                    $("#ShipAddCode").append(
                        $('<option></option>').val(da.addressid).html(da.add2));
                });
                $.each(data, function (i, da) {
                    $("#BillAddCode").append(
                        $('<option></option>').val(da.addressid).html(da.add3));
                });
            }
        });
    });
    $('#BuyerName').change(function () {
        debugger;
        if ($("#BuyerName").val() != "" && $("#BuyerName").val() != null) {
            var buyername = parseInt($("#BuyerName").val());
            $.ajax({
                url: '/InvoiceDetails/GetBuyerOrderlist',
                type: "GET",
                dataType: "JSON",
                data: { buyername: buyername },
                success: function (data) {
                    debugger;
                    console.log(data);
                    $("#OrderId").html(""); // clear before appending new list
                    $("#OrderId").prepend(
                        $('<option></option>').val("").text("Please Select")
                    );
                    $.each(data, function (i, da) {
                        $("#OrderId").append(
                            $('<option></option>').val(da.orderid).html(da.buyerorderslno));
                    });
                }
            });
        }
    });
</script>



