@{
    ViewBag.Title = "MaterialReservation";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/Content/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/css/FormStyle.css" rel="stylesheet" />


<script>
    $(document).ready(function () {
        $(document).ajaxStart(function () {
            $(".loader-overlay").css("display", "block");
        });

        $(document).ajaxComplete(function () {
            $(".loader-overlay").css("display", "none");
        });
        $(window).load(function () {
            $('.loader-overlay').fadeOut('fast');
        });
        $("#EditColorPartial").hide();

    });
    function Save() {

        if ($('#DocNo').val() == "") {
            alert("Please Enter DocNo SlNo.")
            $('#DocNo').css('border-color', 'red');
            $('#DocNo').focus();
            return false;
        }
        else {
            $('#DocNo').css('border-color', '');
        }
        if ($('#InternalOrder').val() == "") {
            alert("Please Enter InternalOrder.")
            $('#InternalOrder').css('border-color', 'red');
            $('#InternalOrder').focus();
            return false;
        }
        else {
            $('#InternalOrder').css('border-color', '');
        }
        if ($('#PlanWise').val() == "") {
            alert("Please Enter BuyerName.")
            $('#PlanWise').css('border-color', 'red');
            $('#PlanWise').focus();
            return false;
        }
        else {
            $('#PlanWise').css('border-color', '');
        }

        if ($('#MaterialCategoryId').val() == "") {
            alert("Please Select MaterialCategory.")
            $('#MaterialCategoryId').css('border-color', 'red');
            $('#MaterialCategoryId').focus();
            return false;
        }
        else {
            $('#MaterialCategoryId').css('border-color', '');
        }

        if ($('#MultipleIO').val() == "") {
            alert("Please Select MultipleIO.")
            $('#MultipleIO').css('border-color', 'red');
            $('#MultipleIO').focus();
            return false;
        }
        else {
            $('#MultipleIO').css('border-color', '');
        }
 

        if ($('#MaterialGroupId').val() == "") {
            alert("Please Select MaterialGroup.")
            $('#MaterialGroupId').css('border-color', 'red');
            $('#MaterialGroupId').focus();
            return false;
        }
        else {
            $('#MaterialGroupId').css('border-color', '');
        }

        if ($('#MaterialMasterId').val() == "") {
            alert("Please Select Material.")
            $('#MaterialMasterId').css('border-color', 'red');
            $('#MaterialMasterId').focus();
            return false;
        }
        else {
            $('#MaterialMasterId').css('border-color', '');
        }

        if ($('#UomId').val() == "") {
            alert("Please Select Uom.")
            $('#UomId').css('border-color', 'red');
            $('#UomId').focus();
            return false;
        }
        else {
            $('#UomId').css('border-color', '');
        }

        if ($('#ColourMasterId').val() == "") {
            alert("Please Select Colour.")
            $('#ColourMasterId').css('border-color', 'red');
            $('#ColourMasterId').focus();
            return false;
        }
        else {
            $('#ColourMasterId').css('border-color', '');
        }

        if ($('#Quantity').val() == "") {
            alert("Please Enter Quantity.")
            $('#Quantity').css('border-color', 'red');
            $('#Quantity').focus();
            return false;
        }
        else {
            $('#Quantity').css('border-color', '');
        }

        if ($('#FreeStock').val() == "") {
            alert("Please Enter Free Stock.")
            $('#FreeStock').css('border-color', 'red');
            $('#FreeStock').focus();
            return false;
        }
        else {
            $('#FreeStock').css('border-color', '');
        }

        var AddSelectedIoNo = "";

        var selectedValues = $.map($('#DisplayIO option:selected'), function (element) {

            AddSelectedIoNo = AddSelectedIoNo + element.value + ",";

        });

        var DisplayIO1 = $('#DisplayIO').val();
        if (DisplayIO1 == null) {
            DisplayIO1 = "";
        }
        DisplayIO1 = DisplayIO1.toString();


        $.ajax({
            type: 'POST',
            url: '/MaterialReservationForm/MaterialReservation',
            data: {
                MaterialReservationId: $('#MaterialReservationId').val(),
                DocNo: $('#DocNo').val(),
                InternalOrder: $('#InternalOrder').val(),
                PlanWise: $('#PlanWise').val(),
                MaterialCategoryId: $("#MaterialCategoryId").val(),
                MultipleIO: $("#MultipleIO").val(),
                MaterialGroupId: $("#MaterialGroupId").val(),
                MaterialMasterId: $("#MaterialMasterId").val(),
                UomId: $("#UomId").val(),
                ColourMasterId: $("#ColourMasterId").val(),
                Quantity: $("#Quantity").val(),
                FreeStock: $("#FreeStock").val(),
                MaterialWise: $("#MaterialWise").is(":checked"),
                Summary: $("#Summary").is(":checked"),
         
                DisplayIO: AddSelectedIoNo,

            },
            success: function (data) {
                
                if (data.MaterialReservationId != "" || data.MaterialReservationId != 0) {
                        alert('Saved Successfully.');
                        location.href = "/MaterialReservationForm/MaterialReservation";
                        return false;

                    }
                    else {
                        alert('Save prosess failed.');
                        location.href = "/MaterialReservationForm/MaterialReservation";
                        return false;

                    }
                    
                },
            error: function (ex) {
                alert('Already Exist in the database.');
            }
        });
    }

    function Update(arg) {
        if ($('#DocNo').val() == "") {
            alert("Please Enter DocNo SlNo.")
            $('#DocNo').css('border-color', 'red');
            $('#DocNo').focus();
            return false;
        }
        else {
            $('#DocNo').css('border-color', '');
        }
        if ($('#InternalOrder').val() == "") {
            alert("Please Enter InternalOrder.")
            $('#InternalOrder').css('border-color', 'red');
            $('#InternalOrder').focus();
            return false;
        }
        else {
            $('#InternalOrder').css('border-color', '');
        }
        if ($('#PlanWise').val() == "") {
            alert("Please Enter BuyerName.")
            $('#PlanWise').css('border-color', 'red');
            $('#PlanWise').focus();
            return false;
        }
        else {
            $('#PlanWise').css('border-color', '');
        }

        if ($('#MaterialCategoryId').val() == "") {
            alert("Please Select MaterialCategory.")
            $('#MaterialCategoryId').css('border-color', 'red');
            $('#MaterialCategoryId').focus();
            return false;
        }
        else {
            $('#MaterialCategoryId').css('border-color', '');
        }

        if ($('#MultipleIO').val() == "") {
            alert("Please Select MultipleIO.")
            $('#MultipleIO').css('border-color', 'red');
            $('#MultipleIO').focus();
            return false;
        }
        else {
            $('#MultipleIO').css('border-color', '');
        }

     

        if ($('#MaterialGroupId').val() == "") {
            alert("Please Select MaterialGroup.")
            $('#MaterialGroupId').css('border-color', 'red');
            $('#MaterialGroupId').focus();
            return false;
        }
        else {
            $('#MaterialGroupId').css('border-color', '');
        }

        if ($('#MaterialMasterId').val() == "") {
            alert("Please Select Material.")
            $('#MaterialMasterId').css('border-color', 'red');
            $('#MaterialMasterId').focus();
            return false;
        }
        else {
            $('#MaterialMasterId').css('border-color', '');
        }

        if ($('#UomId').val() == "") {
            alert("Please Select Uom.")
            $('#UomId').css('border-color', 'red');
            $('#UomId').focus();
            return false;
        }
        else {
            $('#UomId').css('border-color', '');
        }

        if ($('#ColourMasterId').val() == "") {
            alert("Please Select Colour.")
            $('#ColourMasterId').css('border-color', 'red');
            $('#ColourMasterId').focus();
            return false;
        }
        else {
            $('#ColourMasterId').css('border-color', '');
        }

        if ($('#Quantity').val() == "") {
            alert("Please Enter Quantity.")
            $('#Quantity').css('border-color', 'red');
            $('#Quantity').focus();
            return false;
        }
        else {
            $('#Quantity').css('border-color', '');
        }

        if ($('#FreeStock').val() == "") {
            alert("Please Enter Free Stock.")
            $('#FreeStock').css('border-color', 'red');
            $('#FreeStock').focus();
            return false;
        }
        else {
            $('#FreeStock').css('border-color', '');
        }

        var AddSelectedIoNo = "";

        var selectedValues = $.map($('#DisplayIO option:selected'), function (element) {

            AddSelectedIoNo = AddSelectedIoNo + element.value + ",";

        });

        var DisplayIO1 = $('#DisplayIO').val();
        if (DisplayIO1 == null) {
            DisplayIO1 = "";
        }
        DisplayIO1 = DisplayIO1.toString();


        $.ajax({
            type: 'POST',
            url: '/MaterialReservationForm/Update',
            data: {
                MaterialReservationId: $('#MaterialReservationId').val(),
                DocNo: $('#DocNo').val(),
                InternalOrder: $('#InternalOrder').val(),
                PlanWise: $('#PlanWise').val(),
                MaterialCategoryId: $("#MaterialCategoryId").val(),
                MultipleIO: $("#MultipleIO").val(),
                MaterialGroupId: $("#MaterialGroupId").val(),
                MaterialMasterId: $("#MaterialMasterId").val(),
                UomId: $("#UomId").val(),
                ColourMasterId: $("#ColourMasterId").val(),
                Quantity: $("#Quantity").val(),
                FreeStock: $("#FreeStock").val(),
                MaterialWise: $("#MaterialWise").is(":checked"),
                Summary: $("#Summary").is(":checked"),
                
                DisplayIO: AddSelectedIoNo,

            },
            success: function (data) {
                if (data.MaterialReservationId != "" || data.MaterialReservationId != 0) {
                    alert('Updated Successfully.');
                    location.href = "/MaterialReservationForm/MaterialReservation";
                    return false;
                }
                else {
                    alert('Updation failed.');
                    location.href = "/MaterialReservationForm/MaterialReservation";
                    return false;
                }

            },
            error: function (ex) {
                alert('Already Exist in the database.');
            }
        });
    }
</script>

<h2 class="content-title">Material Reservation</h2>
<div style="width: 100%; float: left;  margin: 15px 3px 47px;  ">

    <div class="loader-overlay" style="position:fixed;left:0;right:0;top:0;bottom:0;margin:auto;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:99;">
        <div id="spinner" style="position:relative;height:64px;width:64px;margin:auto;top:50%;">
            <img src="~/Content/Images/round.gif" id="imgLoading" alt="Loading..." />
        </div>
    </div>
    <div id="tabVehicleWatchList">
        @Html.Action("MaterialReservationGrid", "MaterialReservationForm")
    </div>
</div>
