@{
    ViewBag.Title = "Material Category";
    Layout = "~/Views/Shared/_Layout.cshtml";


    <link href="~/Content/css1/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/css1/custom.css" rel="stylesheet" />
    <link href="~/Content/css1/responsive.css" rel="stylesheet" />
    <link href="~/Content/css1/variables.css" rel="stylesheet" />

}

<script src="~/Content/js/custom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="~/Content/js/bootstrap.bundle.min.js"></script>
<script src="~/Content/js/Validation.js"></script>


<div style="width: 100%; float: left;">

    <div class="loader-overlay" style="position:fixed;left:0;right:0;top:0;bottom:0;margin:auto;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:99;">
        <div id="spinner" style="position:relative;height:64px;width:64px;margin:auto;top:50%;">
            <img src="~/Content/Images/round.gif" id="imgLoading" alt="Loading..." />
        </div>
    </div>
    <div id="tabVehicleWatchList">
        @Html.Action("MaterialCategoryGrid", "CategoryMaster")
    </div>
</div>

<script>
    function Save() {
        var Categorytype = $("#Categorytype").val();
        var CategoryCode = $("#CategoryCode").val();
        var CategoryName = $("#CategoryName").val();
        var MaterialCategoryMasterId = $("#MaterialCategoryMasterId").val();
        var phoneregx = /^[a-zA-Z\s\.]*$/;

        if (CategoryName !== "" && CategoryCode !== "" && Categorytype !== "" && phoneregx.test(CategoryName)) {
            // Create form data
            var formData = {
                Categorytype: Categorytype,
                CategoryCode: CategoryCode,
                CategoryName: CategoryName,
                MaterialCategoryMasterId: MaterialCategoryMasterId
            };

            var url = '/CategoryMaster/MaterialCategoryDetailsInsert';

            $.ajax({
                type: 'POST',
                url: url,
                contentType: 'application/json', 
                dataType: 'html',
                data: JSON.stringify(formData), 
                success: function (data) {
                    if (data.includes("Success")) {
                        alert("Saved successfully");
                        location.href = "/CategoryMaster/CategoryMaster";
                    } else if (data.includes("Updated")) {
                        alert("Updated successfully");
                        location.href = "/CategoryMaster/CategoryMaster";
                    } else if (data.includes("CategoryCodeThere")) {
                        alert("Category Name already exists");
                    } else if (data.includes("alreadythereall")) {
                        alert("Already Added");
                    } else {
                        alert('Operation failed. Please try again.');
                    }
                    setTimeout(function () {
                        location.reload();
                    }, 1000);
                },
                error: function (xhr, status, error) {
                    alert('Update process failed: ' + error);
                }
            });
        } else {
            alert('Please fill in all required fields.');
        }
    }

</script>













