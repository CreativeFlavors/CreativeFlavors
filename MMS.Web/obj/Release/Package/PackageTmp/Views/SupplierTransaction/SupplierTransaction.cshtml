@model MMS.Web.Models.SupplierTransaction.SupplierTransaction
@using MMS.Repository.Managers

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="~/Content/css1/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/css1/custom.css" rel="stylesheet" />
    <link href="~/Content/css1/responsive.css" rel="stylesheet" />
    <link href="~/Content/css1/variables.css" rel="stylesheet" />


</head>

<body>

    <div class="edit-section">
        <div class="d-flex justify-content-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <h1 class="modal-title fs-5" id="exampleModalLabel">Payment Information</h1>
        <div class="customers-details-header">
            <div class="customers-details">
                <div class="customers-details-inner">
                    <p class="font-16">Supplier Name</p>
                    <p class="font-16">@Model.Supplier</p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">Supplier Code</p>
                    <p class="font-16">@Model.SupplierCode</p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">Quote Number</p>
                    <p class="font-16"></p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">Quote Date</p>
                    <p class="font-16"></p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">po Number</p>
                    <p class="font-16">@Model.PoNo</p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">po Date</p>
                    <p class="font-16">@Model.PoDate</p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">Grn Number</p>
                    <p class="font-16">@Model.GrnRefNumber</p>
                </div>
            </div>
            <div class="customers-details">
                <div class="customers-details-inner">
                    <p class="font-16">Grn Date</p>
                    <p class="font-16">@Model.GrnDate</p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">Grn Quantity</p>
                    <p class="font-16">@Model.Grnqty</p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">Grn Value</p>
                    <p class="font-16">@Model.GrnAmount</p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">Amount Paid</p>
                    <p class="font-16"></p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">Balance Amount</p>
                    <p class="font-16"></p>
                </div>
                <div class="customers-details-inner">
                    <p class="font-16">Payment Due Date</p>
                    <p class="font-16">@Model.PaymentDate</p>
                </div>
            </div>
        </div>


        <div class="edit-section">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Payment Method</h1>
            @*<div class="radioSection">
                    <label for="add"> <input type="radio" name="yes" id="add" checked> Credit Note</label>
                    <label for="add1"><input type="radio" name="yes" id="add1">Online </label>
                </div>*@

            <div class="edit-merchant-inner-section">
                <div class="input-part">
                    @Html.DropDownListFor(m => m.paymentid, MMS.Web.ExtensionMethod.HtmlHelper.Paymentmethodlist(), new { @class = " sel-dropdown" })
                </div>
            </div>
            <div class="edit-merchant">
                <div class="edit-merchant-inner-section">
                    <div class="input-part" id="one">
                        @Html.LabelFor(m => m.CreditNoteRef, "Credit Note Number :")
                        @Html.TextBoxFor(m => m.CreditNoteRef, new { @class = "form-control text-field", placeholder = "Enter Credit Number" })
                    </div>
                </div>
                <div class="edit-merchant-inner-section">
                    <div class="input-part" id="one1">
                        @Html.LabelFor(m => m.CreditNoteDate, "Credit Note Date :")
                        @Html.TextBoxFor(m => m.CreditNoteDate, new { @class = "form-control", type = "date" })
                    </div>
                </div>
                <div class="edit-merchant-inner-section">
                    <div class="input-part" id="one2">
                        @Html.LabelFor(m => m.CreditNoteValue, "Credit Note Value :")
                        @Html.TextBoxFor(m => m.CreditNoteValue, new { @class = "form-control text-field", placeholder = "Enter Credit Credit" })
                    </div>
                </div>
                <div class="edit-merchant-inner-section">
                    <div class="input-part" id="two">
                        @Html.LabelFor(m => m.PaymentAmount, "Payment Amount:")
                        @Html.TextBoxFor(m => m.PaymentAmount, new { @class = "form-control text-field", placeholder = "Enter Amount" })
                    </div>
                </div>
                <div class="edit-merchant-inner-section">
                    <div class="input-part" id="two1">
                        @Html.LabelFor(m => m.PaymentRefNo, "Payment Ref No :")
                        @Html.TextBoxFor(m => m.PaymentRefNo, new { @class = "form-control text-field", placeholder = "Enter Payment RefNo" })
                    </div>
                </div>
                <div class="edit-merchant-inner-section">
                    <div class="input-part" id="Three">
                        @Html.LabelFor(m => m.Cash, "Cash")
                        @Html.TextBoxFor(m => m.Cash, new { @class = "form-control text-field", placeholder = "Enter Payment RefNo" })
                    </div>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-center">
            <button class="btn btn-success" id="makepayment" onclick="Save()">Make Payment</button>

        </div>

    </div>


    <script src="~/Content/js/custom.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="~/Content/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#two").hide();
            $("#two1").hide();
            $("#one").hide();
            $("#one1").hide();
            $("#one2").hide();
            $("#Three").hide();
            $(document).on("click", "#paymentid", function () {
                var data = $("#paymentid").val();
                if (data == 2) {
                    $("#one").show();
                    $("#one1").show();
                    $("#one2").show();
                    $("#two").hide();
                    $("#two1").hide();
                    $("#Three").hide();
                }
                else if (data == 1 || data == 4 || data == 5 || data == 6) {
                    $("#two").show();
                    $("#two1").show();
                    $("#one").hide();
                    $("#one1").hide();
                    $("#one2").hide();
                    $("#Three").hide();
                }
                else if (data == 3) {
                    $("#Three").show();
                    $("#two").hide();
                    $("#two1").hide();
                    $("#one").hide();
                    $("#one1").hide();
                    $("#one2").hide();
                }
                else {
                    $("#two").hide();
                    $("#two1").hide();
                    $("#one").hide();
                    $("#one1").hide();
                    $("#one2").hide();
                    $("#Three").hide();
                }
            });
        });

      function Save() {
      debugger;
          var Supplier = "@Model.Supplier";
          var Supplierid = "@Model.SupplierId";
          var PaymentDate = "@Model.PaymentDate"
          var PaymentAmount = "@Model.PaymentAmount"
          var GrnRefNumber = "@Model.GrnRefNumber"
          var GrnDate = "@Model.GrnDate"
          var GrnDueDate = "@Model.GrnDueDate"
          var GrnAmount = "@Model.GrnAmount"
          var GrnPaidAmount = $("#GrnPaidAmount").val();
          var GrnBalanceAmount = $("#GrnBalanceAmount").val();
          var IsTransactionOnHold = $("#IsTransactionOnHold").val();
          var PaymentRefNo = $("#PaymentRefNo").val();
          var CreditNoteRef = $("#CreditNoteRef").val();
          var CreditNoteValue = $("#CreditNoteValue").val();
          var CreditNoteDate = $("#paymentid").val();
          var paymentid = $("#paymentid").val();
          var Cash = $("#Cash").val();

      var formdata = new FormData();
          formdata.append("Supplier", Supplier);
          formdata.append("Supplierid", Supplierid);
          formdata.append("PaymentDate", PaymentDate);
          formdata.append("PaymentAmount", PaymentAmount);
          formdata.append("GrnRefNumber", GrnRefNumber);
          formdata.append("GrnDate", GrnDate);
          formdata.append("GrnDueDate", GrnDueDate);
          formdata.append("GrnAmount", GrnAmount);
          formdata.append("GrnPaidAmount", GrnPaidAmount);
          formdata.append("GrnBalanceAmount", GrnBalanceAmount);
          formdata.append("IsTransactionOnHold", IsTransactionOnHold);
          formdata.append("PaymentRefNo", PaymentRefNo);
          formdata.append("CreditNoteRef", CreditNoteRef);
          formdata.append("CreditNoteValue", CreditNoteValue);
          formdata.append("CreditNoteDate", CreditNoteDate);
          formdata.append("paymentid", paymentid);
          formdata.append("Cash", Cash);

      $.ajax({
          type: 'POST',
          url: '/SupplierTransaction/SupplierTransactionDataInsert',
          contentType: false,
          processData: false,
          dataType: 'html',
          data: formdata,
          success: function (data) {

              alert('Saved Successfully.');

              location.href = "/SupplierTransaction/SupplierTransactionGrid";
              return false;

          }

      });

  }
    </script>
</body>

</html>
