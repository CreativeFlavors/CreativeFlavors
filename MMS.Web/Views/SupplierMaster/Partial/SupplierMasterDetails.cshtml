@model MMS.Web.Models.SupplierMasterModel.SupplierModel

<!DOCTYPE html>
<html>

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="~/Content/css1/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/css1/custom.css" rel="stylesheet" />
    <link href="~/Content/css1/responsive.css" rel="stylesheet" />
    <link href="~/Content/css1/variables.css" rel="stylesheet" />

</head>

<body>

    <div class="main-page">
        <section class="inner-section">
            <div class="edit-customer">
                <a href="/SupplierMaster/SupplierMaster">
                    <div class="back-button"><img src="~/Content/assets/images/choose-plan.png" alt="back arrow"></div>
                </a>
                <h2 class=" font-20">Supplier info</h2>

            </div>
            <div class="edit-section">
                <h3 class="font-20">Basic Information</h3>
                <div class="row">
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#Account">Supplier Name</label>
                            @Html.TextBoxFor(m => m.Suppliername, new { @class = "form-control text-field", placeholder = "Enter the Supplier Name", onkeyup = "Suppliernamefun()" })
                            <p class="text-danger" id="SuppliernameResult"></p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#Account">Supplier Code</label>
                            @Html.TextBoxFor(m => m.suppliercode, new { @class = "form-control text-field", placeholder = "Enter the Supplier Code", onkeyup = "SupplierCodefun()" })
                            <p class="text-danger" id="suppCodetResult"></p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#Account">Account Number</label>
                            @Html.TextBoxFor(m => m.Account, new { @class = "form-control text-field", placeholder = "Enter the Account Number", onkeyup = "Accountfun()" })
                            @Html.HiddenFor(m => m.SupplierId)
                            <p class="text-danger" id="AccountResult"></p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#AccountName">Account Name</label>
                            @Html.TextBoxFor(m => m.AccountName, new { @class = "form-control text-field", placeholder = "Enter the Account Name", onkeyup = "AccountNamefun()" })
                            <p class="text-danger" id="AccountNameResult"></p>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#AccountDescription">Account Description</label>
                            @Html.TextBoxFor(m => m.AccountDescription, new { @class = "form-control text-field", placeholder = "Enter the Account Description", onkeyup = "AccountDescriptionfun()" })
                            <p class="text-danger" id="AccountDescriptionNameResult"></p>
                        </div>
                    </div>


                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#EmailContact">Email Contact</label>
                            @Html.TextBoxFor(m => m.EmailContact, new { @class = "form-control text-field", placeholder = "Enter the Email Contact", onkeyup = "EmailContactfun()" })
                            <p class="text-danger" id="EmailResult"></p>
                        </div>
                    </div>


                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#Physical1">Address</label>
                            @Html.TextAreaFor(m => m.Physical1, new { @class = "form-control text-field", placeholder = "Enter the Address", onkeyup = "Physical1fun()" })
                            <p class="text-danger" id="Physical1Result"></p>
                        </div>
                    </div>

                    @*<div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#Physical2">Physical Address 2</label>
                @Html.TextAreaFor(m => m.Physical2, new { @class = "form-control text-field", placeholder = "Enter the Physical Address 2", onkeyup = "Physical2fun()" })
                <p class="text-danger" id="Physical2Reult"></p>
            </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#Physical3">Physical Address 3</label>
                @Html.TextAreaFor(m => m.Physical3, new { @class = "form-control text-field", placeholder = "Enter the Physical Address 3", onkeyup = "Physical3fun()" })
                <p class="text-danger" id="Physical3Result"></p>
            </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#Physical4">Physical Address 4</label>
                @Html.TextAreaFor(m => m.Physical4, new { @class = "form-control text-field", placeholder = "Enter the Physical Address 4", onkeyup = "Physical4fun()" })
                <p class="text-danger" id="Physical4Result"></p>
            </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#Physical5">Physical Address 5</label>
                @Html.TextAreaFor(m => m.Physical5, new { @class = "form-control text-field", placeholder = "Enter the Physical Address 5", onkeyup = "Physical5fun()" })
                <p class="text-danger" id="Physical5Result"></p>
            </div>
        </div>*@

                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#PhysicalCode">Zip Code</label>
                            @Html.TextBoxFor(m => m.PhysicalCode, new { @class = "form-control text-field", placeholder = "Enter the Zip Code", onkeyup = "PhysicalCodefun()" })
                            <p class="text-danger" id="PhysicalCodeResult"></p>
                        </div>
                    </div>


                    @*<div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#Postal1">Postal Address 1</label>
                @Html.TextAreaFor(m => m.Postal1, new { @class = "form-control text-field", placeholder = "Enter the Postal Address 1", onkeyup = "Postal1fun()" })
                <p class="text-danger" id="Postal1Result"></p>
            </div>

        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#Postal2">Postal Address 2</label>
                @Html.TextAreaFor(m => m.Postal2, new { @class = "form-control text-field", placeholder = "Enter the Postal Address 2", onkeyup = "Postal2fun()" })
                <p class="text-danger" id="Postal2Result"></p>
            </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#Postal3">Postal Address 3</label>
                @Html.TextAreaFor(m => m.Postal3, new { @class = "form-control text-field", placeholder = "Enter the Postal Address 3", onkeyup = "Postal3fun()" })
                <p class="text-danger" id="Postal3Result"></p>
            </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#Postal4">Postal Address 4</label>
                @Html.TextAreaFor(m => m.Postal4, new { @class = "form-control text-field", placeholder = "Enter the Postal Address 4", onkeyup = "Postal4fun()" })
                <p class="text-danger" id="Postal4Result"></p>
            </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#Postal5">Postal Address 5</label>
                @Html.TextAreaFor(m => m.Postal5, new { @class = "form-control text-field", placeholder = "Enter the Postal Address 5", onkeyup = "Postal5fun()" })
                <p class="text-danger" id="Postal5Result"></p>
            </div>
        </div>


        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#PostalCode">Postal Code</label>
                @Html.TextBoxFor(m => m.PostalCode, new { @class = "form-control text-field", placeholder = "Enter the Postal Code", onkeyup = "PostalCodefun()" })
                <p class="text-danger" id="PostalCodeResult"></p>
            </div>
        </div>*@

                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#Telephone1">Telephone 1</label>
                            @Html.TextBoxFor(m => m.Telephone1, new { @class = "form-control text-field", placeholder = "Enter the Telephone 1", onkeyup = "Telephone1fun()" })
                            <p class="text-danger" id="Telephone1Result"></p>
                        </div>
                    </div>


                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#Telephone2">Telephone 2</label>
                            @Html.TextBoxFor(m => m.Telephone2, new { @class = "form-control text-field", placeholder = "Enter the Telephone 2", onkeyup = "Telephone2fun()" })
                            <p class="text-danger" id="Telephone2Result"></p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#EmailAccounts">Email Accounts</label>
                            @Html.TextBoxFor(m => m.EmailAccounts, new { @class = "form-control text-field", placeholder = "Enter the Email Accounts", onkeyup = "EmailAccountsfun()" })
                            <p class="text-danger" id="EmailAccountsResult"></p>
                        </div>
                    </div>


                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#EmailEmergency">Email Emergency</label>
                            @Html.TextBoxFor(m => m.EmailEmergency, new { @class = "form-control text-field", placeholder = "Enter the Email Emergency", onkeyup = "EmailEmergencyfun()" })
                            <p class="text-danger" id="EmergencyNameResult"></p>
                        </div>
                    </div>
                    @*<div class="col-lg-4 col-md-6 col-sm-12">
            <div class="input-part">
                <label class="font-14" for="#AccountTypeId">Account Type </label>
                @Html.TextBoxFor(m => m.AccountTypeId, new { @class = "form-control text-field", placeholder = "Enter the Account Type Id" })
                <p class="text-danger" id="CustomerNameResult"></p>
            </div>
        </div>*@
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#VatNumber">Vat Number</label>
                            @Html.TextBoxFor(m => m.VatNumber, new { @class = "form-control text-field", placeholder = "Enter the Vat Number", onkeyup = "VatNumberfun()" })
                            <p class="text-danger" id="VatResult"></p>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#RegNumber">Reg Number</label>
                            @Html.TextBoxFor(m => m.RegNumber, new { @class = "form-control text-field", placeholder = "Enter the Reg Number", onkeyup = "RegNumberfun()" })
                            <p class="text-danger" id="RegResult"></p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#DcBalance">DcBalance</label>
                            @Html.TextBoxFor(m => m.DcBalance, new { @class = "form-control text-field", placeholder = "Enter theDcBalance", onkeyup = "DcBalancebom()" })
                            <p class="text-danger" id="DcBalanceNameResult"></p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#CreditLimit">Credit Limit</label>
                            @Html.TextBoxFor(m => m.CreditLimit, new { @class = "form-control text-field", placeholder = "Enter the Credit Limit", onkeyup = "CreditLimitfun()" })
                            <p class="text-danger" id="CreditResult"></p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#AccountTypeId">Account Type </label>
                            @Html.DropDownListFor(m => m.AccountTypeId, MMS.Web.ExtensionMethod.HtmlHelper.accountypeName(), new { @class = "select-style text-field", onchange = "accountypefun()" })
                            <p class="text-danger" id="AccountTypResult"></p>
                        </div>
                    </div>

                    @*<div class="col-lg-4 col-md-6 col-sm-12">
            <div class="radio">
                <label class="font-14" for="#ChargeInterest">Charge Interest</label>
                @if (Model.ChargeInterest == false)
                {
                    <div class="radioSection">
                        <label for="add"> <input type="radio" value="true" name="yes" id="ChargeInterest" style=" cursor: pointer;" onclick="ChargeinResultfun()"> Yes </label>
                        <label for="add1"><input type="radio" value="false" name="yes" id="ChargeInterest" checked style=" cursor: pointer;" onclick="ChargeinResultfun()"> NO</label>
                    </div>
                }
                else
                {
                    <div class="radioSection">
                        <label for="add"> <input type="radio" value="true" name="yes" id="ChargeInterest" style=" cursor: pointer;" checked onclick="ChargeinResultfun()"> Yes </label>
                        <label for="add1"><input type="radio" value="false" name="yes" id="ChargeInterest" style=" cursor: pointer;" onclick="ChargeinResultfun()"> NO</label>
                    </div>
                }

                <p class="text-danger" id="ChargeinResult"></p>
            </div>
        </div>*@
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#Interest">Interest</label>
                            @Html.TextBoxFor(m => m.Interest, new { @class = "form-control text-field", placeholder = "Enter the Interest", onkeyup = "Interestfun()" })
                            <p class="text-danger" id="inResult"></p>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#TaxTypeId">Tax Type </label>
                            @Html.DropDownListFor(m => m.TaxTypeId, MMS.Web.ExtensionMethod.HtmlHelper.GetTaxRef(), new { @class = "select-style text-field", onchange = "TaxTypeIdfun()" })
                            <p class="text-danger" id="TaxTypeIdResult"></p>
                        </div>

                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#CurrencyID">Currency</label>
                            @Html.DropDownListFor(m => m.CurrencyID, MMS.Web.ExtensionMethod.HtmlHelper.CurrencyName(), new { @class = "select-style text-field", onchange = "CurrencyIDfun()" })
                            <p class="text-danger" id="CurrencyIDResult"></p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="input-part">
                            <label class="font-14" for="#ForeignCurrency">ForeignCurrency</label>
                            @Html.DropDownListFor(m => m.ForeignCurrency, MMS.Web.ExtensionMethod.HtmlHelper.forCurrencyName(), new { @class = "select-style text-field", onchange = "ForeignCurrencyfun()" })
                            <p class="text-danger" id="ForeignCurrencyNameResult"></p>
                        </div>
                    </div>
                </div>

                <div class="row">

                </div>
                <div class="inner-section-button mt-4">

                    <button type="submit" class="fill-color font-15" onclick="Save(); confirmsupplier();">
                        SAVE
                    </button>

                    <a href="/SupplierMaster/SupplierMaster">
                        <button class="border-color font-15">
                            CANCEL
                        </button>
                    </a>
                </div>
            </div>

        </section>
    </div>


    <script src="~/Content/js/custom.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="~/Content/js/Validation.js"></script>
    <script src="~/Content/js/bootstrap.bundle.min.js"></script>

    <script>
        $(window).on("load", function () {
            $(".report-inner-section").addClass("transection");
            $("#suppliername").attr('checked', true);

        });

    </script>

    <script>
        function Save() {
            var SupplierId = $("#SupplierId").val();
            var Account = $("#Account").val();
            var suppliercode = $("#suppliercode").val();
            var Suppliername = $("#Suppliername").val();
            var AccountName = $("#AccountName").val();
            var AccountTypeId = $("#AccountTypeId").val();
            var AccountDescription = $("#AccountDescription").val();
            var Physical1 = $("#Physical1").val();
            var PhysicalCode = $("#PhysicalCode").val();
            var Telephone1 = $("#Telephone1").val();
            var Telephone2 = $("#Telephone2").val();
            var EmailContact = $("#EmailContact").val();
            var EmailAccounts = $("#EmailAccounts").val();
            var EmailEmergency = $("#EmailEmergency").val();
            var VatNumber = $("#VatNumber").val();
            var RegNumber = $("#RegNumber").val();
            var DcBalance = $("#DcBalance").val();
            var CreditLimit = $("#CreditLimit").val();
            var Interest = $("#Interest").val();
            var TaxTypeId = $("#TaxTypeId").val();
            var ForeignCurrency = $("#ForeignCurrency").val();
            var CurrencyID = $("#CurrencyID").val();
            var formdata = new FormData();
            formdata.append("SupplierId", SupplierId);
            formdata.append("Account", Account);
            formdata.append("AccountName", AccountName);
            formdata.append("AccountTypeId", AccountTypeId);
            formdata.append("Suppliername", Suppliername);
            formdata.append("suppliercode", suppliercode);
            formdata.append("AccountDescription", AccountDescription);
            formdata.append("Physical1", Physical1);
            formdata.append("PhysicalCode", PhysicalCode);
            formdata.append("Telephone1", Telephone1);
            formdata.append("Telephone2", Telephone2);
            formdata.append("EmailContact", EmailContact);
            formdata.append("EmailAccounts", EmailAccounts);
            formdata.append("EmailEmergency", EmailEmergency);
            formdata.append("VatNumber", VatNumber);
            formdata.append("RegNumber", RegNumber);
            formdata.append("DcBalance", DcBalance);
            formdata.append("CreditLimit", CreditLimit);
            formdata.append("Interest", Interest);
            formdata.append("TaxTypeId", TaxTypeId);
            formdata.append("ForeignCurrency", ForeignCurrency);
            formdata.append("CurrencyID", CurrencyID);
            var filter = /^[0-9]+(\.[0-9]+)?$/;
            var filter1 = /^[0-9]{6}$/;
            var z1 = /^[0-9]*$/;
            var filter2 = /(?:\(?\+\d{2}\)?\s*)?\d+(?:[ -]*\d+)*$/;
            var phoneregx = /^[a-zA-Z\s\.]*$/;
            var addressRegx = /^[a-zA-Z\s\/]*$/;
            var email = /^(([^<>()[\]\\.,;:\s"]+(\.[^<>()[\]\\.,;:\s"]+)*)|.(".+"))((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            if (Account != "" && CurrencyID != "" && ForeignCurrency != "" && TaxTypeId != "" && Interest != ""
                && CreditLimit != "" && DcBalance != "" && RegNumber != "" && VatNumber != ""
                && EmailEmergency != "" && EmailAccounts != "" && EmailContact != "" && AccountTypeId != "" && Telephone2 != "" && Telephone1 != ""
                && PhysicalCode != "" && Physical1 != "" && AccountDescription != "" && suppliercode != "" && Suppliername != "" && AccountName != "" &&
                filter.test(DcBalance) && filter.test(CreditLimit) && filter.test(Interest) && filter1.test(PhysicalCode) && filter2.test(Telephone2) && filter2.test(Telephone2) &&
                email.test(EmailEmergency) && email.test(EmailAccounts) && email.test(EmailContact) && phoneregx.test(Suppliername) &&
                addressRegx.test(Physical1)) {
                if (Physical1.length < 100 && z1.test(Account) && phoneregx.test(AccountName)) {
                    if (SupplierId == "0") {
                        $.ajax({
                            type: 'POST',
                            url: '/SupplierMaster/SupplierMaster',
                            contentType: false,
                            processData: false,
                            dataType: 'html',
                            data: formdata,
                            success: function (data) {
                                var value = JSON.parse(data);
                                if (value == "Saved") {
                                    alert('Saved Successfully.');
                                    window.location.href = "/SupplierMaster/SupplierMaster";
                                    return false;
                                }
                                else if (value == "SupplierThere") {
                                    alert('Supplier Name Already There');
                                }
                                else if (value == "Suppliercode") {
                                    alert('Supplier Code Already There');
                                }
                                else {
                                    alert('Save process Failed.');
                                    return false;
                                }

                            },
                            error: function (ex) {
                                alert('Already Exist in the database.');
                            }

                        });
                    }
                    else {
                        $.ajax({
                            type: 'POST',
                            url: '/SupplierMaster/SupplierMaster',
                            contentType: false,
                            processData: false,
                            dataType: 'html',
                            data: formdata,
                            success: function (data) {
                                var value = JSON.parse(data);
                                if (value == "Updated") {
                                    alert('Updated Successfully.');
                                    window.location.href = "/SupplierMaster/SupplierMaster";
                                    return false;
                                }
                                else if (value == "SupplierThere") {
                                    alert('Supplier Name and Code must be unique');
                                }
                                else if (value == "Suppliercode") {
                                    alert('Supplier Code Already There');
                                }
                                else {
                                    alert('Save process Failed.');
                                    return false;
                                }


                            }


                        });


                    }
                }
            }
            else {
                //    alert("Please enter all feild");
            }
        }

    </script>

</body>
</html>

