@model MMS.Web.Models.StockModel.ImirModel
@using MMS.Core.Entities.Stock
@using MMS.Core.Entities
@using MMS.Web.Models.StockModel
@{
    var SnoVal = 1;
    int id = Model.ImirId;
    Session["ImirId"] = id;

    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    MMS.Repository.Managers.StockManager.ImirManager imirManager = new MMS.Repository.Managers.StockManager.ImirManager();
    List<ImirGridDetails> imirGridDetails = new List<ImirGridDetails>();
    imirGridDetails = imirManager.GridList();
    imirGridDetails = imirGridDetails.Where(x => x.ImirId == Model.ImirId).ToList();
    ImirModel model = new ImirModel();
    if (imirGridDetails.Count > 0)
    {
        Model.ImirGridDetailslist = imirGridDetails.Select(x => x.ImirGridId).ToList();
    }
    PermissionSettingMaster PermissionSettingModel = new MMS.Core.Entities.PermissionSettingMaster();
    PermissionSettingModel = MMS.Web.ExtensionMethod.HtmlHelper.GetPermissionIdList();
    List<PermissionMaster> PermissionModel = new List<PermissionMaster>();
    if (PermissionSettingModel != null)
    {
        PermissionModel = MMS.Web.ExtensionMethod.HtmlHelper.GetPermissionList("IMIR", PermissionSettingModel.PermissionID);
    }
}
<script>
    $('#Date').datepicker();
    $("#Date").datepicker('option', 'dateFormat', 'dd/mm/yy');
</script>

<div class="right-form-section clearfix">
    <form class="form-inline" role="form">
        <div class="tab-content">
            <div id="step1" class="tab-pane fade in active">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Report NO</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.HiddenFor(x => x.ImirId)
                                            @Html.TextBoxFor(m => m.ReportNo, new { @class = "form-control text-field" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12 form-label">
                                            Date
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.Date, new { @class = "form-control text-field", @Value = System.DateTime.Now })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Gate Entry No</label>

                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.GateEntryNo, new { @class = "form-control text-field" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Ref Ins Rep No</label>

                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.RefInfrepNo, new { @class = "form-control text-field" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Grn No</label>

                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.GrnNo, MMS.Web.ExtensionMethod.HtmlHelper.GRNNO(), new { @class = " form-control text-field", style = "width:100%;" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">DC No</label>

                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.DcNo, new { @class = "form-control text-field" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Supplier</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.SupplierMasterId, MMS.Web.ExtensionMethod.HtmlHelper.SupplierName(), new { @class = "select-style text-field", style = "width:154px;" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Material</label>

                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.MaterialMasterId, MMS.Web.ExtensionMethod.HtmlHelper.MaterialName(), new { @class = " form-control text-field", style = "width:154px;" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Colour</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.ColourMasterId, MMS.Web.ExtensionMethod.HtmlHelper.ColourName(), new { @class = "form-control text-field" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Store  </label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.Store, MMS.Web.ExtensionMethod.HtmlHelper.Store(), new { @class = "form-control text-field" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">UOM</label>

                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.Uom, MMS.Web.ExtensionMethod.HtmlHelper.Uom(), new { @class = "select-style text-field", style = "width:154px;", })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Inspection Type</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.InspectionType, MMS.Web.ExtensionMethod.HtmlHelper.InspectionType(), new { @class = "select-style text-field", style = "width:154px;", })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">DC Qty</label>

                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.DcQty, new { @class = "form-control text-field" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Recieved Quantity</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.ReceivedQty, new { @class = "form-control text-field", @onkeypress = "return isNumberKey(event)" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">DC Pcs</label>


                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.DcPcs, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Recieved Pcs</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.ReceivedPcs, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-8 col-lg-8 col-xs-12 col-sm-8 no-pad ">
                                            <label for="text" class="form-label">Inspected Result - Quantity </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Inspected</label>


                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.QtyInspected, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Accepted</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.QtyAccepted, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Rejected</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.QtyRejected, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Rejection %</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.QtyRejectionPercent, new { @class = "form-control text-field", @onkeypress = "return isNumberKey(event)" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Excess / Short Supply</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.QtyExcess, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-8 col-lg-8 col-xs-12 col-sm-8 no-pad ">
                                            <label for="text" class="form-label">Inspected Result -  Pcs </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Inspected</label>


                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.PcsInspected, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Accepted</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.PcsAccepted, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Rejected</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.PcsRejected, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Rejection %</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.PcsRejectionPercent, new { @class = "form-control text-field", @onkeypress = "return isNumberKey(event)" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Excess / Short Supply</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.PcsExcess, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Inspected By</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.InspectedBy, new { @class = "form-control text-field" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">QC Executive</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.QcExcecutive, new { @class = "form-control text-field" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Remarks  </label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextAreaFor(m => m.Remarks, new { @class = " text-field" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12">

                            <input type="button" class="btn btn-default btn-style width-78" onclick="Cancel()" title="Back" value="Back">
                            @{
                                bool Save = false; bool Update = false;
                                foreach (var item in PermissionModel)
                                {
                                    if (item.PermissionDesc == "Save")
                                    {
                                        Save = true;
                                    }
                                    if (item.PermissionDesc == "Update")
                                    {
                                        Update = true;
                                    }
                                }
                                if (Model.ImirId == 0)
                                {
                                    if (Save == true)
                                    {

                                        <input type="button" class="btn btn-default btn-style width-78" onclick="Save()" title="Save" value="Save" id="save">
                                    }
                                    else
                                    {
                                        <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Save">
                                    }
                                }
                                else
                                {
                                    if (Update == true)
                                    {
                                        <input type="button" class="btn btn-default btn-style width-78" onclick="Update()" title="Update" value="Update" id="Update">
                                    }
                                    else
                                    {
                                        <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Update">
                                    }

                                }
                            }
                        </div>




                        <div class="add-button" style="float: left; width: 65%; margin: 10px 0;">
                            <div id="" style="float: right;">
                                @{
                                    bool ADDIMIR = false;
                                    foreach (var item in PermissionModel)
                                    {
                                        if (item.PermissionDesc == "Add IMIR Details")
                                        {
                                            ADDIMIR = true;
                                        }
                                    }
                                    if (ADDIMIR == true)
                                    {
                                        <input id="btnAddImir" type="button" value="ADD IMIR DETAILS" onclick="addRow()">
                                    }
                                    else
                                    {
                                        <input type="button" value="ADD IMIR DETAILS" onclick="alert('No Permission To access !')">
                                    }
                                }

                            </div>
                        </div>

                        <table class="addfields" border="1" id="Addrowfields" style="width: 700px;">
                            <tr id="GetData">
                                <th>Si.No</th>
                                <th>Parameter Id</th>
                                <th>Parameter</th>
                                <th>Frequency</th>
                                <th>Rejection Qty</th>
                                <th>Remarks</th>
                                <th>Delete</th>
                            </tr>


                            @foreach (ImirGridDetails imir in imirGridDetails)
                            {
                                int count = 1;
                                if (imirGridDetails.Count > 0)
                                {
                                    Model.ImirGridDetailslist = imirGridDetails.Select(x => x.ImirGridId).ToList();
                                }
                                int a = Convert.ToInt32(SnoVal);

                                int gridid = imir.ImirGridId;


                                <tbody>
                                    <tr id='appendvalue1' class='test'>
                                        <td>

                                            <input type="hidden" id="ImirGridId" value="@imir.ImirGridId">
                                            <input type='text' id='SlNo' value="@a" disabled='disabled' />
                                        </td>
                                        <td>
                                            <input type='text' id='ParameterId' value="@imir.ParameterId" />
                                        </td>
                                        <td>
                                            <input type='text' id='Parameter' value="@imir.Parameter" />
                                        </td>
                                        <td>
                                            <input type='text' id='InspectionFrequency' value="@imir.InspectionFrequency" />
                                        </td>
                                        <td>
                                            <input type='text' id='RejectionQty' value="@imir.RejectionQty" />
                                        </td>
                                        <td>
                                            <input type='text' id='GridRemarks' value="@imir.GridRemarks" />
                                        </td>

                                        <td>
                                            <a href="javascript:void(0)" class="remove-button" onclick="GridDelete('@imir.ImirGridId')">Delete</a>


                                        </td>
                                    </tr>

                                </tbody>
                                count++;
                                a++;
                                SnoVal = a;
                            }

                        </table>



                    </div>

                </div>
            </div>
        </div>
    </form>
</div>

<script>

    $(document).ajaxStart(function () {
        $(".loader-overlay").css("display", "block");
    });

    $(document).ajaxComplete(function () {
        $(".loader-overlay").css("display", "none");
    });
    $(window).load(function () {
        $('.loader-overlay').fadeOut('fast');
    });


    function Back() {
        $('.veh-tablecont').show();
    }



    function isNumberKey(evt) {

        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode != 46 && charCode > 31
          && (charCode < 48 || charCode > 57))
            return false;

        return true;
    }
</script>

<script>

    function GridDelete(id) {

        var answer = confirm("Are you sure want to delete?");
        if (answer) {
            $.ajax({
                type: 'POST',
                url: ' @Url.Action("GridDelete", "IMIR")',
                data: { ImirGridId: id },
                success: function (data) {
                    if (data == "Success") {
                        alert('Deleted Successfully.');
                        location.href = "/IMIR/Imir/";
                        return false;
                    }
                    else {
                        alert('deletion failed.');
                    }
                },

            });
        }
        else {
            return false;
        }
    }


    function addRow() {

        var id = 0;
        id = $("#Addrowfields").closest('table').find('tr:last td:first').find('#SlNo').val();
        IncrementVal = parseInt(id) + 1;


        var data = $("#Addrowfields > tbody:last-child").append(
              "<tr id='appendvalue' class='test' >" +
              "<td class='width-91'><input type='text'id='SlNo' value='" + IncrementVal + "' class='numeric' disabled='disabled' onclick='Numeric()' /></td>" +

              "<td class='width-141'><input type='text' id='ParameterId'  /></td>" +
              "<td class='width-91'><input type='text' id='Parameter' onclick='Numeric()'/></td>" +
              "<td class='width-91'><input type='text' id='InspectionFrequency' onclick='Numeric()'/></td>" +
              "<td class='width-91'><input type='text' id='RejectionQty' onclick='Numeric()'/></td>" +
              "<td class='width-91'><input type='text' id='GridRemarks' onclick='Numeric()'/></td>" +
              "<td class='width-91'><input type='button' id='btnDelete' onclick='GridDelete()'/></td>" +
              "</tr>");
    }
</script>

<script>


    $.widget("custom.combobox", {
        _create: function () {
            this.wrapper = $("<span>")
              .addClass("custom-combobox")
              .insertAfter(this.element);

            this.element.hide();
            this._createAutocomplete();
            this._createShowAllButton();
        },

        _createAutocomplete: function () {
            var selected = this.element.children(":selected"),
              value = selected.val() ? selected.text() : "";

            this.input = $("<input>")
              .appendTo(this.wrapper)
              .val(value)
              .attr("title", "")
              .addClass("custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left")
              .autocomplete({
                  delay: 0,
                  minLength: 0,
                  source: $.proxy(this, "_source")
              })
              .tooltip({
                  tooltipClass: "ui-state-highlight"
              });

            this._on(this.input, {
                autocompleteselect: function (event, ui) {
                    ui.item.option.selected = true;
                    this._trigger("select", event, {
                        item: ui.item.option
                    });
                },

                autocompletechange: "_removeIfInvalid"
            });
        },

        _createShowAllButton: function () {
            var input = this.input,
              wasOpen = false;

            $("<a>")
              .attr("tabIndex", -1)
              .attr("title", "Show All Items")
              .tooltip()
              .appendTo(this.wrapper)
              .button({
                  icons: {
                      primary: "ui-icon-triangle-1-s"
                  },
                  text: false
              })
              .removeClass("ui-corner-all")
              .addClass("custom-combobox-toggle ui-corner-right")
              .mousedown(function () {
                  wasOpen = input.autocomplete("widget").is(":visible");
              })
              .click(function () {
                  input.focus();


                  if (wasOpen) {
                      return;
                  }

                  // Pass empty string as value to search for, displaying all results
                  input.autocomplete("search", "");
              });
        },

        _source: function (request, response) {
            var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
            response(this.element.children("option").map(function () {
                var text = $(this).text();
                if (this.value && (!request.term || matcher.test(text)))
                    return {
                        label: text,
                        value: text,
                        option: this
                    };
            }));
        },

        _removeIfInvalid: function (event, ui) {

            // Selected an item, nothing to do
            if (ui.item) {
                return;
            }

            // Search for a match (case-insensitive)
            var value = this.input.val(),
              valueLowerCase = value.toLowerCase(),
              valid = false;
            this.element.children("option").each(function () {
                if ($(this).text().toLowerCase() === valueLowerCase) {
                    this.selected = valid = true;
                    return false;
                }
            });

            // Found a match, nothing to do
            if (valid) {
                return;
            }

            // Remove invalid value
            this.input
              .val("")
              .attr("title", value + " didn't match any item")
              .tooltip("open");
            this.element.val("");
            this._delay(function () {
                this.input.tooltip("close").attr("title", "");
            }, 2500);
            this.input.autocomplete("instance").term = "";
        },

        _destroy: function () {
            this.wrapper.remove();
            this.element.show();
        }
    });

    (jQuery);


    $("#GrnNo").combobox();
    $("#toggle").click(function () {
        $("#GrnNo").toggle();
    });



    var specialKeys = new Array();
    specialKeys.push(8);


    $("#QtyRejectionPercent,#PcsRejectionPercent").bind("keypress", function (e) {
        var keyCode = e.which ? e.which : e.keyCode
        var ret = ((keyCode >= 48 && keyCode <= 57) || specialKeys.indexOf(keyCode) != -1);
        $(".error").css("display", ret ? "none" : "inline");
        return ret;
    });
    $("#QtyRejectionPercent,#PcsRejectionPercent").bind("paste", function (e) {
        return false;
    });
    $("#QtyRejectionPercent,#PcsRejectionPercent").bind("drop", function (e) {
        return false;
    });

    function isNumberKey(evt) {

        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode != 46 && charCode > 31
          && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }


</script>

