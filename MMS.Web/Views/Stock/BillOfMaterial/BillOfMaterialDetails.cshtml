@model MMS.Web.Models.StockModel.BillOfMaterialModel

@using MMS.Core.Entities.Stock
@using MMS.Repository.Managers.StockManager
@using MMS.Repository.Managers
@using MMS.Core.Entities
@using MMS.Web.Models.StockModel
@using System.Globalization;

@{
    var SnoVal = 1;
    ViewBag.Title = "BillOfMaterialDetails";
    List<BillOfMaterial> billOfMateriallist = new List<BillOfMaterial>();
    BillOfMaterialManager billOfMaterialManager = new BillOfMaterialManager();
    billOfMateriallist = billOfMaterialManager.Get();
    Model.BillOfMaterialList = billOfMateriallist;
    MaterialManager materialManager = new MaterialManager();
    MaterialMaster materialMaster = new MaterialMaster();
    int comm;
    if (Model != null & Model.CommnBOM1 != "")
    {
        comm = Convert.ToInt32(Model.CommnBOM1);
    }

    MMS.Repository.Managers.ColorManager colorManager = new MMS.Repository.Managers.ColorManager();
    ColorMaster colorMaster = new ColorMaster();
    MMS.Repository.Managers.SubstanceMasterManager substanceMasterManager = new MMS.Repository.Managers.SubstanceMasterManager();
    SubstanceMaster substanceMaster = new SubstanceMaster();
    MMS.Repository.Managers.SupplierMasterManager supplierMasterManager = new MMS.Repository.Managers.SupplierMasterManager();
    SupplierMaster supplierMaster = new SupplierMaster();

    PermissionSettingMaster PermissionSettingModel = new MMS.Core.Entities.PermissionSettingMaster();
    PermissionSettingModel = MMS.Web.ExtensionMethod.HtmlHelper.GetPermissionIdList();

    List<PermissionMaster>
        PermissionModel = new List<PermissionMaster>
            ();
    PermissionModel = MMS.Web.ExtensionMethod.HtmlHelper.GetPermissionList("BillOfMaterial", PermissionSettingModel.PermissionID);
}
@{
    bool AddMaterial = false; bool NotifyMsgMSS = false; bool Excel = false; bool SetUp = false; bool Print = false;
    bool Preview = false;
    bool Save = false; bool Add = false; bool Update = false; bool Display = false; bool Edit = false; bool Delete = false;
    foreach (var item in PermissionModel)
    {
        if (item.PermissionDesc == "AddMaterial")
        {
            AddMaterial = true;
        }
        if (item.PermissionDesc == "Save")
        {
            Save = true;
        }
        if (item.PermissionDesc == "Add")
        {
            Add = true;
        }
        if (item.PermissionDesc == "Update")
        {
            Update = true;
        }
        if (item.PermissionDesc == "Display")
        {
            Display = true;
        }
        if (item.PermissionDesc == "Edit")
        {
            Edit = true;
        }
        if (item.PermissionDesc == "Delete")
        {
            Delete = true;
        }
        if (item.PermissionDesc == "Notify Msg / MSS")
        {
            NotifyMsgMSS = true;
        }
        if (item.PermissionDesc == "Excel")
        {
            Excel = true;
        }
        if (item.PermissionDesc == "SetUp")
        {
            SetUp = true;
        }
        if (item.PermissionDesc == "Preview")
        {
            Preview = true;
        }
        if (item.PermissionDesc == "Print")
        {
            Print = true;
        }
    }
}
<style>
    [type="checkbox"]:not(:checked) + .lbl-ch::after, [type="checkbox"]:checked + .lbl-ch::after {
        content: '✔';
        position: absolute;
        top: -11px;
        left: 12px;
        font-size: 18px;
        line-height: 0.8;
        color: #06a8e8;
        transition: all .2s;
    }

    .not-allowed input {
        cursor: not-allowed !important;
    }

    [type="checkbox"]:not(:checked) + .lbl-ch::before, [type="checkbox"]:checked + .lbl-ch::before {
        content: '';
        position: absolute;
        left: 10px;
        top: -15px;
        width: 20px;
        height: 20px;
        border: 1px solid #06a8e8;
        background: #f8f8f8;
        border-radius: 3px;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
    }

    .custom-combobox {
        width: 100%;
    }

    .but_search_styles {
        right: -24px !important;
    }

    #ui-id-1 {
        width: 523px !important;
        height: 162px !important;
        overflow: auto !important;
    }

    #ui-id-3, #ui-id-2 {
        height: 150px;
        overflow: auto;
    }
</style>

<script>
    $(window).load(function () {
        $('.loader-overlay').fadeOut('fast');
    });

    $(document).ready(function () {

        if(@Model.BomId==0)
        {
            $("#MeanSize").val(121);
            $("#NoOfSets").val("1");
        }
        $('#Addrowfields tbody').remove();
        $("#Date").datepicker({ dateFormat: "dd/mm/yy", maxDate: new Date()  });

        $("#Wastage").change(function () {

            var sn = $("#SampleNorms").val();
            var w = $(this).val();
            var wq = ((parseFloat(sn) / 100) * parseFloat(w));
            var tn = parseFloat(sn) + wq;
            $("#WastageQty").val(wq.toFixed(4));
            $("#TotalNorms").val(tn.toFixed(4));
        });

        $("#WastagePercent").keypress(function () {
            var sn = $(".SampleNorms").val();
            var w = $(this).val();
            var wq = parseFloat(sn) * parseFloat(w) / 100;
            var tn = parseFloat(sn) + parseFloat(wq);
            $(".WastageQty").val(wq.toFixed(4));
            $(".TotalNormsQty").val(tn.toFixed(4));
        });
    });

    function callChange(arg) {
        var id = '';
        var id1 = '';
        id = $('#Addrowfields tbody tr .WastagePercent' + arg).val();
        id1 = $('#Addrowfields tbody tr .SampleNorms' + arg).val();

        var wastage = parseFloat(id);
        var norms = parseFloat(id1);
        var wq = parseFloat(norms) * parseFloat(wastage) / 100;
        var tn = parseFloat(norms) + parseFloat(wq);
        $('#Addrowfields tbody tr .WastageQty' + arg).val(wq);
        $('#Addrowfields tbody tr .TotalNormsQty' + arg).val(tn);
    }
    var SnoVal = 1;
    $(function () {

        $('#CommnBOM1,#CommnBOM2,#CommnBOM3,#CommnBOM4,#CommnBOM5').change(function () {
            $('.loader-overlay').fadeIn('slow');
            $.ajax({
                type: 'GET',
                url: '/BillOfMaterial/ParentMaterialList',
                data: {
                    BomId: $(this).val(),
                    BomNo:$("#BomNo").val(),
                    Description:$("#Description").val(),
                    BuyerMasterId:$("#BuyerMasterId").val(),
                    BuyerModel:$("#BuyerModel").val(),
                    MeanSize:$("#MeanSize").val(),
                    Date:$("#Date").val(),
                    LastBomNoEntered:$("#LastBomNoEntered").val(),
                    LinkBomNo:$("#LinkBomNo").val(),
                    CommnBOM1:$("#CommnBOM1").val(),
                    CommnBOM2:$("#CommnBOM2").val(),
                    CommnBOM3:$("#CommnBOM3").val(),
                    CommnBOM4:$("#CommnBOM4").val(),
                    CommnBOM5:$("#CommnBOM5").val(),
                    OurNorms:$("#OurNorms").val(),
                    OurNormsPercent:$("#OurNormsPercent").val(),
                    PurchaseNorms:$("#PurchaseNorms").val(),
                    PurchaseNormsPercent:$("#PurchaseNormsPercent").val(),
                    IssueNorms:$("#IssueNorms").val(),
                    IssueNormsPercent:$("#IssueNormsPercent").val(),
                    CostingNorms:$("#CostingNorms").val(),
                    CostingNormsPercent:$("#CostingNormsPercent").val(),
                    SNo: $('.bommaterialtable tr').find('.SNO').length
                },
                success: function (data) {
                    var sno="";
                    sno=  $('.bommaterialtable tr').find('.SNO').length;
                    sno++;
                    var hiddenSno=$("#SNO").val();
                    if(hiddenSno!=0)
                    {
                        sno=hiddenSno;
                    }
                    $('.loader-overlay').fadeOut('fast');

                    $("#BomNo").val(data.Model.BomNo);
                    $("#Description").val(data.Model.Description);
                    $("#BuyerMasterId").val(data.Model.BuyerMasterId);
                    $("#BuyerMasterId").val(data.Model.BuyerMasterId);
                    $("#BuyerModel").val(data.Model.BuyerModel);
                    $("#MeanSize").val(data.Model.MeanSize);
                    $("#BuyerNorms").val(data.Model.BuyerNorms);
                    $("#NoOfSets").val(data.Model.NoOfSets);
                    $("#UomMasterId").val(data.Model.UomMasterId);
                    $("#SupplierMasterId").val(data.Model.SupplierMasterId);
                    $("#SizeScheduleMasterId").val(data.Model.SizeScheduleMasterId);
                    $("#SizeRangeMasterId").val(data.Model.SizeRangeMasterId);
                    $('#list-materials tbody').html("")
                    var rowCount = 0;
                    $.each(data.Material, function (index, item) {
                        if(item.SubtranceRangeName==null)
                        {
                            item.SubtranceRangeName="";
                        }
                        if(item.SampleNorms==null)
                        {
                            item.SampleNorms="";
                        }
                        item.SNO=item.SNO;
                        $('#list-materials tbody').append("<tr id=rowid_" + item.BOMMaterialID + "> <td style='display:none' class='BomNo'><span>" + item.BOMMaterialID + "</span><input type='hidden' class='BomId' value='" + item.BomId + "'></td>" +

                                                                                                                "<td style='display:none' class='Description' id='Description'>" + item.Description + "</td>" +
                                                                                                                "<td style='display:none' class='BuyerMasterId' id='BuyerMasterId'>" + item.BuyerMasterId + "</td>" +
                                                                                                                "<td style='display:none' class='BuyerModel' id='BuyerModel'>" + item.BuyerModel + "</td>" +
                                                                                                                "<td style='display:none' class='MeanSize' id='MeanSize'>" + item.MeanSize + "</td>" +
                                                                                                                "<td style='display:none' class='Date' id='Date'>" + item.Date + "</td>" +
                                                                                                                "<td style='display:none' class='ParentBomNo' id='ParentBomNo'>" + "" + "</td>" +
                                                                                                                "<td style='display:none' class='LinkBomNo' id='LinkBomNo'>" + "" + "</td>" +
                                                                                                                "<td style='display:none' class='CommnBOM1' id='CommnBOM1'>" + item.CommnBOM1 + "</td>" +
                                                                                                                "<td style='display:none' class='CommnBOM1' id='CommnBOM1'>" + item.BOMMaterialID + "</td>" +
                                                                                                                "<td style='' class='SNO' id='SNO'>" + item.SNO + "</td>" +
                                                                                                                "<td title='Delete'  style='cursor:pointer;' class='Delete' id='Delete'><input type='button' value='Delete' style='cursor:pointer;' title='Delete' onclick='Deletebtn(" + item.BOMMaterialID+")' class='change_status change_status_  Delete input Edit input' /></td>" +
                                                                                                                "<td title='Edit'  style='cursor:pointer;' class='Edit' id='Edit'><input type='button' value='Edit' style='cursor:pointer;' title='Edit' onclick='RowClick(" + item.BOMMaterialID + "," + item.BomId+ ")' class='change_status change_status_ Delete input Edit input' /></td>" +
                                                                                                                "<td class='MaterialCategoryMasterId_' id='MaterialCategoryMasterId_'>" + item.CategoryName + "</td>" +
                                                                                                                "<td class='MaterialName_' id='MaterialName_'>" + item.MaterialName + "</td>" +
                                                                                                                "<td class='SupplybyID' id='SupplybyID'>" + item.SupplierMasterID + "</td>"+
                                                                                                                "<td class='MaterialGroupMasterId_' id='MaterialGroupMasterId_'>" + item.GroupName + "</td>" +
                                                                                                                "<td class='ColorMasterId_' id='ColorMasterId_'>" + item.ColorName + "</td>" +
                                                                                                                "<td class='SubstanceMasterId_' id='SubstanceMasterId_'>" + item.SubtranceRangeName + "</td>" +
                                                                                                                "<td class='SampleNorms' id='SampleNorms'>" + item.SampleNorms + "</td>" +
                                                                                                                "<td class='WastageQtyUOM' id='WastageQtyUOM'>" + item.WastageqtyUOM + "</td>" +
                                                                                                                "<td class='TotalNorms' id='TotalNorms'>" + item.TotalNorms + "</td>" +
                                                                                                                "<td style='display:none' class='ComponentName' id='ComponentName'>" + item.ComponentName + "</td>" +
                                                                                                                "<td style='display:none' class='BuyerNorms' id='BuyerNorms'>" + item.BuyerNorms + "</td>" +
                                                                                                                "<td style='display:none' class='NoOfSets' id='NoOfSets'>" + item.NoOfSets + "</td>" +
                                                                                                                "<td style='display:none' class='UomMasterId' id='UomMasterId'>" + item.UomMasterId + "</td>" +
                                                                                                                "<td style='display:none' class='SupplierMasterId' id='SupplierMasterId'>" + item.SupplierMasterId + "</td>" +
                                                                                                                "<td style='display:none' class='SizeRangeMasterId' id='SizeRangeMasterId'>" + item.SizeRangeMasterId + "</td>" +
                                                                                                                "<td style='display:none' class='OurNorms' id='OurNorms'>" + item.OurNorms + "</td>" +
                                                                                                                "<td style='display:none' class='OurNormsPercent' id='OurNormsPercent'>" + item.OurNormsPercent + "</td>" +
                                                                                                                "<td style='display:none' class='PurchaseNorms' id='PurchaseNorms'>" + item.PurchaseNorms + "</td>" +
                                                                                                                "<td style='display:none' class='PurchaseNormsPercent' id='PurchaseNormsPercent'>" + item.PurchaseNormsPercent + "</td>" +
                                                                                                                "<td style='display:none' class='IssueNorms' id='IssueNorms'>" + item.IssueNorms + "</td>" +
                                                                                                                "<td style='display:none' class='IssueNormsPercent' id='IssueNormsPercent'>" + item.IssueNormsPercent + "</td>" +
                                                                                                                "<td style='display:none' class='CostingNorms' id='CostingNorms'>" + item.CostingNorms + "</td>" +
                                                                                                                 "<td style='display:none' class='Conversion' id='Conversion'>" + item.Conversion + "</td>" +
                                                                                                                 "<td style='display:none'class='MaterialCategoryMasterId' id='MaterialCategoryMasterId'>" + item.MaterialCategoryMasterId + "</td>" +
                                                                                                                "<td style='display:none' class='MaterialName' id='MaterialName'>" + item.MaterialName + "</td>" +
                                                                                                                "<td style='display:none' class='MaterialGroupMasterId' id='MaterialGroupMasterId'>" + item.MaterialGroupMasterId + "</td>" +
                                                                                                                "<td style='display:none' class='ColorMasterId' id='ColorMasterId'>" + item.ColorMasterId + "</td>" +
                                                                                                                "<td style='display:none' class='SubstanceMasterId' id='SubstanceMasterId'>" + item.SubstanceMasterId + "</td>" +
                                                                                                                "<td style='display:none' class='CostingNormsPercent' id='CostingNormsPercent'>" + item.CostingNormsPercent + "</td>" +
                                                                                                                "<td style='display:none' class='PreparedBy' id='PreparedBy'>" + item.PreparedBy + "</td>" +
                                                                                                                "<td style='display:none' class='WastageQtyUOM' id='WastageQtyUOM'>" + item.WastageQtyUOM + "</td>" +
                                                                                                                "<td style='display:none' class='VerifiedBy' id='VerifiedBy'>" + item.VerifiedBy + "</td>" +
                                                                                                                "<td style='display:none' class='CheckedBy' id='CheckedBy'>" + item.CheckedBy + "</td>"
                                                                                                                + "<td style='display:none' class='AddRowFields'>" + $('#AddRowFields').val() + "</td></tr>");
                        rowCount++;
                        sno++;
                    });


                }
            });
        });
    });

    $(document).on('click', '#add-Compenent', function () {
        $("#Addrowfields").append("<tr class=''><td id='Sno' value=''>" + SnoVal + "</td><td class='width-141'><input type='text' id='Component' value=''/></td><td class='width-91'><input type='text' id='length' class='length' value='' onkeypress=' return isNumberKey(event)' /></td><td class='width-91'><input type='text' id='width' class='width' value='' onkeypress='return isNumberKey(event)' /></td><td class='width-91'><input type='text' id='Nos' class='Nos' value='' onkeypress='return isNumberKey(event)' /></td><td class='width-91'><input type='text' id='SampleNorms' class='SampleNorms" + SnoVal + "' onkeypress='return isNumberKey(event)' /></td><td class='width-91'><input type='text' id='WastagePercent' class='WastagePercent" + SnoVal + "' onkeypress='return isNumberKey(event)' onchange='callChange(" + SnoVal + ")' /></td></td><td class='width-91'><input type='text' id='WastageQty' class='WastageQty" + SnoVal + "' onkeypress='return isNumberKey(event)' /></td><td class='width-91'><input type='text' id='TotalNormsQty' class='TotalNormsQty" + SnoVal + "' onkeypress='return isNumberKey(event)' /><td><input type='button' value='Remove' class='removeSchedule btn btn-default btn-style' /></td></tr>");
        SnoVal++;
    });
    $(document).on('click', '.removeSchedule', function () {
        $(this).closest("tr").remove();
    });

    function validation() {
        if ($('#BomNo').val() == "") {
            alert("Please Enter BomNo.")
            $('#BomNo').css('border-color', 'red');
            $('#BomNo').focus();
            return false;
        }
        else {
            $('#BomNo').css('border-color', '');
        }
        if ($('#Description').val() == "") {
            alert("Please Enter Description.")
            $('#Description').css('border-color', 'red');
            $('#Description').focus();
            return false;
        }
        else {
            $('#Description').css('border-color', '');
        }
        if ($('#BuyerMasterId').val() == "") {
            $('#BuyerMasterId').css('border-color', 'red');
            $('#BuyerMasterId').focus();
            alert("Please Select BuyerMasterId.")
            return false;
        }
        else {
            $('#BuyerMasterId').css('border-color', '');
        }

        if ($('#MeanSize').val() == "") {
            alert("Please Enter Last MeanSize.")
            $('#MeanSize').css('border-color', 'red');
            $('#MeanSize').focus();
            return false;
        }
        else {
            $('#MeanSize').css('border-color', '');
        }
        if ($('#Date').val() == "") {
            alert("Please Enter Date.")
            $('#Date').css('border-color', 'red');
            $('#Date').focus();
            return false;
        }
        else {
            $('#Date').css('border-color', '');
        }

        if ($('#MaterialCategoryMasterId').val() == "") {
            alert("Please select category.")
            $('#MaterialCategoryMasterId').css('border-color', 'red');
            $('#MaterialCategoryMasterId').focus();
            return false;
        }
        else {
            $('#MaterialCategoryMasterId').css('border-color', '');
        }


        if ($('#MaterialName').val() == "" && $('#MaterialName').val()==0) {
            alert("Please select Material Name.")
            $('#MaterialName').css('border-color', 'red');
            $('#MaterialName').focus();
            return false;
        }
        else {
            $('#MaterialName').css('border-color', '');
        }


        if ($('#BuyerModel').val() == "") {
            alert("Please Select BuyerModel.")
            $('#BuyerModel').css('border-color', 'red');
            $('#BuyerModel').focus();
            return false;
        }
        else {
            $('#BuyerModel').css('border-color', '');
        }

        if ($('#MeanSize').val() == "") {
            alert("Please Enter Last MeanSize.")
            $('#MeanSize').css('border-color', 'red');
            $('#MeanSize').focus();
            return false;
        }
        else {
            $('#MeanSize').css('border-color', '');
        }

        if($("#LinkBomNo").prop('disabled')!=true)
        {
            if ($('#LinkBomNo').val() == "") {
                alert("Please Enter Order LinkBomNo.")
                $('#LinkBomNo').css('border-color', 'red');
                $('#LinkBomNo').focus();
                return false;
            }
            else {
                $('#LinkBomNo').css('border-color', '');
            }
        }

        if ($('#MaterialCategoryMasterId').val() == "") {
            alert("Please Enter Category.")
            $('#MaterialCategoryMasterId').css('border-color', 'red');
            $('#MaterialCategoryMasterId').focus();
            return false;
        }
        else {
            $('#MaterialCategoryMasterId').css('border-color', '');
        }

        if ($('#MaterialGroupMasterId').val() == "") {
            alert("Please Enter Group.")
            $('#MaterialGroupMasterId').css('border-color', 'red');
            $('#MaterialGroupMasterId').focus();
            return false;
        }
        else {
            $('#MaterialGroupMasterId').css('border-color', '');
        }
        if ($('#ColorMasterId').val() == "") {
            alert("Please Enter Color.")
            $('#ColorMasterId').css('border-color', 'red');
            $('#ColorMasterId').focus();
            return false;
        }
        else {
            $('#ColorMasterId').css('border-color', '');
        }
        if($('#SubstanceMasterId').prop('disabled')==false)
        {
            if ($('#SubstanceMasterId').val() == "") {
                alert("Please Enter Substance.")
                $('#SubstanceMasterId').css('border-color', 'red');
                $('#SubstanceMasterId').focus();
                return false;
            }
            else {
                $('#SubstanceMasterId').css('border-color', '');
            }
        }


        if ($('#TotalNorms').val() == "") {
            alert("Please Enter TotalNorms.")
            $('#TotalNorms').css('border-color', 'red');
            $('#TotalNorms').focus();
            return false;
        }
        else {
            $('#TotalNorms').css('border-color', '');
        }
        if ($('#WastageQtyUOM').val() == "") {

            $('#WastageQtyUOM').css('border-color', 'red');
            $('#WastageQtyUOM').focus();
            return false;
        }
        else {
            $('#WastageQtyUOM').css('border-color', '');
        }


        if ($('#NoOfSets').val() == "") {
            alert("Please Enter NoOfSets.")
            $('#NoOfSets').css('border-color', 'red');
            $('#NoOfSets').focus();
            return false;
        }
        else {
            $('#NoOfSets').css('border-color', '');
        }
    }

    function Save() {
        var systemUserValue = '';
        var Sno = '';
        var compnt = '';
        var _length = '';
        var width = '';
        var nos = '';
        var samplenms = '';
        var wstg = '';
        var wstqty = '';
        var wsttotalNorms = '';
        $('#Addrowfields tbody tr').each(function () {
            Sno = '';
            compnt = '';
            _length = '';
            width = '';
            nos = '';
            samplenms = '';
            wstg = '';
            wstqty = '';
            wsttotalNorms = '';
            $(this).find("td").each(function () {
                Sno = $('#Sno').val();
                if (Sno != undefined && Sno.trim().length > 0) {
                    systemUserValue += Sno + ',';
                }
                compnt = $(this).find('#Component').val();
                if (compnt != undefined && compnt.trim().length > 0) {
                    systemUserValue += compnt + ',';
                }
                _length = $(this).find('#length').val();
                if (_length != undefined && _length.trim().length > 0) {
                    systemUserValue += _length + ',';
                }
                width = $(this).find('#width').val();
                if (width != undefined && width.trim().length > 0) {
                    systemUserValue += width + ',';

                }
                nos = $(this).find('#Nos').val();
                if (nos != undefined && nos.trim().length > 0) {
                    systemUserValue += nos + ',';
                }

                samplenms = $(this).find('#SampleNorms').val();
                if (samplenms != undefined && samplenms.trim().length > 0) {
                    systemUserValue += samplenms + ',';
                }
                wstg = $(this).find('#WastagePercent').val();
                if (wstg != undefined && wstg.trim().length > 0) {
                    systemUserValue += wstg + ',';
                }
                wstqty = $(this).find('#WastageQty').val();
                if (wstqty != undefined && wstqty.trim().length > 0) {
                    systemUserValue += wstqty + ',';
                }
                wsttotalNorms = $(this).find('#TotalNormsQty').val();
                if (wsttotalNorms != undefined && wsttotalNorms.trim().length > 0) {
                    systemUserValue += wsttotalNorms;
                }

            });
            systemUserValue += '#';

        });
        var form = systemUserValue;
        console.log($('.AddRowFields').val());
        $('#AddRowFields').val(form);
        var CommnBOM = "";
        if ($('#CommnBOM1').val() != "") {
            CommnBOM = $('#CommnBOM1').val();
        }
        if ($('#CommnBOM2').val() != "") {
            CommnBOM += "," + $('#CommnBOM2').val();
        }
        if ($('#CommnBOM3').val() != "") {
            CommnBOM += "," + $('#CommnBOM3').val();
        }
        if ($('#CommnBOM4').val() != "") {
            CommnBOM += "," + $('#CommnBOM4').val();
        }
        if ($('#CommnBOM5').val() != "") {
            CommnBOM += "," + $('#CommnBOM5').val();
        }
        var rowCount = $('#list-materials tr').length - 1;
        if (rowCount == 0) {

            if (validation()) {


                var forms_ = $(".form-inline").serialize();

                if ($("#list-materials tbody tr").length == 0) {

                    $.ajax({
                        type: 'POST',
                        url: '/BillOfMaterial/BillOfMaterialDetails',
                        data: { forms: forms_, Grid: $('.AddRowFields').text(), BomGridlst: '@Model.BomGridlst' },
                        success: function (data) {
                            if (data == true) {
                                if ($("#BtnSave").val() == "Save") {
                                    alert('Saved Successfully.');
                                }
                                else {
                                    alert('Updated Successfully.');
                                }

                                location.href = "/BillOfMaterial/BOMMaterialListGrid";
                                return false;
                            }
                            else {
                                alert('Save process Failed.');
                                location.href = "/BillOfMaterial/BOMMaterialListGrid";
                                return false;
                            }
                        }
                    });

                }
            }
        }
        else {

            var wholeJsonList = [];
            console.log(forms_);
            console.log($('#AddRowFields').val());
            console.log($('#AddRowFields').val(form))
            $('#list-materials tbody tr').each(function () {
                $(this).addClass("curChangeableRow"),
               $(this).siblings().removeClass("curChangeableRow"),
              $('.curChangeableRow').hide(),

    wholeJsonList.push(
        {

            forms: forms_,
            Grid: $('.AddRowFields').text(),
            BomGridlst: '@Model.BomGridlst',
            BomNo: $(this).find('span').html(),
            Description: $(this).find('.Description').html(),
            BuyerMasterId: $(this).find('.BuyerMasterId').html(),
            BuyerModel: $(this).find('.BuyerModel').html(),
            MeanSize: $(this).find('.MeanSize').html(),
            Date: $(this).find('.Date').html(),
            ParentBomNo: $(this).find('.ParentBomNo').html(),
            LinkBomNo: $(this).find('.LinkBomNo').html(),
            CommnBOM1: $(this).find('.CommnBOM1').html(),
            MaterialCategoryMasterId: $(this).find('.MaterialCategoryMasterId').html(),
            MaterialName: $(this).find('.MaterialName').html(),
            MaterialGroupMasterId: $(this).find('.MaterialGroupMasterId').html(),
            ColorMasterId: $(this).find('.ColorMasterId').html(),
            SubstanceMasterId: $(this).find('.SubstanceMasterId').html(),
            SampleNorms: $(this).find('.SampleNorms').html(),
            Wastage: $(this).find('.Wastage').html(),
            WastageQty: $(this).find('.WastageQty').html(),
            WastageQtyUOM: $(this).find('.WastageQtyUOM').html(),
            TotalNorms: $(this).find('.TotalNorms').html(),
            TotalNormsUOM: $(this).find('.TotalNormsUOM').html(),
            ComponentName: $(this).find('.ComponentName').html(),
            BuyerNorms: $(this).find('.BuyerNorms').html(),
            NoOfSets: $(this).find('.NoOfSets').html(),
            UomMasterId: $(this).find('.UomMasterId').html(),
            SupplierMasterId: $(this).find('.SupplierMasterId').html(),
            SizeRangeMasterId: $(this).find('.SizeRangeMasterId').html(),
            SizeScheduleMasterId: $(this).find('.SizeScheduleMasterId').html(),
            OurNorms: $(this).find('.OurNorms').html(),
            OurNormsPercent: $(this).find('.OurNormsPercent').html(),
            PurchaseNorms: $(this).find('.PurchaseNorms').html(),
            PurchaseNormsPercent: $(this).find('.PurchaseNormsPercent').html(),
            IssueNorms: $(this).find('.IssueNorms').html(),
            IssueNormsPercent: $(this).find('.IssueNormsPercent').html(),
            CostingNorms: $(this).find('.CostingNorms').html(),
            CostingNormsPercent: $(this).find('.CostingNormsPercent').html(),
            PreparedBy: $(this).find('.PreparedBy').html(),
            VerifiedBy: $(this).find('.VerifiedBy').html(),
            CheckedBy: $(this).find('.CheckedBy').html(),

        });
            });

            var wholeJsonListLength = wholeJsonList.length;

            var i = 0;
            for (i = 0; i <= wholeJsonListLength - 1; i++) {
                $.ajax({
                    type: 'POST',
                    url: '/BillOfMaterial/BillOfMaterialDetails',

                    data: wholeJsonList[i],
                    success: function (data) {
                        if (data == true) {
                            if ($("#BtnSave").val() == "Save") {
                                alert('Saved Successfully.');

                            }
                            else {
                                alert('Updated Successfully.');
                            }

                            location.href = "/BillOfMaterial/BOMMaterialListGrid";
                            return false;
                        }
                        else {
                            alert('Save process Failed.');
                            location.href = "/BillOfMaterial/BOMMaterialListGrid";
                            return false;
                        }
                    }
                });
            }
        }

    }


    function DisplaySizeRange(){
        $('.loader-overlay').fadeIn('slow');
        if($("#Displaycheck").is(":checked")==true && $('#SizeRangeMasterId').val()!=0) {
            $.ajax({
                type: "GET",
                dataType: "JSON",
                url: '@Url.Action("GetSizeRange", "BuyerOrderEntryForm")',
                data: { SizeRangeMasterId: $('#SizeRangeMasterId').val() },
                success: function (data) {
                    $('.loader-overlay').fadeOut('fast');
                    var count = 1;
                    $('#sizeRangeTable tbody tr').each(function () {
                        $(this).find("td:not(:first)").remove();
                    });
                    for (var i = 0; i <= data.length; i++) {
                        $('#sizeRangeTable tbody tr:first-child').append('<td  style="background-color: #ddd;padding-bottom: 3px;width: auto !important;padding:0 0px;" class="SizeRangeRefValue"> ' + data[i].SizeRangeRefValue + ' </td> ');
                        $('#sizeRangeTable tbody tr:last').append("<td><input type='checkbox' name='size_chk' id='size_chk"+i+"' class='checked_checkbox'  style=''></input> <label for='size_chk"+i+"' style='' class='lbl-ch'></label></td>");
                        count++;
                    }
                }
            });
        }
        else
        {
            $('#sizeRangeTable tbody tr').each(function(){
                $(this).find("td:not(:first)").remove();
            });
            $('.loader-overlay').fadeOut('fast');
        }

    }
</script>
<link href="~/Content/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/css/FormStyle.css" rel="stylesheet" />
<link rel="stylesheet" href="css/responsive.css">
<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css">
<link href="~/Scripts/EasyAutocomplete-1.3.5/comboStyles.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="~/Scripts/EasyAutocomplete-1.3.5/ComboBox.js"></script>
<script src="~/Scripts/AutoCompleteCommon.js"></script>
<script src="~/jquery-ui-timepicker-0.3.3/jquery.ui.timepicker.js"></script>
<link href="~/jquery-ui-timepicker-0.3.3/jquery.ui.timepicker.css" rel="stylesheet" />
<link type="text/css" href="~/Datepicker/css/ui-lightness/jquery-ui-1.8.19.custom.css" rel="stylesheet" />
<script src="~/jquery-ui-timepicker-0.3.3/jquery.ui.timepicker.js"></script>
<link href="~/jquery-ui-timepicker-0.3.3/jquery.ui.timepicker.css" rel="stylesheet" />

<style>
    .right-form-section {
        width: 98% !important;
    }

    #TotalDiv > div {
        margin-left: 30px;
    }
</style>
<div class="loader-overlay" style="position:fixed;left:0;right:0;top:0;bottom:0;margin:auto;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:99;">
    <div id="spinner" style="position:relative;height:64px;width:64px;margin:auto;top:50%;">
        <img src="~/Content/Images/round.gif" id="imgLoading" alt="Loading..." />
    </div>
</div>
<div class="right-form-section clearfix" id="TotalDiv">

    <div>
        <input type="button" onclick="Cancel()" class="close_btn" title="Back" value="x">
    </div>
    <form class="form-inline">
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#step1">step 1</a></li>
            <li><a data-toggle="tab" href="#step2">Step 2</a></li>
        </ul>
        <div class="tab-content">
            <div id="step1" class="tab-pane fade in active">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 pull-right no-padding">
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12 ">
                                        <label for="text" class="form-label"><span class="orange-lable">Amendment</span></label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.HiddenFor(m => m.BOMAmendmentMaterialID)
                                        @Html.HiddenFor(m => m.BomId)
                                        @Html.HiddenFor(m => m.SNO)
                                        @Html.HiddenFor(x => x.HiddenParentBOMID)
                                        @{
                                            if (Model != null && Model.amendmentmaterialList != null && Model.amendmentmaterialList.Count > 0)
                                            {
                                                int count = 0;
                                                count = Model.amendmentmaterialList.Count();
                                        @Html.TextBoxFor(m => count, new { @class = "form-control text-field", placeholder = "enter text", @readonly = true })
                                            }
                                            else
                                            {
                                        @Html.TextBoxFor(m => m.Ammendment, new { @class = "form-control text-field", placeholder = "enter text" })
                                            }
                                        }


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">
                                            BOM No :<br />
                                            (Sketch No )
                                        </label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.TextBoxFor(m => m.BomNo, new { @class = "form-control text-field", @style = "  width: 164px;", placeholder = "Enter Text" })

                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Description</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.TextBoxFor(m => m.Description, new { @class = "form-control text-field", @style = "  width: 164px;", placeholder = "Enter Text" })

                                    </div>
                                </div>
                            </div>

                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">
                                            Product Group<br />
                                            (Buyer Name)
                                        </label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.BuyerMasterId, MMS.Web.ExtensionMethod.HtmlHelper.BuyerName(), new { @class = "select-style text-field " })

                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Buyer Model</label>
                                    </div>

                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.BuyerModel, MMS.Web.ExtensionMethod.HtmlHelper.BuyerModel(), new { @class = "select-style text-field " })

                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Mean Size</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.MeanSize, MMS.Web.ExtensionMethod.HtmlHelper.SizeRangeValue(), new { @class = "select-style text-field " })



                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Date</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @if (Model != null && Model.BomId != 0)
                                        {
                                            var from = Model.Date;
                                        @Html.TextBoxFor(m => m.Date, new { @Value = from, @class = "form-control text-field" })
                                        }
                                        else
                                        {

                                        @Html.TextBoxFor(m => m.Date, new { @Value = System.DateTime.Now.Date.ToString("dd/MM/yyyy"), @class = "form-control text-field" })
                                        }

                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Parent BOM No.</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.ParentBomNo, MMS.Web.ExtensionMethod.HtmlHelper.GetBomNo(), " -- Please Select -- ", new { @class = "select-style text-field " })

                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Last BOM No. Entered</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.TextBoxFor(m => m.LastBomNoEntered, new { @class = "form-control text-field", @readonly = "true" })

                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">
                                            Link BOM to this Style/  Product
                                        </label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">


                                        @Html.DropDownListFor(m => m.LinkBomNo, Model.bomStyleList, "Please Select", new { @class = "select-style text-field " })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Common BOM No.</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">

                                        @Html.DropDownListFor(m => m.CommnBOM1, MMS.Web.ExtensionMethod.HtmlHelper.GetBomNo(), new { @class = "select-style text-field" })

                                    </div>
                                </div>
                            </div>

                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.CommnBOM2, MMS.Web.ExtensionMethod.HtmlHelper.Bom(), new { @class = "select-style text-field" })

                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.CommnBOM3, MMS.Web.ExtensionMethod.HtmlHelper.Bom(), new { @class = "select-style text-field" })

                                    </div>
                                </div>
                            </div>

                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.CommnBOM4, MMS.Web.ExtensionMethod.HtmlHelper.Bom(), new { @class = "select-style text-field" })

                                    </div>
                                </div>
                            </div>
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">

                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.CommnBOM5, MMS.Web.ExtensionMethod.HtmlHelper.Bom(), new { @class = "select-style text-field" })

                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                    <hr style="border-bottom: 1px solid #3498db;" />
                    <div class="row">
                        <p class="section-title">Material details</p>
                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">

                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label">Material Catogory</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12" id="materialCategory">
                                        @Html.DropDownListFor(m => m.MaterialCategoryMasterId, MMS.Web.ExtensionMethod.HtmlHelper.MaterialCategoryName(), new { @class = "select-style text-field" })

                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                            <div class="field-section">
                                <div class="form-group">
                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label" style="padding-left:15px;">Material  Group</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12" id="materialGroupID_">
                                        @Html.DropDownListFor(m => m.MaterialGroupMasterId, MMS.Web.ExtensionMethod.HtmlHelper.MaterialGroupName(), new { @class = "select-style text-field " })

                                    </div>
                                </div>

                            </div>

                        </div>

                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label" style="padding-left:15px;">Substance</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.SubstanceMasterId, MMS.Web.ExtensionMethod.HtmlHelper.SubstanceRange(), new { @class = "select-style text-field " })

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-8 col-xs-12 no-padding">
                            <div class="field-section">
                                <div class="form-group">
                                    @Html.HiddenFor(m => m.AddRowFields)
                                    @Html.HiddenFor(m => m.BOMMaterialID)
                                    <div class="col-md-5 col-sm-5 col-lg-3 col-xs-12">
                                        <label for="text" class="form-label">Material Name</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-9 col-xs-12 no-padding" id="masterialName_" style="padding-left: 0;left: -17px;">
                                        @Html.DropDownListFor(m => m.MaterialName, MMS.Web.ExtensionMethod.HtmlHelper.MaterialMasterName(), new { @class = "select-style text-field " })
                                        <button type="button" class="btn btn-info btn-sm but_search_styles" data-toggle="modal" title="Material List" data-target="#auto_search">...</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                            <div class="field-section">
                                <div class="form-group">

                                    <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                        <label for="text" class="form-label" style="padding-left:15px;">Color</label>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                        @Html.DropDownListFor(m => m.ColorMasterId, MMS.Web.ExtensionMethod.HtmlHelper.ColourName(), new { @class = "select-style text-field " })

                                    </div>
                                </div>
                            </div>
                        </div>



                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 no-padding" style="padding: 10px 0px;">
                            <div class="col-md-3 col-lg-2 col-sm-3 col-xs-12 pad_left">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-xs-12">
                                            <label for="text" class="form-label">M² Conversion</label>
                                        </div>
                                        <div class="col-xs-12">
                                            <div class="col-xs-12 pull-left no-padding">
                                                @Html.TextBoxFor(m => m.Conversion, new { @class = "form-control text-field ", @onkeypress = "return isNumberKey(event)", placeholder = "enter value" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-3 col-xs-12 pad">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12">
                                            <label style="height: auto;" for="text" class="form-label">TotalNorms</label>
                                        </div>
                                        <div class="col-md-12 col-sm-7 col-lg-12 col-xs-12">
                                            @Html.TextBoxFor(m => m.TotalNorms, new { @class = "form-control text-field ", @onkeypress = "return isNumberKey(event)", placeholder = "enter value" })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-3 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12">
                                            <label style="height: auto;" for="text" class="form-label">Buyer Norms</label>
                                        </div>

                                        <div class="col-xs-12 pull-left">
                                            @Html.TextBoxFor(m => m.BuyerNorms, new { @class = "form-control text-field ", @onkeypress = "return isNumberKey(event)" })
                                        </div>


                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-3 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding">
                                            <label style="height: auto;" for="text" class="form-label">UOM</label>
                                        </div>


                                        <div class="col-xs-12  pull-right no-padding">
                                            @Html.DropDownListFor(m => m.WastageQtyUOM, MMS.Web.ExtensionMethod.HtmlHelper.Uom(), new { @class = "select-style text-field " })

                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-3 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-xs-12">
                                            <label for="text" class="form-label">No of SET’s</label>
                                        </div>
                                        <div class="col-xs-12">
                                            <div class="col-xs-12 pull-left no-padding">
                                                @if (Model != null && Model.BomId != 0)
                                                {
                                                @Html.TextBoxFor(m => m.NoOfSets, new { @class = "form-control text-field", @onkeypress = "return isNumberKey(event)" })
                                                }
                                                else
                                                {
                                                @Html.TextBoxFor(m => m.NoOfSets, new { @class = "form-control text-field", @Value = "1", @onkeypress = "return isNumberKey(event)" })
                                                }

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-3 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-xs-12">
                                            <label for="text" class="form-label">Sample Norms</label>
                                        </div>
                                        <div class="col-xs-12">
                                            <div class="col-xs-12 pull-left no-padding">
                                                @Html.TextBoxFor(m => m.SampleNorms, new { @class = "form-control text-field ", @onkeypress = "return isNumberKey(event)", placeholder = "enter value" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <hr style="border-bottom: 1px solid #3498db;" />
                            <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                                <div class="field-section">
                                    <div class="form-group">
                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Mat. Supply By</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.SupplierMasterId, new SelectList(
                                                            new List<Object>
                                                                {
                                                                new { value = 0 , text = "Please Select"  },
                                                                new { value = 1 , text = "Buyer"  },
                                                                new { value = 2 , text = "Enco" }

                                                                },
                                                                "value",
                                                                "text",
                                                                0), new { @class = "select-style text-field " })

                                        </div>
                                    </div>
                                </div>


                            </div>
                            <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Size Match</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.SizeScheduleMasterId, MMS.Web.ExtensionMethod.HtmlHelper.SizeScheduleMaster(), new { @class = "select-style text-field " })

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Size Schedule</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.DropDownListFor(m => m.SizeRangeMasterId, MMS.Web.ExtensionMethod.HtmlHelper.SizeRangeMaster(), new { @class = "select-style text-field " })

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr style="border-bottom: 1px solid #3498db;" />
                        <div class="field-section" id="DispalySizeRange">
                            <div class="form-group">
                                <div class="col-md-8 col-lg-12 col-sm-12 col-xs-12" style="padding: 10px 0px;overflow:auto;">

                                    <div class="form-group" style="display: inline; margin-left: 2px;">
                                        <input id="Displaycheck" class="SizeRangeEv" type="checkbox" onclick="DisplaySizeRange()">
                                        <label for="Displaycheck" style="">Display Size Range</label>
                                        <input id="SelectAll" class="SelectAll" type="checkbox">
                                        <label for="SelectAll" style="">Select All</label>
                                    </div>
                                    <table id="sizeRangeTable">
                                        <tbody>
                                            <tr>
                                                <td style="background-color: #ddd; padding-bottom: 3px;  padding-left: 0;  padding-top: 1px;  width: 52px !important; float: left;">Size</td>
                                            </tr>
                                            <tr>
                                                <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;  width: 52px !important; float: left;">IsCheck</td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                        <hr style="border-bottom: 1px solid #3498db;" />
                        <div class="field-section">
                            <div class="form-group">
                                <div class="col-md-8 col-lg-6 col-sm-12 col-xs-12" style="padding: 10px 0px;">
                                    <p style="display: inline;" class="section-title">If multiple Component for this material</p>
                                    <div class="form-group" style="display: inline; margin-left: 15px;">
                                        <input type="checkbox" checked="checked" id="component-check">
                                        <label for="component-check" style="">Components</label>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-12 col-lg-6 col-xs-12">
                                    @{
                                        bool AddComponent = false;
                                        foreach (var item in PermissionModel)
                                        {
                                            if (item.PermissionDesc == "AddComponent")
                                            {
                                                AddComponent = true;
                                            }
                                            if (item.PermissionDesc == "AddMaterial")
                                            {
                                                AddMaterial = true;
                                            }

                                        }
                                        if (AddComponent == true)
                                        {
                                    <button type="button" class="btn btn-default btn-style" value="AddComponent" id="add-Compenent">Add Component</button>
                                        }
                                        else
                                        {
                                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Add Component">
                                        }
                                        if (AddMaterial == true)
                                        {
                                    <button type="button" class="btn btn-default btn-style material_BOM" value="AddMaterial" id="add-Material">Add Material</button>
                                        }
                                        else
                                        {
                                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Add Material">
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                        <hr style="border-bottom: 1px solid #3498db;" />
                        <div class="field-section">
                            <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12">

                                <div class="col-md-8 col-sm-8 col-lg-8 col-xs-12 no-padding padding-right-20 visbile-hide-show-sec">
                                    <p class="section-title">List the Components(Multiple Component)for this material</p>

                                    <div class="table-responsive table-td-padding parent-table-height tbl-bdr-data">

                                        <table class="addfields table fixed-header" border="1" id="Addrowfields">
                                            <thead>
                                                <tr id="GetData">
                                                    <th>Si.No</th>
                                                    <th>Component</th>
                                                    <th>Length</th>
                                                    <th>Width</th>
                                                    <th>nos</th>
                                                    <th>Sample Norms</th>
                                                    <th>Wastage %</th>
                                                    <th>Wastage Qty</th>
                                                    <th>Total Norms</th>
                                                    <th>Delete</th>
                                                </tr>
                                            </thead>
                                            @if (Model != null && Model.bomGridList != null && Model.bomGridList.Count > 0)
                                            {
                                                foreach (BomGrid bom in Model.bomGridList)
                                                {
                                            <tbody>
                                                <tr id='appendvalue1' class='test'>
                                                    <td>

                                                        <input type="hidden" id="bomGridId" value="@bom.BomGridId">
                                                        <input type='text' id='Sno' value="@bom.Sno" disabled='disabled' />
                                                    </td>
                                                    <td>
                                                        <input type='text' id='Component' class="Component" value="@bom.Component" />
                                                    </td>
                                                    <td>
                                                        <input type='text' id='Length' class="Length" value="@bom.Length" onkeypress="isNumberKey(event)" />
                                                    </td>
                                                    <td>
                                                        <input type='text' id='Width' class="Width" value="@bom.Width" onkeypress="isNumberKey(event)" />
                                                    </td>
                                                    <td>
                                                        <input type='text' id='Nos' class="Nos" value="@bom.Nos" onkeypress="isNumberKey(event)" />
                                                    </td>
                                                    <td>
                                                        <input type='text' id='SampleNorms' class="SampleNorms" onkeypress="isNumberKey(event)" value="@bom.SampleNorms" />
                                                    </td>
                                                    <td>
                                                        <input type='text' id='WastagePercent' class="WastagePercent" onkeypress="isNumberKey(event)" value="@bom.WastagePercent" />
                                                    </td>
                                                    <td>
                                                        <input type='text' id='WastageQty' class="WastageQty" onkeypress="isNumberKey(event)" value="@bom.WastageQtyGrid" />
                                                    </td>
                                                    <td>
                                                        <input type='text' id='TotalNormsQty' class="TotalNormsQty" onkeypress="isNumberKey(event)" value="@bom.TotalNormsQty" />
                                                    </td>
                                                    <td>
                                                        <button type="button" class="remove-button" onkeypress="isNumberKey(event)" data-id='@bom.BomGridId'>Delete</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                                }
                                            }

                                        </table>

                                    </div>

                                </div>
                                <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12 no-padding">
                                    <p class="section-title">Set Norms with sample Norms</p>
                                    <div class="field-section">
                                        <div class="form-group">

                                            <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                                <label for="text" class="form-label">Our Norms/Sample Norms</label>
                                            </div>
                                            <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                                <div class="col-md-8 col-sm-8 col-lg-8 col-xs-12 pull-left no-padding">
                                                    @Html.DropDownListFor(m => m.OurNorms, new SelectList(
                                                                    new List<Object>
                                                                        {
                                                                        new { value = 0 , text = "Please Select"  },
                                                                        new { value = 1 , text = "Increase" },
                                                                        new { value = 2 , text = "Decrease" },
                                                                        new { value = 3 , text = "Same" }
                                                                        },
                                                                        "value",
                                                                        "text",
                                                                        0), new { @class = "select-style text-field ", style = "  width: 80px;" })

                                                    <div class="percent">%</div>
                                                </div>
                                                <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12  pull-right no-padding">
                                                    @Html.TextBoxFor(m => m.OurNormsPercent, new { @class = "form-control text-field ", @placeholder = "0.2558" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="field-section">
                                        <div class="form-group">

                                            <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                                <label for="text" class="form-label">Purchase Norms</label>
                                            </div>
                                            <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                                <div class="col-md-8 col-sm-8 col-lg-8 col-xs-12 pull-left no-padding">
                                                    @Html.DropDownListFor(m => m.PurchaseNorms, new SelectList(
                                                                    new List<Object>
                                                                        {
                                                                        new { value = 0 , text = "Please Select"  },
                                                                        new { value = 1 , text = "Increase" },
                                                                        new { value = 2 , text = "Decrease" },
                                                                        new { value = 3 , text = "Same" }

                                                                        },
                                                                        "value",
                                                                        "text",
                                                                        0), new { @class = "select-style text-field EditAmndt", style = "  width: 80px;" })

                                                    <div class="percent">%</div>
                                                </div>
                                                <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12  pull-right no-padding">
                                                    @Html.TextBoxFor(m => m.PurchaseNormsPercent, new { @class = "form-control text-field ", @placeholder = "0.2558" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="field-section">
                                        <div class="form-group">

                                            <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                                <label for="text" class="form-label">Issue Norms</label>
                                            </div>
                                            <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                                <div class="col-md-8 col-sm-8 col-lg-8 col-xs-12 pull-left no-padding">
                                                    @Html.DropDownListFor(m => m.IssueNorms, new SelectList(
                                                                    new List<Object>
                                                                        {
                                                                        new { value = 0 , text = "Please Select"  },
                                                                        new { value = 1 , text = "Increase" },
                                                                        new { value = 2 , text = "Decrease" },
                                                                        new { value = 3 , text = "Same" }

                                                                        },
                                                                        "value",
                                                                        "text",
                                                                        0), new { @class = "select-style text-field ", style = "  width: 80px;" })

                                                    <div class="percent">%</div>
                                                </div>
                                                <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12  pull-right no-padding">
                                                    @Html.TextBoxFor(m => m.IssueNormsPercent, new { @class = "form-control text-field ", @placeholder = "0.2558" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="field-section">
                                        <div class="form-group">

                                            <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                                <label for="text" class="form-label">Costing Norms</label>
                                            </div>
                                            <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                                <div class="col-md-8 col-sm-8 col-lg-8 col-xs-12 pull-left no-padding">
                                                    @Html.DropDownListFor(m => m.CostingNorms, new SelectList(
                                                                    new List<Object>
                                                                        {
                                                                        new { value = 0 , text = "Please Select"  },
                                                                        new { value = 1 , text = "Increase" },
                                                                        new { value = 2 , text = "Decrease" },
                                                                        new { value = 3 , text = "Same" }

                                                                        },
                                                                        "value",
                                                                        "text",
                                                                        0), new { @class = "select-style text-field ", style = "  width: 80px;" })

                                                    <div class="percent">%</div>
                                                </div>
                                                <div class="col-md-4 col-sm-4 col-lg-4 col-xs-12  pull-right no-padding">
                                                    @Html.TextBoxFor(m => m.CostingNormsPercent, new { @class = "form-control text-field ", @placeholder = "0.2558" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                        <div class="" id="MaterialListGrid">
                            @{Html.RenderPartial("~/Views/Stock/BillOfMaterial/PartialView/_MaterialGrid.cshtml", Model);}

                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12" style="display:none" id="ParentDiv">
                            <p class="section-title">List of material and other items</p>
                            <div>
                                <input type="text" id="Material_Search" placeholder="Material Search" style="cursor:pointer;width: 50%;margin-bottom: 7px;" />
                                <input type="button" value="Search" title="Title" onclick="MaterialSearch()" />
                            </div>
                            <div class="table-responsive table-td-padding parent-table-height" style="height:auto">
                                <table class="table" id="list-materials_">
                                    <thead>
                                        <tr>
                                            <td class="" style="display:none">BomNo</td>
                                            <td style="display:none">Description</td>
                                            <td style="display:none">BuyerMaster</td>
                                            <td style="display:none">BuyerModel</td>
                                            <td style="display:none">MeanSize</td>
                                            <td style="display:none">Date</td>
                                            <td style="display:none">ParentBomNo</td>
                                            <td style="display:none">LastBomNoEntered</td>
                                            <td style="display:none">LinkBomNo</td>
                                            <td class="" style="display:none">BOMMaterialID</td>
                                            <td class="" style="display:none">BomGridId</td>
                                            <td class="" style="">SNO</td>
                                            <td class="Delete" style="">Delete</td>
                                            <td class="Edit" style="">Edit</td>
                                            <td>MaterialCategoryMasterId</td>
                                            <td>MaterialName</td>
                                            <td>MaterialGroupMasterId</td>
                                            <td>ColorMasterId</td>
                                            <td>SubstanceMasterId</td>
                                            <td>SampleNorms</td>

                                            <td>WastageQtyUOM</td>
                                            <td>TotalNorms</td>

                                            <td style="display:none">ComponentName</td>
                                            <td style="display:none">BuyerNorms</td>
                                            <td style="display:none">NoOfSets</td>
                                            <td style="display:none">UomMasterId</td>
                                            <td style="display:none">SupplierMasterId</td>
                                            <td style="display:none">SizeRangeMasterId</td>
                                            <td style="display:none">OurNorms</td>
                                            <td style="display:none">OurNormsPercent</td>
                                            <td style="display:none">PurchaseNorms</td>
                                            <td style="display:none">PurchaseNormsPercent</td>
                                            <td style="display:none">IssueNorms</td>
                                            <td style="display:none">IssueNormsPercent</td>
                                            <td style="display:none">CostingNorms</td>
                                            <td style="display:none">CostingNormsPercent</td>
                                            <td style="display:none">PreparedBy</td>
                                            <td style="display:none">VerifiedBy</td>
                                            <td style="display:none">CheckedBy</td>
                                            <td style="display:none">BOMMaterialID</td>
                                            <td class="" style="display:none">SizeScheduleMasterId</td>

                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="step2" class="tab-pane fade">
                <div class="container-fluid">



                    <div class="row">
                    </div>
                    <hr />
                    <div class="row">
                        <div class="field-section">
                            <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12">
                                <p class="section-title">List of Amended Material </p>

                                <div class="table-responsive table-td-padding parent-table-height">
                                    <table class="table" id="list-UpdatedMaterials">
                                        <thead>
                                            <tr>
                                                <td style="display:none">BomNo</td>
                                                <td style="display:none">Description</td>
                                                <td style="display:none">BuyerMaster</td>
                                                <td style="display:none">BuyerModel</td>
                                                <td style="display:none">MeanSize</td>
                                                <td style="display:none">Date</td>
                                                <td style="display:none">ParentBomNo</td>
                                                <td style="display:none">LastBomNoEntered</td>
                                                <td style="display:none">LinkBomNo</td>
                                                <td>CategoryName</td>
                                                <td>MaterialName</td>
                                                <td>GroupName</td>
                                                <td>Color</td>
                                                <td>SubstanceName</td>
                                                <td>SampleNorms</td>
                                                <td>WastageQtyUOM</td>
                                                <td>TotalNorms</td>
                                                <td style="display:none">ComponentName</td>
                                                <td>Conversion</td>
                                                <td>BuyerNorms</td>
                                                <td style="display:none">NoOfSets</td>
                                                <td style="display:none">UomMasterId</td>
                                                <td style="display:none">SupplierMasterId</td>
                                                <td style="display:none">SizeRangeMasterId</td>
                                                <td>OurNorms</td>
                                                <td>OurNormsPercent</td>
                                                <td>PurchaseNorms</td>
                                                <td>PurchaseNormsPercent</td>
                                                <td>IssueNorms</td>
                                                <td>IssueNormsPercent</td>
                                                <td>CostingNorms</td>
                                                <td>CostingNormsPercent</td>
                                                <td style="display:none">PreparedBy</td>
                                                <td style="display:none">VerifiedBy</td>
                                                <td style="display:none">CheckedBy</td>
                                                <td>Updated By</td>
                                                <td>Update On</td>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (Model != null && Model.amendmentmaterialList != null)
                                            {
                                                foreach (var item in Model.amendmentmaterialList)
                                                {
                                                    BuyerManager buyerManager = new BuyerManager();
                                                    BuyerMaster buyerMaster = new BuyerMaster();
                                                    MaterialCategoryManager MaterialCategoryManager = new MaterialCategoryManager();
                                                    MaterialCategoryMaster MaterialCategoryMaster = new MaterialCategoryMaster();
                                                    MaterialNameManager MaterialNameManager = new MaterialNameManager();
                                                    MaterialNameMaster MaterialNameMaster = new MaterialNameMaster();
                                                    MaterialGroupManager MaterialGroupManager_ = new MaterialGroupManager();
                                                    MaterialGroupMaster_ MaterialGroupMaster_ = new MaterialGroupMaster_();
                                                    ColorManager ColorManager = new ColorManager();
                                                    ColorMaster ColorMaster = new ColorMaster();
                                                    UomMaster uomMaster = new UomMaster();
                                                    UOMManager uomManager = new UOMManager();
                                                    SubstanceMasterManager substanceManager = new SubstanceMasterManager();
                                                    SubstanceMaster substanceMaster_ = new SubstanceMaster();
                                                    MaterialManager materialManager_ = new MaterialManager();
                                                    MaterialMaster materialMaster_ = new MaterialMaster();
                                                    buyerMaster = buyerManager.GetBuyerMasterId(item.BuyerMasterId != null ? item.BuyerMasterId.Value : 0);
                                                    materialMaster_= materialManager_.GetMaterialMasterId(item.MaterialName);
                                                    MaterialCategoryMaster = MaterialCategoryManager.GetMaterialCategoryMaster(item.MaterialCategoryMasterId);
                                                    MaterialNameMaster = MaterialNameManager.GetMaterialNameMasterId(materialMaster_.MaterialName);
                                                    MaterialGroupMaster_ = MaterialGroupManager_.GetMaterialGroupMaster_Id(item.MaterialGroupMasterId);
                                                    colorMaster = colorManager.GetColorMasterID(item.ColorMasterId);
                                                    uomMaster = uomManager.GetUomMasterId(item.WastageQtyUOM);
                                                    substanceMaster = substanceManager.GetsubstanceMasterId(item.SubstanceMasterId);
                                                    string Materialname = "";
                                                    string uomName = "";
                                                    string updatedbyname = "";
                                                    uomName = uomMaster != null ? uomMaster.ShortUnitName : "";
                                                    Materialname = MaterialNameMaster != null ? MaterialNameMaster.MaterialDescription : "";
                                                    updatedbyname = item.CreatedBy != null ? item.CreatedBy : item.UpdatedBy != null ? item.UpdatedBy : "";
                                            <tr>
                                                <td style="display:none">@item.BomNo</td>
                                                <td style="display:none">@item.Description</td>
                                                <td style="display:none">@buyerMaster.BuyerFullName</td>
                                                <td style="display:none">@item.BuyerModel</td>
                                                <td style="display:none">@item.MeanSize</td>
                                                <td style="display:none">@item.date</td>
                                                <td style="display:none">@item.ParentBomNo</td>
                                                <td style="display:none">@item.LastBomNoEntered</td>
                                                <td style="display:none">@item.LinkBomNo</td>
                                                <td>@MaterialCategoryMaster.CategoryName</td>
                                                <td>@Materialname</td>
                                                <td>@MaterialGroupMaster_.GroupName</td>
                                                <td>@colorMaster.Color</td>
                                                <td>@substanceMaster.SubstanceRange</td>
                                                <td>@item.SampleNorms</td>
                                                <td>@uomName</td>
                                                <td>@item.TotalNorms</td>
                                                <td style="display:none">@item.ComponentName</td>
                                                <td>@item.Conversion</td>
                                                <td>@item.BuyerNorms</td>
                                                <td style="display:none">@item.NoOfSets</td>
                                                <td style="display:none">@item.UomMasterId</td>
                                                <td style="display:none">@item.SupplierMasterID</td>
                                                <td style="display:none">@item.SizeRangeMasterID</td>
                                                <td>@item.OurNorms</td>
                                                <td>@item.OurNormsPercent</td>
                                                <td>@item.PurchaseNorms</td>
                                                <td>@item.PurchaseNormsPercent</td>
                                                <td>@item.IssueNorms</td>
                                                <td>@item.IssueNormsPercent</td>
                                                <td>@item.CostingNorms</td>
                                                <td>@item.CostingNormsPercent</td>
                                                <td style="display:none">@item.PreparedBy</td>
                                                <td style="display:none">@item.VerifiedBy</td>
                                                <td style="display:none">@item.CheckedBy</td>
                                                <td>@updatedbyname</td>
                                                <td>@item.CreatedDate</td>
                                            </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>


                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Prepared By</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.PreparedBy, new { @class = "form-control text-field ", placeholder = "enter text" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Verified By</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.VerifiedBy, new { @class = "form-control text-field ", placeholder = "enter text" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                <div class="field-section">
                                    <div class="form-group">

                                        <div class="col-md-5 col-sm-5 col-lg-5 col-xs-12">
                                            <label for="text" class="form-label">Checked By</label>
                                        </div>
                                        <div class="col-md-7 col-sm-7 col-lg-7 col-xs-12">
                                            @Html.TextBoxFor(m => m.CheckedBy, new { @class = "form-control text-field ", placeholder = "enter text" })
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="field-section">
                            <div class="form-group">

                                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12">
                                    @{
                                        bool Instruct = false;

                                        foreach (var item in PermissionModel)
                                        {
                                            if (item.PermissionDesc == "Instruct")
                                            {
                                                Instruct = true;
                                            }

                                        }
                                        if (Instruct == true)
                                        {
                                    <button type="submit" class="btn btn-default btn-style">Instruct</button>
                                        }
                                        else
                                        {
                                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Instruct">
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>


        <div class="form-footer">
            <div class="row">
                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 text-center">
                    <button type="submit" class="btn btn-default btn-style">Close</button>
                    @{

                        if (NotifyMsgMSS == true)
                        {
                    <button type="submit" class="btn btn-default btn-style">Notify Msg / MSS</button>
                        }
                        else
                        {
                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Notify Msg / MSS">
                        }
                        if (Excel == true)
                        {
                    <button type="submit" class="btn btn-default btn-style">Excel</button>
                        }
                        else
                        {
                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Excel">
                        }
                        if (SetUp == true)
                        {
                    <button type="submit" class="btn btn-default btn-style">SetUp</button>
                        }
                        else
                        {
                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="SetUp">
                        }
                        if (Preview == true)
                        {
                    <button type="submit" class="btn btn-default btn-style">Preview</button>
                        }
                        else
                        {
                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Preview">
                        }
                        if (Print == true)
                        {
                    <button type="submit" class="btn btn-default btn-style">Print</button>
                        }
                        else
                        {
                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Print">
                        }
                        if (Delete == true)
                        {
                    <button type="submit" class="btn btn-default btn-style">Delete</button>
                        }
                        else
                        {
                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Delete">
                        }
                    <button type="submit" class="btn btn-default btn-style">Clear</button>

                        if (Model.BomId == 0)
                        {
                            if (Save == true)
                            {
                    <input type="button" id="BtnSave" onclick="Save()" class="btn btn-default btn-style" style="cursor: pointer;" title="Save" value="Save">
                            }
                            else
                            {
                    <input type="button" id="BtnSave" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Save">
                            }
                        }
                        else
                        {
                            if (Update == true)
                            {
                    <input type="button" id="BtnSave" onclick="Save()" class="btn btn-default btn-style" style="cursor: pointer;" title="Update" value="Update">
                            }
                            else
                            {
                    <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Update">
                            }
                        }

                    }
                </div>
            </div>
        </div>
    </form>
</div>


<div class="modal fade" id="auto_search" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header sear_head">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Material Name List</h4>
            </div>
            <div class="modal-body sear_body">
                <ul class="mater_listers">
                    @foreach (var item in MMS.Web.ExtensionMethod.HtmlHelper.MaterialMasterName().Where(x => x.Value != ""))
                    {
                    <li id="@item.Value">@item.Text</li>
                    }
                </ul>
            </div>
            <div class="modal-footer">
                <button id="materialOpenId" type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>
<div class="lefterr_icon">
    <div class="direction">  &lt;  </div>
</div>
<style>
    [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: fixed !important;
    }
</style>

<script>
    $(document).ajaxStart(function () {
        $(".loader-overlay").css("display", "block");
    });

    $(document).ajaxComplete(function () {
        $(".loader-overlay").css("display", "none");
    });
    $(window).load(function () {
        $('.loader-overlay').fadeOut('fast');
    });

    function MaterialSearch() {
        var row = "";
        $.ajax({
            type: 'GET',
            url: ' @Url.Action("SearchBOMMaterial", "BillOfMaterial")',
            data: { Materialname: $("#Material_Search").val(), BomNo: $("#BomNo").val(), BOMMaterialID: $('#BOMMaterialID').val() },
            success: function (data) {
                if (data.Material!=null) {
                    $("#list-materials tbody").html("");
                    var row="";
                    var rowCount=0;
                    $.each(data.Material, function (i, city) {
                        if(city.SubstanceRange==null)
                        {
                            city.SubstanceRange="";
                        }
                        row +="<tr id=rowid_" + city.BOMMaterialID + "><td style='display:none' class='BomNo'><span>" + city.BOMMaterialID + "</span><input type='hidden' class='BomId' value='" + data.BOM.BomId + "'></td>"
                        row += "<td style='display:none' class='Description' id='Description'>" + city.Description + "</td>"
                        row += "<td style='display:none' class='BuyerMasterId' id='BuyerMasterId'>" + city.BuyerMasterId + "</td>"
                        row += "<td style='display:none' class='BuyerModel' id='BuyerModel'>" + city.BuyerModel + "</td>"
                        row += "<td style='display:none' class='MeanSize' id='MeanSize'>" + city.MeanSize + "</td>"
                        row += "<td style='display:none' class='Date' id='Date'>" + city.Date + "</td>"
                        row += "<td style='display:none' class='ParentBomNo' id='ParentBomNo'>" + city.ParentBomNo + "</td>"
                        row += "<td style='display:none' class='LinkBomNo' id='LinkBomNo'>" + city.LinkBomNo + "</td>"
                        row += "<td style='display:none' class='CommnBOM1' id='CommnBOM1'>" + city.CommnBOM1 + "</td>"
                        row += "<td style='display:none' class='CommnBOM1' id='CommnBOM1'>" + city.BOMMaterialID + "</td>"
                        row += "<td style='' class='SNO' id='SNO'>" + city.SNO + "</td>"
                        row += " <td title='Delete'  style='cursor:pointer;' class='Delete' id='Delete'><input type='fton' value='Delete' style='cursor:pointer;width:58px;' title='Delete' onclick='Deletebtn(" + city.BOMMaterialID + ")' class='change_status change_status_  Delete input Edit input' /></td>"
                        row += " <td title='Edit'  style='cursor:pointer;' class='Edit' id='Edit'><input type='button' value='Edit' style='cursor:pointer;' title='Edit' onclick='RowClick(" + city.BOMMaterialID + "," + city.BOMID + ")' class='change_status change_status_ Delete input Edit input' /></td>"
                        row += "<td class='MaterialCategoryMasterId' id='MaterialCategoryMasterId'>" + city.CategoryName + "</td>"
                        row += "<td class='MaterialName' id='MaterialName'>" + city.MaterialName + "</td>"
                        row += "<td class='SupplybyID' id='SupplybyID'>" + city.SupplierMasterID + "</td>"

                        row += "<td class='MaterialGroupMasterId' id='MaterialGroupMasterId'>" + city.GroupName + "</td>"
                        row += "<td class='ColorMasterId' id='ColorMasterId'>" + city.Color + "</td>"
                        row += "<td class='SubstanceMasterId' id='SubstanceMasterId'>" + city.SubstanceRange + "</td>"
                        row += "<td class='SampleNorms' id='SampleNorms'>" + city.SampleNorms + "</td>"
                        row += "<td style='display:none' class='Wastage' id='Wastage'>" + city.Wastage + "</td>"
                        row += "<td  style='display:none' class='WastageQty' id='WastageQty'>" + city.WastageQty + "</td>"
                        row += "<td class='WastageQtyUOM' id='WastageQtyUOM'>" + city.WastageQty + "</td>"
                        row += "<td class='TotalNorms' id='TotalNorms'>" + city.TotalNorms + "</td>"
                        row += "<td style='display:none' class='TotalNormsUOM' id='TotalNormsUOM'>" + city.TotalNormsUOM + "</td>"
                        row += "<td style='display:none' class='SizeScheduleMasterId' id='SizeScheduleMasterId'>" + city.SizeScheduleMasterId + "</td>"
                        row += "<td style='display:none' class='ComponentName' id='ComponentName'>" + city.ComponentName + "</td>"
                        row += "<td style='display:none' class='BuyerNorms' id='BuyerNorms'>" + city.BuyerNorms + "</td>"
                        row += "<td style='display:none' class='NoOfSets' id='NoOfSets'>" + city.NoOfSets + "</td>"
                        row += "<td style='display:none' class='UomMasterId' id='UomMasterId'>" + city.UomMasterId + "</td>"
                        row += "<td style='display:none' class='SupplierMasterId' id='SupplierMasterId'>" + city.SupplierMasterID + "</td>"
                        row += "<td style='display:none' class='SizeRangeMasterId' id='SizeRangeMasterId'>" + city.SizeRangeMasterId + "</td>"
                        row += "<td style='display:none' class='OurNorms' id='OurNorms'>" + city.OurNorms + "</td>"
                        row += "<td style='display:none' class='OurNormsPercent' id='OurNormsPercent'>" + city.OurNormsPercent + "</td>"
                        row += "<td style='display:none' class='PurchaseNorms' id='PurchaseNorms'>" + city.PurchaseNorms + "</td>"
                        row += "<td style='display:none' class='PurchaseNormsPercent' id='PurchaseNormsPercent'>" + city.PurchaseNormsPercent + "</td>"
                        row += "<td style='display:none' class='IssueNorms' id='IssueNorms'>" + city.IssueNorms + "</td>"
                        row += "<td style='display:none' class='IssueNormsPercent' id='IssueNormsPercent'>" + city.IssueNormsPercent + "</td>"
                        row += "<td style='display:none' class='CostingNorms' id='CostingNorms'>" + city.CostingNorms + "</td>"
                        row += "<td style='display:none' class='CostingNormsPercent' id='CostingNormsPercent'>" + city.CostingNormsPercent + "</td>"
                        row += "<td style='display:none' class='PreparedBy' id='PreparedBy'>" + city.PreparedBy + "</td>"
                        row += "<td style='display:none' class='VerifiedBy' id='VerifiedBy'>" + city.VerifiedBy + "</td>"
                        row += "<td style='display:none' class='CheckedBy' id='CheckedBy'>" + city.CheckedBy + "</td>"
                        row += "<td style='display:none' class='AddRowFields'>" + $('#AddRowFields').val() + "</td></tr>"
                        $('#BOMMaterialID').val(city.BOMMaterialID);
                        rowCount++;
                    });
                    $('#list-materials tbody').append(row);

                    return false;
                }
                else {

                }
            }
        });
    }

    var hostname="";
    $(function () {
        $("#MaterialName").combobox();
        $("#MaterialGroupMasterId").combobox();
        $("#MaterialCategoryMasterId").combobox();
        $("#ParentBomNo").combobox();

    });
    $(function () {
        $("#ParentBomNo").combobox({
            select: function() {
                $('.loader-overlay').fadeIn('slow');
                if($("#ParentBomNo option:selected").text().trim()==$("#BomNo").val().trim()||$("#BomNo").val().trim()=="")
                {
                    $('.loader-overlay').fadeOut('fast');
                    alert("Please enter correct bom.")
                    $('#BomNo').css('border-color', 'red');
                    $('#BomNo').focus();
                    $("#ParentBomNo").val("")
                    $("#ParentBomNo").combobox('destroy');
                    $("#ParentBomNo").combobox();
                    return false;
                }
                else {
                    $("#HiddenParentBOMID").val($(this).val());
                    $('#BomNo').css('border-color', '');
                    $.ajax({
                        type: 'GET',
                        url: '/BillOfMaterial/ParentBOMMaterialList',
                        data: {
                            BomId: $(this).val(),
                            BomNo:$("#BomNo").val(),
                            Description:$("#Description").val(),
                            BuyerMasterId:$("#BuyerMasterId").val(),
                            BuyerModel:$("#BuyerModel").val(),
                            MeanSize:$("#MeanSize").val(),
                            Date:$("#Date").val(),
                            LastBomNoEntered:$("#LastBomNoEntered").val(),
                            LinkBomNo:$("#LinkBomNo").val(),
                            CommnBOM1:$("#CommnBOM1").val(),
                            CommnBOM2:$("#CommnBOM2").val(),
                            CommnBOM3:$("#CommnBOM3").val(),
                            CommnBOM4:$("#CommnBOM4").val(),
                            CommnBOM5:$("#CommnBOM5").val(),
                            OurNorms:$("#OurNorms").val(),
                            OurNormsPercent:$("#OurNormsPercent").val(),
                            PurchaseNorms:$("#PurchaseNorms").val(),
                            PurchaseNormsPercent:$("#PurchaseNormsPercent").val(),
                            IssueNorms:$("#IssueNorms").val(),
                            IssueNormsPercent:$("#IssueNormsPercent").val(),
                            CostingNorms:$("#CostingNorms").val(),
                            CostingNormsPercent:$("#CostingNormsPercent").val(),

                        },
                        success: function (data) {
                            debugger;
                            if (data.data != null)
                            {
                                $('.loader-overlay').fadeOut('fast');
                                alert("This parent bom is alredy saved")
                            }
                            var sno="";
                            sno=  $('.bommaterialtable tr').find('.SNO').length;
                            sno++;
                            var hiddenSno=$("#SNO").val();
                            if(hiddenSno!=0)
                            {
                                sno=hiddenSno;
                            }
                            $('.loader-overlay').fadeOut('fast');
                            $("#BomNo").val(data.Model.BomNo);
                            $("#Description").val(data.Model.Description);
                            $("#BuyerMasterId").val(data.Model.BuyerMasterId);
                            $("#BuyerMasterId").val(data.Model.BuyerMasterId);
                            $("#BuyerModel").val(data.Model.BuyerModel);
                            $("#MeanSize").val(data.Model.MeanSize);
                            $("#LinkBomNo").val(data.Model.LinkBomNo);
                            $("#BuyerNorms").val(data.Model.BuyerNorms);
                            $("#NoOfSets").val(data.Model.NoOfSets);
                            $("#UomMasterId").val(data.Model.UomMasterId);
                            $("#SupplierMasterId").val(data.Model.SupplierMasterId);
                            $("#SizeScheduleMasterId").val(data.Model.SizeScheduleMasterId);
                            $("#SizeRangeMasterId").val(data.Model.SizeRangeMasterId);
                            var rowCount = 0;
                            $('#list-materials tbody').html("")
                            $.each(data.Material, function (index, item) {
                                item.SNO=item.SNO;
                                if(item.SubtranceRangeName==null)
                                {
                                    item.SubtranceRangeName="";
                                }
                                if(item.SampleNorms==null)
                                {
                                    item.SampleNorms="";
                                }
                                $('#list-materials tbody').append("<tr id=rowid_" + item.BOMMaterialID + "> <td style='display:none' class='BomNo'><span>" + item.BOMMaterialID + "</span><input type='hidden' class='BomId' value='" + item.BomId + "'></td>" +

                                                                                                                        "<td style='display:none' class='Description' id='Description'>" + item.Description + "</td>" +
                                                                                                                        "<td style='display:none' class='BuyerMasterId' id='BuyerMasterId'>" + item.BuyerMasterId + "</td>" +
                                                                                                                        "<td style='display:none' class='BuyerModel' id='BuyerModel'>" + item.BuyerModel + "</td>" +
                                                                                                                        "<td style='display:none' class='MeanSize' id='MeanSize'>" + item.MeanSize + "</td>" +
                                                                                                                        "<td style='display:none' class='Date' id='Date'>" + item.Date + "</td>" +
                                                                                                                        "<td style='display:none' class='ParentBomNo' id='ParentBomNo'>" + item.ParentBomNo + "</td>" +
                                                                                                                        "<td style='display:none' class='LinkBomNo' id='LinkBomNo'>" + item.LinkBomNo + "</td>" +
                                                                                                                        "<td style='display:none' class='CommnBOM1' id='CommnBOM1'>" + item.CommnBOM1 + "</td>" +
                                                                                                                        "<td style='display:none' class='CommnBOM1' id='CommnBOM1'>" + item.BOMMaterialID + "</td>" +
                                                                                                                        "<td style='' class='SNO' id='SNO'>" + item.SNO + "</td>" +
                                                                                                                        " <td title='Delete'  style='cursor:pointer;' class='Delete' id='Delete'><input type='button' value='Delete' style='cursor:pointer;' title='Delete' onclick='Deletebtn(" + item.BOMMaterialID+")' class='change_status change_status_  Delete input Edit input' /></td>" +
                                                                                                                        " <td title='Edit'  style='cursor:pointer;' class='Edit' id='Edit'><input type='button' value='Edit' style='cursor:pointer;' title='Edit' onclick='RowClick(" + item.BOMMaterialID + "," + item.BomId + ")' class='change_status change_status_ Delete input Edit input' /></td>" +
                                                                                                                        "<td class='MaterialCategoryMasterId_' id='MaterialCategoryMasterId_'>" + item.CategoryName + "</td>" +
                                                                                                                        "<td class='MaterialName_' id='MaterialName_'>" + item.MaterialName + "</td>" +
                                                                                                                        //ee
                                                                                                                          "<td class='SupplybyID' id='SupplybyID'>" + item.SupplierMasterID + "</td>"+
                                                                                                                        "<td class='MaterialGroupMasterId_' id='MaterialGroupMasterId_'>" + item.GroupName + "</td>" +
                                                                                                                        "<td class='ColorMasterId_' id='ColorMasterId_'>" + item.ColorName + "</td>" +
                                                                                                                        "<td class='SubstanceMasterId_' id='SubstanceMasterId_'>" + item.SubtranceRangeName + "</td>" +
                                                                                                                        "<td class='SampleNorms' id='SampleNorms'>" + item.SampleNorms + "</td>" +
                                                                                                                        "<td class='WastageQtyUOM' id='WastageQtyUOM'>" + item.WastageqtyUOM + "</td>" +
                                                                                                                        "<td class='TotalNorms' id='TotalNorms'>" + item.TotalNorms + "</td>" +
                                                                                                                        "<td style='display:none' class='ComponentName' id='ComponentName'>" + item.ComponentName + "</td>" +
                                                                                                                        "<td style='display:none' class='BuyerNorms' id='BuyerNorms'>" + item.BuyerNorms + "</td>" +
                                                                                                                        "<td style='display:none' class='NoOfSets' id='NoOfSets'>" + item.NoOfSets + "</td>" +
                                                                                                                        "<td style='display:none' class='UomMasterId' id='UomMasterId'>" + item.UomMasterId + "</td>" +
                                                                                                                        "<td style='display:none' class='SupplierMasterId' id='SupplierMasterId'>" + item.SupplierMasterId + "</td>" +
                                                                                                                        "<td style='display:none' class='SizeRangeMasterId' id='SizeRangeMasterId'>" + item.SizeRangeMasterId + "</td>" +

                                                                                                                        "<td style='display:none' class='OurNorms' id='OurNorms'>" + item.OurNorms + "</td>" +
                                                                                                                        "<td style='display:none' class='OurNormsPercent' id='OurNormsPercent'>" + item.OurNormsPercent + "</td>" +
                                                                                                                        "<td style='display:none' class='PurchaseNorms' id='PurchaseNorms'>" + item.PurchaseNorms + "</td>" +
                                                                                                                        "<td style='display:none' class='PurchaseNormsPercent' id='PurchaseNormsPercent'>" + item.PurchaseNormsPercent + "</td>" +
                                                                                                                        "<td style='display:none' class='IssueNorms' id='IssueNorms'>" + item.IssueNorms + "</td>" +
                                                                                                                        "<td style='display:none' class='IssueNormsPercent' id='IssueNormsPercent'>" + item.IssueNormsPercent + "</td>" +
                                                                                                                        "<td style='display:none' class='CostingNorms' id='CostingNorms'>" + item.CostingNorms + "</td>" +
                                                                                                                         "<td style='display:none' class='Conversion' id='Conversion'>" + item.Conversion + "</td>" +
                                                                                                                         "<td style='display:none'class='MaterialCategoryMasterId' id='MaterialCategoryMasterId'>" + item.MaterialCategoryMasterId + "</td>" +
                                                                                                                        "<td style='display:none' class='MaterialName' id='MaterialName'>" + item.MaterialName + "</td>" +
                                                                                                                        "<td style='display:none' class='MaterialGroupMasterId' id='MaterialGroupMasterId'>" + item.MaterialGroupMasterId + "</td>" +
                                                                                                                        "<td style='display:none' class='ColorMasterId' id='ColorMasterId'>" + item.ColorMasterId + "</td>" +
                                                                                                                        "<td style='display:none' class='SubstanceMasterId' id='SubstanceMasterId'>" + item.SubstanceMasterId + "</td>" +
                                                                                                                        "<td style='display:none' class='CostingNormsPercent' id='CostingNormsPercent'>" + item.CostingNormsPercent + "</td>" +
                                                                                                                        "<td style='display:none' class='PreparedBy' id='PreparedBy'>" + item.PreparedBy + "</td>" +
                                                                                                                        "<td style='display:none' class='WastageQtyUOM' id='WastageQtyUOM'>" + item.WastageQtyUOM + "</td>" +
                                                                                                                        "<td style='display:none' class='VerifiedBy' id='VerifiedBy'>" + item.VerifiedBy + "</td>" +
                                                                                                                        "<td style='display:none' class='CheckedBy' id='CheckedBy'>" + item.CheckedBy + "</td>"
                                                                                                                        + "<td style='display:none' class='AddRowFields'>" + $('#AddRowFields').val() + "</td></tr>");

                                rowCount++;
                                sno++;
                            });


                        }
                    });
                }


            }
        });
    });
    function Cancel() {
        location.href = "../BillOfMaterial/BOMMaterialListGrid";
    }

    function isNumberKey(evt) {

        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode != 46 && charCode > 31
          && (charCode < 48 || charCode > 57))
            return false;

        return true;
    }

    $("#Conversion").blur(function () {
        var Total_buyerNormsPercentage = 0.00;
        var style = $('#Conversion').val();
        if (style != "") {
            var ConvertedNorms = parseFloat(style) * 10.76;
            ConvertedNorms = ConvertedNorms.toFixed(4);
            var ourNormsPercentage = $("#OurNormsPercent").val();
            var buyerNormsPercentage = ((parseFloat(ConvertedNorms) / 100) * parseFloat(ourNormsPercentage));
            $('#BuyerNorms').val(ConvertedNorms);
            if ($('#OurNorms option:selected').text().trim() == "Increase") {
                Total_buyerNormsPercentage = parseFloat(ConvertedNorms) + parseFloat(buyerNormsPercentage);
                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
            }
            else if ($('#OurNorms option:selected').text().trim() == "Decrease") {
                Total_buyerNormsPercentage = parseFloat(ConvertedNorms) - parseFloat(buyerNormsPercentage);
                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
            }
        }
    });
    $("#SampleNorms").blur(function () {
        var Total_buyerNormsPercentage = 0.00;
        var ConvertedNorms = $('#SampleNorms').val();
        if (ConvertedNorms != "") {
            var ourNormsPercentage = $("#OurNormsPercent").val();
            var buyerNormsPercentage = ((parseFloat(ConvertedNorms) / 100) * parseFloat(ourNormsPercentage));
            $('#BuyerNorms').val(buyerNormsPercentage.toFixed(4));
            if ($('#OurNorms option:selected').text().trim() == "Increase") {
                Total_buyerNormsPercentage = parseFloat(ConvertedNorms) + parseFloat(buyerNormsPercentage);
                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
            }
            else if ($('#OurNorms option:selected').text().trim() == "Decrease") {
                Total_buyerNormsPercentage = parseFloat(ConvertedNorms) - parseFloat(buyerNormsPercentage);
                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
            }
        }
    });
    $("#TotalNorms").blur(function () {
        if($("#MaterialCategoryMasterId option:selected").text()=="Leathers")
        {

        }
        else{
            $("#Conversion").val('');
            $("#BuyerNorms").val('');
        }

    });
    $("#BuyerNorms").blur(function () {

        var Total_buyerNormsPercentage = 0.00;
        var ConvertedNorms = $('#BuyerNorms').val();
        if (ConvertedNorms != "") {
            $('#TotalNorms').val('');
            var ourNormsPercentage = $("#OurNormsPercent").val();
            var buyerNormsPercentage = ((parseFloat(ConvertedNorms) / 100) * parseFloat(ourNormsPercentage));
            if ($('#OurNorms option:selected').text().trim() == "Increase") {
                Total_buyerNormsPercentage = parseFloat(ConvertedNorms) + parseFloat(buyerNormsPercentage);
                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
            }
            else if ($('#OurNorms option:selected').text().trim() == "Decrease") {
                Total_buyerNormsPercentage = parseFloat(ConvertedNorms) - parseFloat(buyerNormsPercentage);
                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
            }
        }
    });
    $("#IssueNormsPercent").blur(function () {

        var endurea= "@(System.Configuration.ConfigurationManager.AppSettings["EnduraURL"].ToString())";

        if(hostname==endurea)
        {
            var Total_buyerNormsPercentage =0;
            var norms=  $("#IssueNormsPercent").val();
            var buyernorms=  $("#BuyerNorms").val();
            var buyerNormsPercentage = ((parseFloat(buyernorms) / 100) * parseFloat(norms));
            if ($('#IssueNorms option:selected').text().trim() == "Increase") {
                Total_buyerNormsPercentage = parseFloat(buyernorms) + parseFloat(buyerNormsPercentage);
                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
            }
            else if ($('#IssueNorms option:selected').text().trim() == "Decrease") {
                Total_buyerNormsPercentage = parseFloat(buyernorms) - parseFloat(buyerNormsPercentage);
                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
            }
            else if ($('#IssueNorms option:selected').text().trim() == "Same") {
                $('#TotalNorms').val(parseFloat(buyernorms).toFixed(4));
            }
        }


    });
    $("#BomNo").blur(function () {
        var style = $('#BomNo').val();
        var letterNumber = /^[a-zA-Z-,]+(\s{0,1}[a-zA-Z-, ])*$/;
        if((style.match(letterNumber)))
        {
            $('#Description').val(style);
            $("#LinkBomNo").val("");
            $("#LinkBomNo").prop('disabled', true);
        }
        else{
            $("#LinkBomNo").prop('disabled', false);
            $.ajax({
                type: 'GET',
                url: ' @Url.Action("CheckBomNo", "BillOfMaterial")',
                data: { BomNo: style },
                success: function (data) {
                    if (data.Message == "Already Existed") {
                        $('#Description').val(style);
                        $("#LinkBomNo").val("");
                        $("#add-Material").hide();
                        $("#BtnSave").hide();
                        alert("Already Existed please try another BOM.");
                        return false;
                    }
                    else {
                        if (data.productStyleMaster != null) {
                            $("#LinkBomNo").val(data.productStyleMaster.ProductOrBuyerStyleId);
                        }
                        else {
                            $("#LinkBomNo").val("");
                        }
                        $('#Description').val(style);
                        $("#add-Material").show();
                        $("#BtnSave").show();
                    }

                },
            });
        }
    });
    $(function () {
        $(".SelectAll").click(function(){
            if (this.checked == false) {
                $('.checked_checkbox:checked').attr('checked', false);
            }
            else {
                $('.checked_checkbox:not(:checked)').attr('checked', true);
            }

        });
    });

    $(function () {
        $("#MaterialCategoryMasterId").combobox({
            select: function() {
                var MaterialCategoryMasterId_ = $('#MaterialCategoryMasterId').val();
                $.ajax({
                    url: '/MaterialMaster/FillCateogoryid',
                    type: "GET",
                    dataType: "JSON",
                    data: { MaterialCategoryMasterId: MaterialCategoryMasterId_ },
                    success: function (cities) {
                        $("#MaterialGroupMasterId").html(""); // clear before appending new list
                        $.each(cities, function (i, city) {
                            $("#MaterialGroupMasterId").append(
                                $('<option></option>').val(city.MaterialGroupMasterId).html(city.GroupName));
                        });
                    }
                });
            }
        });
    });

    $(function () {
        $("#MaterialGroupMasterId").combobox({
            select: function() {
                var MaterialGroupMasterId_ = $('#MaterialGroupMasterId').val();
                var groupname=  $('#MaterialGroupMasterId option:selected').text();
                $.ajax({
                    url: '/MaterialMaster/FillMaterialName',
                    type: "GET",
                    dataType: "JSON",
                    data: { MaterialGroupMasterId: MaterialGroupMasterId_ },
                    success: function (cities) {
                        hostname="";
                        hostname="http://"+cities.host;
                        var endurea= "@(System.Configuration.ConfigurationManager.AppSettings["EnduraURL"].ToString())";

                        if (cities.IsSubstance == true) {
                            $("#SubstanceMasterId").prop('disabled', false);
                        }
                        else {
                            $("#SubstanceMasterId").prop('disabled', true);
                            $('#SubstanceMasterId').val("");
                        }
                        if (cities.IsSize == false) {
                            $("#SizeRangeMasterId").prop('disabled', true);
                            $("#SizeScheduleMasterId").prop('disabled', true);
                            $("#SizeRangeMasterId").val("");
                            $("#SizeScheduleMasterId").val("");
                        }
                        else {
                            $("#SizeRangeMasterId").prop('disabled', false);
                            $("#SizeScheduleMasterId").prop('disabled', false);
                        }
                        if (cities.normDetails != null && cities.normDetails.BuyerNameid == parseInt($('#BuyerMasterId').val())) {
                            $('#TotalNorms').val("");
                            $("#OurNormsPercent").prop("disabled", true);
                            $("#CostingNormsPercent").prop("disabled", true);
                            $("#PurchaseNormsPercent").prop("disabled", true);
                            $("#IssueNormsPercent").prop("disabled", true);

                            $("#OurNorms").val(cities.normDetails.OurNorms);
                            $("#OurNormsPercent").val(cities.normDetails.NormsPercentage);

                            $("#PurchaseNorms").val(cities.normDetails.PurchaseNormsid);
                            $("#PurchaseNormsPercent").val(cities.normDetails.NormsPercentage1);

                            $("#IssueNorms").val(cities.normDetails.IssueNormsid);
                            $("#IssueNormsPercent").val(cities.normDetails.NormsPercentage2);

                            $("#CostingNorms").val(cities.normDetails.CostingNorms);
                            $("#CostingNormsPercent").val(cities.normDetails.NormsPercentage3);
                            if (cities.normDetails.BuyerOption == 1) {
                                $("#Conversion").prop("disabled", false);


                                $("#BuyerNorms").prop("disabled", false);
                                $("#TotalNorms").prop("disabled", true);
                                $("#SampleNorms").prop("disabled", true);
                                var ourNormsPercentage = $("#OurNormsPercent").val();
                                var BuyerNorms = $('#BuyerNorms').val();
                                var buyerNormsPercentage = ((parseFloat(ConvertedNorms) / 100) * parseFloat(ourNormsPercentage));
                                if ($('#OurNorms option:selected').text().trim() == "Increase") {
                                    Total_buyerNormsPercentage = parseFloat(ConvertedNorms) + parseFloat(buyerNormsPercentage);
                                    $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
                                }
                                else if ($('#OurNorms option:selected').text().trim() == "Decrease") {
                                    Total_buyerNormsPercentage = parseFloat(ConvertedNorms) - parseFloat(buyerNormsPercentage);
                                    $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
                                }
                                $('#TotalNorms').val("");
                            }
                            else if (cities.normDetails.BuyerOption == 2) {
                                $('#TotalNorms').val("");
                                $("#SampleNorms").prop("disabled", false);
                                var ourNormsPercentage = $("#OurNormsPercent").val();
                                var ConvertedNorms = $('#SampleNorms').val();
                                if (ConvertedNorms != "") {
                                    var buyerNormsPercentage = ((parseFloat(ConvertedNorms) / 100) * parseFloat(ourNormsPercentage));
                                    $("#BuyerNorms").val(buyerNormsPercentage.toFixed(4));
                                    if ($('#OurNorms option:selected').text().trim() == "Increase") {
                                        Total_buyerNormsPercentage = parseFloat(ConvertedNorms) + parseFloat(buyerNormsPercentage);
                                        $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
                                    }
                                    else if ($('#OurNorms option:selected').text().trim() == "Decrease") {
                                        Total_buyerNormsPercentage = parseFloat(ConvertedNorms) - parseFloat(buyerNormsPercentage);
                                        $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
                                    }
                                }
                                $("#TotalNorms").prop("disabled", true);
                                if(hostname!=null &&hostname==endurea &&groupname=="Upper Leather")
                                {
                                    $("#BuyerNorms").prop("disabled", false);
                                }
                                else
                                {
                                    $("#BuyerNorms").prop("disabled", true);
                                }

                            }
                            else if (cities.normDetails.BuyerOption == 3) {

                                $("#BuyerNorms").val("");
                                $("#Conversion").prop("disabled", true);
                                $("#SampleNorms").prop("disabled", true);
                                if(hostname!=null &&hostname==endurea &&groupname=="Upper Leather")
                                {

                                    $("#BuyerNorms").prop("disabled", false);
                                }
                                else
                                {
                                    $("#BuyerNorms").prop("disabled", true);
                                }
                                $("#TotalNorms").prop("disabled", false);
                            }
                        }
                        else if (cities.normDetails != null && cities.normDetails.BuyerNameid != parseInt($('#BuyerMasterId').val())) {

                            $("#BuyerNorms").val("");
                            $("#SampleNorms").val("");
                            $("#Conversion").prop("disabled", true);
                            $("#SampleNorms").prop("disabled", true);
                            $("#TotalNorms").prop("disabled", false);
                            if(hostname!=null && hostname==endurea && groupname=="Upper Leather")
                            {
                                $("#BuyerNorms").prop("disabled", false);
                            }
                            else
                            {
                                $("#BuyerNorms").prop("disabled", true);
                            }

                        }
                        else if (cities.normDetails == null) {

                            $("#BuyerNorms").val("");
                            $("#SampleNorms").val("");
                            $("#Conversion").prop("disabled", true);
                            $("#SampleNorms").prop("disabled", true);
                            $("#TotalNorms").prop("disabled", false);
                            if(hostname!=null&&hostname==endurea && groupname=="Upper Leather")
                            {
                                $("#BuyerNorms").prop("disabled", false);
                            }
                            else
                            {
                                $("#BuyerNorms").prop("disabled", true);
                            }
                        }
                        if(hostname!=null &&hostname==endurea && groupname=="Upper Leather")
                        {
                            $("#BuyerNorms").prop("disabled", false);
                        }
                        else
                        {
                            $("#BuyerNorms").prop("disabled", true);
                        }
                        $("#MaterialName").html(""); // clear before appending new list
                        $.each(cities.Material, function (i, city) {
                            $("#MaterialName").append(
                                $('<option></option>').val(city.Value).html(city.Text));
                        });
                    }
                });
            }
        });
    });
    $(function () {
        $("#MaterialName").combobox({
         
            select: function() {
                debugger;
                var MaterialGroupMasterId_ = $('#BuyerMasterId').val();
                if(MaterialGroupMasterId_==""||MaterialGroupMasterId_==0)
                {
                    $('#MaterialName').val("");
                    $("#MaterialName").combobox('destroy');
                    $("#MaterialName").combobox();
                    alert("Please select buyername");
                    return false;
                }
                var materialId = $('#MaterialName').val();
                $.ajax({
                    url: '/MaterialMaster/FillMaterialNameBasedonColor',
                    type: "GET",
                    dataType: "JSON",
                    data: { MaterialNameID: materialId,buyername:$("#BuyerMasterId").val() },
                    success: function (cities) {
                        if(cities.norms!=null)
                        {

                            $("#OurNorms").val(cities.norms.OurNorms);
                            $("#OurNormsPercent").val(cities.norms.NormsPercentage);
                            $("#PurchaseNorms").val(cities.norms.PurchaseNormsid);
                            $("#PurchaseNormsPercent").val(cities.norms.NormsPercentage1);
                            $("#IssueNorms").val(cities.norms.IssueNormsid);
                            $("#IssueNormsPercent").val(cities.norms.NormsPercentage2);
                            $("#CostingNorms").val(cities.norms.CostingNorms);
                            $("#CostingNormsPercent").val(cities.norms.NormsPercentage3);
                        }
                        $.each(cities.distinctList, function (i, city) {

                            if($('#SubstanceMasterId').prop('disabled')==false)
                            {
                                $('#SubstanceMasterId').val(city.SubstanceMasterId);
                            }
                            else{
                                $('#SubstanceMasterId').prop('disabled',true);
                            }
                            $('#MaterialCategoryMasterId').val(city.MaterialCategoryMasterId);
                            $("#MaterialCategoryMasterId").combobox('destroy');
                            $("#MaterialCategoryMasterId").combobox();
                            $('#MaterialGroupMasterId').val(city.MaterialGroupMasterId);
                            $("#MaterialGroupMasterId").combobox('destroy');
                            $("#MaterialGroupMasterId").combobox();
                            document.getElementById("ColorMasterId").disabled = true;
                            if (city.SizeRangeMasterId != null && city.SizeRangeMasterId != 0 && $('#SizeRangeMasterId').prop('disabled') == false) {
                                $('#SizeRangeMasterId').val(city.SizeRangeMasterId);
                            }
                            else if (city.SizeRangeMasterId==null||city.SizeRangeMasterId==0) {
                                $("#SizeRangeMasterId").prop('disabled', true);
                                $("#SizeScheduleMasterId").prop('disabled', true);
                                $("#SizeRangeMasterId").val("");
                                $("#SizeScheduleMasterId").val("");
                            }
                            else {
                                $("#SizeRangeMasterId").prop('disabled', false);
                                $("#SizeScheduleMasterId").prop('disabled', false);
                            }
                            $('#ColorMasterId').val(city.ColorMasterId);
                            $('#WastageQtyUOM').val(city.Uom);
                        });
                        if(cities.materialCategoryMaster!=null && cities.materialCategoryMaster.CategoryName=="Leathers")
                        {
                            $("#Conversion").prop("disabled", false);
                            $("#BuyerNorms").prop("disabled", false);
                            $("#TotalNorms").prop("disabled", false);
                            $("#SampleNorms").prop("disabled", true);
                            $("#SizeRangeMasterId").prop('disabled', true);
                            $("#SizeScheduleMasterId").prop('disabled', true);
                            $("#SizeRangeMasterId").val("");
                            $("#SizeScheduleMasterId").val("");
                            $('#SubstanceMasterId').prop('disabled', true);
                            $('#SubstanceMasterId').val(city.SubstanceMasterId);
                        }
                        else{
                            $("#Conversion").prop("disabled", true);
                            $("#BuyerNorms").prop("disabled", false);
                            $("#TotalNorms").prop("disabled", false);
                            $("#SampleNorms").prop("disabled", true);
                            $("#SizeRangeMasterId").prop('disabled', false);
                            $("#SizeScheduleMasterId").prop('disabled', false);
                            $('#SubstanceMasterId').prop('disabled', true);
                        }
                    }
                });
            }
        });
    });

    function Deletebtn(arg)
    {

        var id = $('.change_status').attr("id");

        if (confirm("Are you sure you want to delete this material?")) {
            $.ajax({
                url: '/BillOfMaterial/BOMMaterialDelete',
                type: "GET",
                dataType: "JSON",
                data: { BOMMaterialID: arg },
                success: function (data) {
                    if (data.status.trim() == "Success") {
                        location.href = 'BillOfMaterialDetails?BOMID=' + data.BOMID;
                        alert("Deleted Successfully.");
                        return false;
                    }
                    else {
                        alert("Deleted failed.")
                        return false;
                    }
                }
            });
        }
        else {
            return false;
        }

    }
    $(document).on('click', '#add-Material', function () {
        var sno="";
        sno=  $('.bommaterialtable tr').find('.SNO').length;
        sno++;
        var hiddenSno=$("#SNO").val();
        if(hiddenSno!=0)
        {
            sno=hiddenSno;
        }
        var style = $('#BomNo').val();
        var letterNumber = /^[a-zA-Z-,]+(\s{0,1}[a-zA-Z-, ])*$/;
        if((style.match(letterNumber)))
        {
            $('#Description').val(style);
            $("#LinkBomNo").val("");
            $("#LinkBomNo").prop('disabled', true);
        }
        else{
            $("#LinkBomNo").prop('disabled', false);
        }
        validation();
        if (validation() != false) {
            $('#BtnSave').hide();           
            if (confirm("Are you sure you want to add material new this?")) {
                $('#BOMMaterialID').val("");
            }           
            var conversion_= $("#Conversion").val();
            $("#Conversion").val("");
            var rowCount = $('#list-materials tr').length;
            var systemUserValue = '';
            var Sno = '';
            var compnt = '';
            var _length = '';
            var width = '';
            var nos = '';
            var samplenms = '';
            var wstg = '';
            var wstqty = '';
            var wsttotalNorms = '';
            $('#Addrowfields tbody tr').each(function () {
                Sno = '';
                compnt = '';
                _length = '';
                width = '';
                nos = '';
                samplenms = '';
                wstg = '';
                wstqty = '';
                wsttotalNorms = '';
                $(this).find("td").each(function () {
                    Sno = $('#Sno').val();
                    if (Sno != undefined && Sno.trim().length > 0) {
                        systemUserValue += Sno + ',';
                    }
                    compnt = $(this).find('#Component').val();
                    if (compnt != undefined && compnt.trim().length > 0) {
                        systemUserValue += compnt + ',';
                    }
                    _length = $(this).find('#length').val();
                    if (_length != undefined && _length.trim().length > 0) {
                        systemUserValue += _length + ',';
                    }
                    width = $(this).find('#width').val();
                    if (width != undefined && width.trim().length > 0) {
                        systemUserValue += width + ',';

                    }
                    nos = $(this).find('#Nos').val();
                    if (nos != undefined && nos.trim().length > 0) {
                        systemUserValue += nos + ',';
                    }

                    samplenms = $(this).find('#SampleNorms').val();
                    if (samplenms != undefined && samplenms.trim().length > 0) {
                        systemUserValue += samplenms + ',';
                    }
                    wstg = $(this).find('#WastagePercent').val();
                    if (wstg != undefined && wstg.trim().length > 0) {
                        systemUserValue += wstg + ',';
                    }
                    wstqty = $(this).find('#WastageQty').val();
                    if (wstqty != undefined && wstqty.trim().length > 0) {
                        systemUserValue += wstqty + ',';
                    }
                    wsttotalNorms = $(this).find('#TotalNormsQty').val();
                    if (wsttotalNorms != undefined && wsttotalNorms.trim().length > 0) {
                        systemUserValue += wsttotalNorms;
                    }

                });
                systemUserValue += '#';

            });
            var form = systemUserValue;
            $('#AddRowFields').val(form);
            $('#BOMMaterialID').val($('#BOMMaterialID').val())
            var CommnBOM = "";
            if ($('#CommnBOM1').val() != "") {
                CommnBOM = $('#CommnBOM1').val();
            }
            if ($('#CommnBOM2').val() != "") {
                CommnBOM += "," + $('#CommnBOM2').val();
            }
            if ($('#CommnBOM3').val() != "") {
                CommnBOM += "," + $('#CommnBOM3').val();
            }
            if ($('#CommnBOM4').val() != "") {
                CommnBOM += "," + $('#CommnBOM4').val(); S
            }
            if ($('#CommnBOM5').val() != "") {
                CommnBOM += "," + $('#CommnBOM5').val();
            }
            $('#BOMMaterialID').val()
            //Display size range get implementation
            var CheckBoxIschecked_ = "";
            $('#sizeRangeTable tbody tr').find('.checked_checkbox').each(function () {
                CheckBoxIschecked_ += $(this).is(':checked') + ",";
            });
            CheckBoxIschecked_ = CheckBoxIschecked_.slice(0, -1);
            var CheckBoxsize_ = "";
            $('#sizeRangeTable tbody tr').find('.SizeRangeRefValue').each(function () {
                CheckBoxsize_ += $(this).text().trim() + ",";
            });
            $("#OurNorms").prop('disabled', false);
            $("#OurNormsPercent").prop('disabled', false);
            $("#PurchaseNorms").prop('disabled', false);
            $("#PurchaseNormsPercent").prop('disabled', false);
            $("#IssueNorms").prop('disabled', false);
            $("#IssueNormsPercent").prop('disabled', false);
            $("#CostingNorms").prop('disabled', false);
            $("#CostingNormsPercent").prop('disabled', false);
            $("#BuyerNorms").prop('disabled', false);
            $("#Conversion").prop('disabled', false);
            CheckBoxsize_ = CheckBoxsize_.slice(0, -1);
            var rowCount = $('#list-materials tr').length - 1;
            if (rowCount == 0) {
                if (validation()!= false) {                 
                    $('.loader-overlay').show();
                    $('.loader-overlay').fadeIn('slow');
                    var forms_ = $(".form-inline").serialize() + '&BOMMaterialID=' + $('#BOMMaterialID').val()+'&CheckBoxsize='+CheckBoxsize_+'&CheckBoxIschecked='+CheckBoxIschecked_+ '&ParentBomNo=' + $('#ParentBomNo').val()+'&SizeScheduleMasterId='+ $("#SizeScheduleMasterId").val()+'&SNO='+ sno+'&Date_='+ $("#Date").val();
                    if ($("#list-materials tbody tr").length == 0) {
                        $.ajax({
                            type: 'POST',
                            url: '/BillOfMaterial/BillOfMaterialDetails',
                            data: {
                                Grid: form,
                                forms: forms_,
                                BOMMaterialID_: $('#BOMMaterialID').val(),
                                BomId: $('#BomId').val(),
                                BomNo: $('#BomNo').val(),
                                Description: $('#Description').val(),
                                BuyerMasterId: $('#BuyerMasterId').val(),
                                BuyerModel: $("#BuyerModel").val(),
                                MeanSize: $("#MeanSize").val(),
                                Date: $("#Date").val(),
                                ParentBomNo: $("#ParentBomNo").val(),
                                LastBomNoEntered: $("#LastBomNoEntered").val(),
                                LinkBomNo: $("#LinkBomNo").val(),
                                Ammendment: $("#Ammendment").val(),
                                CommnBOM1: $('#CommnBOM1').val(),
                                CommnBOM2: $('#CommnBOM2').val(),
                                CommnBOM3: $('#CommnBOM3').val(),
                                CommnBOM4: $('#CommnBOM4').val(),
                                CommnBOM5: $('#CommnBOM5').val(),
                                PreparedBy: $("#PreparedBy").val(),
                                VerifiedBy: $("#VerifiedBy").val(),
                                CheckedBy: $("#CheckedBy").val(),
                                MaterialName: $("#MaterialName").val(),
                                MaterialCategoryMasterId: $("#MaterialCategoryMasterId").val(),
                                MaterialGroupMasterId: $("#MaterialGroupMasterId").val(),
                                ColorMasterId: $("#ColorMasterId").val(),
                                SubstanceMasterId: $("#SubstanceMasterId").val(),
                                SizeScheduleMasterId: $("#SizeScheduleMasterId").val(),
                                SampleNorms: $("#SampleNorms").val(),
                                Wastage: $("#Wastage").val(),
                                SupplierMasterId: $("#SupplierMasterId").val(),
                                UomMasterId: $("#UomMasterId").val(),
                                SizeRangeMasterId: $("#SizeRangeMasterId").val(),
                                WastageQty: $("#WastageQty").val(),
                                WastageQtyUOM: $("#WastageQtyUOM").val(),
                                TotalNorms: $("#TotalNorms").val(),
                                TotalNormsUOM: $("#TotalNormsUOM").val(),
                                ComponentName: $("#ComponentName").val(),
                                NoOfSets: $("#NoOfSets").val(),
                                BuyerNorms: $("#BuyerNorms").val(),
                                OurNorms: $("#OurNorms").val(),
                                OurNormsPercent: $("#OurNormsPercent").val(),
                                PurchaseNorms: $("#PurchaseNorms").val(),
                                PurchaseNormsPercent: $("#PurchaseNormsPercent").val(),
                                IssueNorms: $("#IssueNorms").val(),
                                IssueNormsPercent: $("#IssueNormsPercent").val(),
                                CostingNorms: $("#CostingNorms").val(),
                                Conversion: conversion_,
                                SNO:sno,
                                CostingNormsPercent: $("#CostingNormsPercent").val(),
                                BomGridlst: '@Model.BomGridlst',
                                CheckBoxsize:CheckBoxsize_,
                                CheckBoxIschecked:CheckBoxIschecked_,
                                HiddenParentBOMID: $("#HiddenParentBOMID").val()
                            },
                            success: function (data) {
                                debugger;
                                $("#BuyerNorms").prop('disabled', true);
                                $("#Conversion").prop('disabled', true);
                                $("#OurNorms").prop('disabled', true);
                                $("#OurNormsPercent").prop('disabled', true);
                                $("#PurchaseNorms").prop('disabled', true);
                                $("#PurchaseNormsPercent").prop('disabled', true);
                                $("#IssueNorms").prop('disabled', true);
                                $("#IssueNormsPercent").prop('disabled', true);
                                $("#CostingNorms").prop('disabled', true);
                                $("#CostingNormsPercent").prop('disabled', true);
                                $('.loader-overlay').fadeOut('fast');
                                $('.loader-overlay').hide();
                                if (data.AlertMessage == "Already Existed") {
                                    alert("Already  Existed this BOM.");
                                    return false;
                                }
                                else if (data.AlertMessage == "Saved Successfully") {
                                    alert("Saved Successfully.");
                                    window.location.href = "BillOfMaterialDetails?BOMID=" + data.BOM.BomId;
                                    return false;
                                }
                                else if (data.AlertMessage == "Updated Successfully") {
                                    window.location.href = "BillOfMaterialDetails?BOMID=" + data.BOM.BomId;
                                    alert("Updated Successfully.");
                                    return false;
                                }
                            }
                        });

                    }
                }
            }
            else {

                var forms_ = $(".form-inline").serialize() + '&BOMMaterialID=' + $('#BOMMaterialID').val() + '&CheckBoxsize='+CheckBoxsize_ +'&CheckBoxIschecked='+CheckBoxIschecked_+ '&ParentBomNo=' + $('#ParentBomNo').val()+'&SizeScheduleMasterId='+ $("#SizeScheduleMasterId").val();
                $('.loader-overlay').show();
                $('.loader-overlay').fadeIn('fast');
                $("#OurNorms").prop('disabled', false);
                $("#OurNormsPercent").prop('disabled', false);
                $("#PurchaseNorms").prop('disabled', false);
                $("#PurchaseNormsPercent").prop('disabled', false);
                $("#IssueNorms").prop('disabled', false);
                $("#IssueNormsPercent").prop('disabled', false);
                $("#CostingNorms").prop('disabled', false);
                $("#CostingNormsPercent").prop('disabled', false);
                $.ajax({
                    type: 'POST',
                    url: '/BillOfMaterial/BillOfMaterialDetails',
                    data: {
                        Grid: form,
                        forms: forms_,
                        BOMMaterialID_: $('#BOMMaterialID').val(),
                        BomId: $('#BomId').val(),
                        BomNo: $('#BomNo').val(),
                        Description: $('#Description').val(),
                        BuyerMasterId: $('#BuyerMasterId').val(),
                        BuyerModel: $("#BuyerModel").val(),
                        MeanSize: $("#MeanSize").val(),
                        Date: $("#Date").val(),
                        ParentBomNo: $("#ParentBomNo").val(),
                        LastBomNoEntered: $("#LastBomNoEntered").val(),
                        LinkBomNo: $("#LinkBomNo").val(),
                        Ammendment: $("#Ammendment").val(),
                        CommnBOM1: $('#CommnBOM1').val(),
                        CommnBOM2: $('#CommnBOM2').val(),
                        CommnBOM3: $('#CommnBOM3').val(),
                        CommnBOM4: $('#CommnBOM4').val(),
                        CommnBOM5: $('#CommnBOM5').val(),
                        PreparedBy: $("#PreparedBy").val(),
                        VerifiedBy: $("#VerifiedBy").val(),
                        CheckedBy: $("#CheckedBy").val(),
                        MaterialName: $("#MaterialName").val(),
                        MaterialCategoryMasterId: $("#MaterialCategoryMasterId").val(),
                        MaterialGroupMasterId: $("#MaterialGroupMasterId").val(),
                        ColorMasterId: $("#ColorMasterId").val(),
                        SubstanceMasterId: $("#SubstanceMasterId").val(),
                        SizeScheduleMasterId: $("#SizeScheduleMasterId").val(),
                        SampleNorms: $("#SampleNorms").val(),
                        Wastage: $("#Wastage").val(),
                        SupplierMasterId: $("#SupplierMasterId").val(),
                        UomMasterId: $("#UomMasterId").val(),
                        SizeRangeMasterId: $("#SizeRangeMasterId").val(),
                        WastageQty: $("#WastageQty").val(),
                        WastageQtyUOM: $("#WastageQtyUOM").val(),
                        TotalNorms: $("#TotalNorms").val(),
                        TotalNormsUOM: $("#TotalNormsUOM").val(),
                        ComponentName: $("#ComponentName").val(),
                        NoOfSets: $("#NoOfSets").val(),
                        BuyerNorms: $("#BuyerNorms").val(),
                        OurNorms: $("#OurNorms").val(),
                        OurNormsPercent: $("#OurNormsPercent").val(),
                        PurchaseNorms: $("#PurchaseNorms").val(),
                        PurchaseNormsPercent: $("#PurchaseNormsPercent").val(),
                        IssueNorms: $("#IssueNorms").val(),
                        IssueNormsPercent: $("#IssueNormsPercent").val(),
                        CostingNorms: $("#CostingNorms").val(),
                        Conversion: conversion_,
                        SNO:sno,
                        CostingNormsPercent: $("#CostingNormsPercent").val(),
                        BomGridlst: '@Model.BomGridlst',
                        CheckBoxsize:CheckBoxsize_,
                        CheckBoxIschecked:CheckBoxIschecked_,
                        HiddenParentBOMID: $("#HiddenParentBOMID").val()

                    },
                    success: function (data) {
                        $("#OurNorms").prop('disabled', true);
                        $("#OurNormsPercent").prop('disabled', true);
                        $("#PurchaseNorms").prop('disabled', true);
                        $("#PurchaseNormsPercent").prop('disabled', true);
                        $("#IssueNorms").prop('disabled', true);
                        $("#IssueNormsPercent").prop('disabled', true);
                        $("#CostingNorms").prop('disabled', true);
                        $("#CostingNormsPercent").prop('disabled', true);
                        $('.loader-overlay').fadeOut('fast');
                        $('.loader-overlay').hide();
                        if (data.AlertMessage == "Already Existed") {
                            alert("Already  Existed this BOM.");
                            return false;
                        }
                        else if (data.AlertMessage == "Saved Successfully") {
                            alert("Saved Successfully.");
                            window.location.href = "BillOfMaterialDetails?BOMID=" + data.BOM.BomId;
                            return false;
                          
                        }
                        else if (data.AlertMessage == "Updated Successfully") {
                            alert("Updated Successfully.");
                            window.location.href = "BillOfMaterialDetails?BOMID=" + data.BOM.BomId;
                            return false;
                       
                        }
                        if (data == "Material Existed") {
                            alert("Already  Existed this Material");
                            return false;
                        }
                    }
                });
            }

        }
    });
    function HideShowEditDelete()
    {

        if ('@Update' == 'False' || '@Edit' == 'False') {
            $('#list-materials tbody tr').each(function () {
                $(this).find(".Edit").addClass('not-allowed').removeAttr('onclick');
            });
        }
        else {
            $('#list-materials  tbody tr').each(function () {

            });
        }
        if ('@Delete' == 'False') {
            $('#list-materials  tbody tr').each(function () {
                $(this).find(".Delete").addClass('not-allowed').removeAttr('onclick');
            });
        }
        else {
            $('#list-materials  tbody tr').each(function () {

            });
        }
    }
    function BomSave() {
        var rowCount = $('#list-materials tr').length - 1;
        if (rowCount == 0) {

            if (validation()) {


                var forms_ = $(".form-inline").serialize();

                if ($("#list-materials tbody tr").length == 0) {

                    console.log(forms_);
                    console.log(form);
                    $.ajax({
                        type: 'POST',
                        url: '/BillOfMaterial/BillOfMaterialDetails',
                        data: { forms: forms_, Grid: $('.AddRowFields').text(), BomGridlst: '@Model.BomGridlst' },
                        success: function (data) {
                            if (data == true) {
                                if ($("#BtnSave").val() == "Save") {
                                    alert('Saved Successfully.');
                                }
                                else {
                                    alert('Updated Successfully.');
                                }
                                location.href = "/BillOfMaterial/BOMMaterialListGrid";
                                return false;
                            }
                            else {
                                alert('Save process Failed.');
                                location.href = "/BillOfMaterial/BOMMaterialListGrid";
                                return false;
                            }
                        }
                    });

                }
            }
        }
        else {

            var wholeJsonList = [];
            $('#list-materials tbody tr').each(function () {
                $(this).addClass("curChangeableRow"),
               $(this).siblings().removeClass("curChangeableRow"),
              $('.curChangeableRow').hide(),
    wholeJsonList.push(
        {

            forms: forms_,
            Grid: $('.AddRowFields').text(),
            BomGridlst: '@Model.BomGridlst',
            BomNo: $(this).find('span').html(),
            Description: $(this).find('.Description').html(),
            BuyerMasterId: $(this).find('.BuyerMasterId').html(),
            BuyerModel: $(this).find('.BuyerModel').html(),
            MeanSize: $(this).find('.MeanSize').html(),
            Date: $(this).find('.Date').html(),
            ParentBomNo: $(this).find('.ParentBomNo').html(),
            LinkBomNo: $(this).find('.LinkBomNo').html(),
            CommnBOM1: $(this).find('.CommnBOM1').html(),
            MaterialCategoryMasterId: $(this).find('.MaterialCategoryMasterId').html(),
            MaterialName: $(this).find('.MaterialName').html(),
            MaterialGroupMasterId: $(this).find('.MaterialGroupMasterId').html(),
            ColorMasterId: $(this).find('.ColorMasterId').html(),
            SubstanceMasterId: $(this).find('.SubstanceMasterId').html(),
            SampleNorms: $(this).find('.SampleNorms').html(),
            Wastage: $(this).find('.Wastage').html(),
            WastageQty: $(this).find('.WastageQty').html(),
            WastageQtyUOM: $(this).find('.WastageQtyUOM').html(),
            TotalNorms: $(this).find('.TotalNorms').html(),
            TotalNormsUOM: $(this).find('.TotalNormsUOM').html(),
            ComponentName: $(this).find('.ComponentName').html(),
            BuyerNorms: $(this).find('.BuyerNorms').html(),
            NoOfSets: $(this).find('.NoOfSets').html(),
            UomMasterId: $(this).find('.UomMasterId').html(),
            SupplierMasterId: $(this).find('.SupplierMasterId').html(),
            SizeRangeMasterId: $(this).find('.SizeRangeMasterId').html(),
            SizeScheduleMasterId: $(this).find('.SizeScheduleMasterId').html(),
            Conversion: $(this).find('.Conversion').html(),
            OurNorms: $(this).find('.OurNorms').html(),
            OurNormsPercent: $(this).find('.OurNormsPercent').html(),
            PurchaseNorms: $(this).find('.PurchaseNorms').html(),
            PurchaseNormsPercent: $(this).find('.PurchaseNormsPercent').html(),
            IssueNorms: $(this).find('.IssueNorms').html(),
            IssueNormsPercent: $(this).find('.IssueNormsPercent').html(),
            CostingNorms: $(this).find('.CostingNorms').html(),
            CostingNormsPercent: $(this).find('.CostingNormsPercent').html(),
            PreparedBy: $(this).find('.PreparedBy').html(),
            VerifiedBy: $(this).find('.VerifiedBy').html(),
            CheckedBy: $(this).find('.CheckedBy').html(),
        });
            });

            var wholeJsonListLength = wholeJsonList.length;
            var i = 0;
            for (i = 0; i <= wholeJsonListLength - 1; i++) {
                $.ajax({
                    type: 'POST',
                    url: '/BillOfMaterial/BillOfMaterialDetails',
                    data: wholeJsonList[i],
                    success: function (data) {
                        $('#BomId').val(data.BomId);
                        console.log(data.BomId);
                        return false;

                    }
                });
            }
        }
    }

</script>
<script>
    function RowClick(arg, arg1) {
        debugger;
        var Removerow = "rowid_" + arg;
        $('#'+Removerow+'').remove();
        $('#add-Material').show();
        $('.material_BOM').show();
        $('#Removerow')
        $('#Addrowfields tbody tr').remove();
        $(this).addClass("curChangeableRow"),
        $(this).siblings().removeClass("curChangeableRow"),
        $('.curChangeableRow').hide(),
        $.ajax({
            type: 'POST',
            url: '/BillOfMaterial/GetBOMMaterilsList',
            data: { BOMMaterialID: arg, BOMID: arg1,BuyerMasterId:$("#BuyerMasterId").val() },
            success: function (data) {
                debugger;
                if (data.BOM.BOMID != 0) {
                    $('#BOMMaterialID').val(data.Material.BOMMaterialID);
                    $("#SNO").val(data.Material.SNO);
                    $('#BOMMaterialID').val(arg);
                    $('#BomNo').val(data.BOM.BomNo);
                    $('#Description').val(data.BOM.Description);
                    $('#BuyerMasterId').val(data.BOM.BuyerMasterId);
                    $('#BuyerModel').val(data.BOM.BuyerModel);
                    $('#MeanSize').val(data.BOM.MeanSize);
                    $('#Conversion').val(data.Material.Conversion);
                    $('#ParentBomNo').val(data.BOM.ParentBomNo);
                    $('#LastBomNoEntered').val(data.BOM.LastBomNoEntered);
                    $('#LinkBomNo').val(data.BOM.LinkBomNo);
                    $('#Ammendment').val(data.BOM.Ammendment);
                    $('#CommonBomNo').val(data.BOM.CommonBomNo);
                    $('#CommnBOM1').val(data.BOM.CommnBOM1);
                    $('#CommnBOM2').val(data.BOM.CommnBOM2);
                    $('#CommnBOM3').val(data.BOM.CommnBOM3);
                    $('#CommnBOM4').val(data.BOM.CommnBOM4);
                    $('#CommnBOM5').val(data.BOM.CommnBOM5);
                    $('#PreparedBy').val(data.BOM.PreparedBy);
                    $('#VerifiedBy').val(data.BOM.VerifiedBy);
                    $('#CheckedBy').val(data.BOM.CheckedBy);
                    $('#ComponentName').val(data.BOM.ComponentName);
                    $('#BuyerNorms').val(data.BOM.BuyerNorms);
                    $('#NoOfSets').val(data.BOM.NoOfSets);
                    $('#UomMasterId').val(data.BOM.UomMasterId);
                    $('#SupplierMasterId').val(data.Material.SupplierMasterID);
                    $('#SizeRangeMasterId').val(data.BOM.SizeRangeMasterId);
                    $('#SizeScheduleMasterId').val(data.Material.SizeScheduleMasterId);
                    if(data.Norms!=null)
                    {
                        $("#OurNorms").val(data.Norms.OurNorms);
                        $("#OurNormsPercent").val(data.Norms.NormsPercentage);
                        $("#PurchaseNorms").val(data.Norms.PurchaseNormsid);
                        $("#PurchaseNormsPercent").val(data.Norms.NormsPercentage1);
                        $("#IssueNorms").val(data.Norms.IssueNormsid);
                        $("#IssueNormsPercent").val(data.Norms.NormsPercentage2);
                        $("#CostingNorms").val(data.Norms.CostingNorms);
                        $("#CostingNormsPercent").val(data.Norms.NormsPercentage3);
                    }
                        //later changes sow from bommaterial to populate below columns
                    else{
                        $('#OurNorms').val(data.Material.OurNorms);
                        $('#OurNormsPercent').val(data.Material.OurNormsPercent);
                        $('#PurchaseNorms').val(data.Material.PurchaseNorms);
                        $('#PurchaseNormsPercent').val(data.Material.PurchaseNormsPercent);
                        $('#IssueNorms').val(data.Material.IssueNorms);
                        $('#IssueNormsPercent').val(data.Material.IssueNormsPercent);
                        $('#CostingNorms').val(data.Material.CostingNorms);
                        $('#CostingNormsPercent').val(data.Material.CostingNormsPercent);
                    }

                    $('#MaterialCategoryMasterId').val(data.Material.MaterialCategoryMasterId);
                    $("#MaterialCategoryMasterId").combobox('destroy') ;
                    $("#MaterialCategoryMasterId").combobox() ;
                    $('#MaterialGroupMasterId').val(data.Material.MaterialGroupMasterId);
                    $("#MaterialGroupMasterId").combobox('destroy');
                    $("#MaterialGroupMasterId").combobox();
                    $('#SubstanceMasterId').val(data.Material.SubstanceMasterId);
                    $('#MaterialName').val(data.Material.MaterialName);
                    $("#MaterialName").combobox('destroy');
                    $("#MaterialName").combobox();
                    $('#ColorMasterId').val(data.Material.ColorMasterId);
                    $('#SampleNorms').val(data.Material.SampleNorms);
                    $('#Wastage').val(data.Material.Wastage);
                    $('#WastageQty').val(data.Material.WastageQty);
                    $('#WastageQtyUOM').val(data.Material.WastageQtyUOM);
                    $('#TotalNorms').val(data.Material.TotalNorms);
                    $('#BuyerNorms').val(data.Material.BuyerNorms);
                    $('#TotalNormsUOM').val(data.Material.TotalNormsUOM);
                    if (data.MaterialGroup.IsSubstance == true) {
                        $("#SubstanceMasterId").prop('disabled', false);
                    }
                    else {
                        $("#SubstanceMasterId").prop('disabled', true);
                    }
                    if (data.MaterialGroup.IsSize == false) {
                        $("#SizeRangeMasterId").prop('disabled', true);
                        $("#SizeScheduleMasterId").prop('disabled', true);
                        $("#SizeRangeMasterId").val("");
                        $("#SizeScheduleMasterId").val("");
                    }
                    else {
                        $("#SizeRangeMasterId").prop('disabled', false);
                        $("#SizeScheduleMasterId").prop('disabled', false);
                    }
                    if (data.Norms != null && data.Norms.BuyerNameid == parseInt($('#BuyerMasterId').val())) {

                        $("#OurNormsPercent").prop("disabled", false);
                        $("#CostingNormsPercent").prop("disabled", false);
                        $("#PurchaseNormsPercent").prop("disabled", false);
                        $("#IssueNormsPercent").prop("disabled", false);
                        if (data.materialCategoryMaster.CategoryName=="Leathers") {
                            $("#Conversion").prop("disabled", false);
                            $("#BuyerNorms").prop("disabled", false);
                            $("#TotalNorms").prop("disabled", false);
                            $("#SampleNorms").prop("disabled", true);
                            var ourNormsPercentage = $("#OurNormsPercent").val();
                            var BuyerNorms = $('#BuyerNorms').val();
                            var buyerNormsPercentage = ((parseFloat(BuyerNorms) / 100) * parseFloat(ourNormsPercentage));

                            if ($('#OurNorms option:selected').text().trim() == "Increase") {

                                Total_buyerNormsPercentage = parseFloat(BuyerNorms) + parseFloat(buyerNormsPercentage);
                                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
                            }
                            else if ($('#OurNorms option:selected').text().trim() == "Decrease") {
                                Total_buyerNormsPercentage = parseFloat(BuyerNorms) - parseFloat(buyerNormsPercentage);
                                $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
                            }

                        }
                        else if (data.materialCategoryMaster.CategoryName!="Leathers") {

                            $("#SampleNorms").prop("disabled", false);
                            var ourNormsPercentage = $("#OurNormsPercent").val();
                            var ConvertedNorms = $('#SampleNorms').val();
                            if (ConvertedNorms != "") {
                                var buyerNormsPercentage = ((parseFloat(ConvertedNorms) / 100) * parseFloat(ourNormsPercentage));
                                $("#BuyerNorms").val(buyerNormsPercentage.toFixed(4));
                                if ($('#OurNorms option:selected').text().trim() == "Increase") {
                                    Total_buyerNormsPercentage = parseFloat(ConvertedNorms) + parseFloat(buyerNormsPercentage);
                                    $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
                                }
                                else if ($('#OurNorms option:selected').text().trim() == "Decrease") {
                                    Total_buyerNormsPercentage = parseFloat(ConvertedNorms) - parseFloat(buyerNormsPercentage);
                                    $('#TotalNorms').val(Total_buyerNormsPercentage.toFixed(4));
                                }
                            }
                            $("#Conversion").prop("disabled", true);
                            $("#BuyerNorms").prop("disabled", false);
                            $("#TotalNorms").prop("disabled", false);
                            $("#SampleNorms").prop("disabled", true);
                        }
                        else {

                            $("#BuyerNorms").val("");
                            $("#Conversion").prop("disabled", true);
                            $("#SampleNorms").prop("disabled", true);
                            $("#BuyerNorms").prop("disabled", true);
                            $("#TotalNorms").prop("disabled", false);
                        }
                    }
                    else if (data.Norms!= null && data.Norms.BuyerNameid != parseInt($('#BuyerMasterId').val())) {

                        $("#BuyerNorms").val(data.Material.BuyerNorms);
                        $("#SampleNorms").val("");
                        $("#Conversion").prop("disabled", true);
                        $("#SampleNorms").prop("disabled", true);
                        $("#TotalNorms").prop("disabled", false);
                        $("#BuyerNorms").prop("disabled", true);
                    }
                    else if (data.Norms == null) {
                        $("#SampleNorms").val("");
                        $("#Conversion").prop("disabled", true);
                        $("#SampleNorms").prop("disabled", true);
                        $("#TotalNorms").prop("disabled", false);
                        $("#BuyerNorms").prop("disabled", false);
                    }
                    var count = 1;
                    if (data.MaterialGroup.IsSize == true) {
                        $('#Displaycheck').prop('checked',true);
                        for (var i = 0; i <= data.DisplaySize.length-1; i++) {

                            $('#sizeRangeTable tbody tr:first-child').append('<td  style="background-color: #ddd;padding-bottom: 3px;width: auto !important;padding:0 0px;" class="SizeRangeRefValue"> ' + data.DisplaySize[i].SizeRange + ' </td> ');
                            if(data.DisplaySize[i].SizeIsChecked==true)
                            {
                                $('#sizeRangeTable tbody tr:last').append("<td><input type='checkbox' checked='checked' name='size_chk' id='size_chk"+i+"' class='checked_checkbox'  style=''></input> <label for='size_chk"+i+"' style='' class='lbl-ch'></label></td>");
                            }
                            else{
                                $('#sizeRangeTable tbody tr:last').append("<td><input type='checkbox' name='size_chk' id='size_chk"+i+"' class='checked_checkbox'  style=''></input> <label for='size_chk"+i+"' style='' class='lbl-ch'></label></td>");
                            }
                            count++;
                        }
                    }
                    else{
                        $('#Displaycheck').prop('checked',false);
                        $('#sizeRangeTable tbody tr').each(function(){
                            $(this).find("td:not(:first)").remove();
                        });
                    }
                    $.each(data.Grid, function (i, item) {
                        $("#Addrowfields tbody").append("<tr class='Append'><td id='Sno' class='Sno' value=''>" + item.Sno + "</td>"
                        + "<td class='width-141'><input type='text' id='Component' class='Component' value=" + item.Component + "></td>"
                        + "<td class='width-91'><input type='text' id='length' class='length' value=" + item.Length + " onkeypress=' return isNumberKey(event)' /></td>"
                        + "<td class='width-91'><input type='text' id='width' class='width' value=" + item.Width + " onkeypress='return isNumberKey(event)' /></td>"
                        + "<td class='width-91'><input type='text' id='Nos' class='Nos' value=" + item.Nos + " onkeypress='return isNumberKey(event)' /></td>"
                        + "<td class='width-91'><input type='text' id='SampleNorms' class='SampleNorms' value=" + item.SampleNorms + " onkeypress='return isNumberKey(event)' /></td>"
                        + "<td class='width-91'><input type='text' id='WastagePercent' class='WastagePercent' value=" + item.WastagePercent + " onkeypress='return isNumberKey(event)' /></td>"
                        + "<td class='width-91'><input type='text' id='WastageQty' class='WastageQty' value=" + item.WastageQtyGrid + " onkeypress='return isNumberKey(event)' /></td>"
                        + "<td class='width-91'><input type='text' id='TotalNormsQty' class='TotalNormsQty' value=" + item.TotalNormsQty + " onkeypress='return isNumberKey(event)' /></td>"
                        + "<td><input type='button' value='Remove' class='removeSchedule btn btn-default btn-style' /></td></tr>");
                    });

                }
            }

        });

    }

</script>
