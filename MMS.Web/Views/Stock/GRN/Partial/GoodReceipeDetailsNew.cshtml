@model MMS.Web.Models.StockModel.GRN_Details_ModelNew
@using MMS.Repository.Managers.StockManager
@using MMS.Core.Entities
@{

    PermissionSettingMaster PermissionSettingModel = new MMS.Core.Entities.PermissionSettingMaster();
    PermissionSettingModel = MMS.Web.ExtensionMethod.HtmlHelper.GetPermissionIdList();
    List<PermissionMaster> PermissionModel = new List<PermissionMaster>();
    if (PermissionSettingModel != null)
    {
        PermissionModel = MMS.Web.ExtensionMethod.HtmlHelper.GetPermissionList("GoodReceipeNote", PermissionSettingModel.PermissionID);
    }

    int storeid = 0;
    int grd = 0;
    Model.ShortagePCS = Model.ShortagePCS != null ? Model.ShortagePCS : 0;
    if (Model != null && Model.storeMaster != null && (Model.storeMaster.StoreName != "Leather Store" || Model.storeMaster.StoreName != "Leather Store-Local" || Model.storeMaster.StoreName != "Leather Stores-Import"))
    {
        storeid = 1;
    }
    if (Model != null && Model.materialMaster != null && Model.materialMaster.GradeMasterId == 0)
    {
        grd = 1;
    }
    int count = 1;

}
<style>
    #sizeRangeTable tbody tr td:first-child {
        width: 123px !important;
    }
    /*Table Scroller*/
    .scroller {
        max-width: 100% !important;
        overflow: scroll !important;
    }

        .scroller .table {
            max-width: 130%;
            width: 130%;
        }

    .table thead th {
        white-space: nowrap;
    }
</style>

<script>
    $(function () {

        $("#PoDate").datepicker({ dateFormat: "dd/mm/yy", maxDate: new Date() });
        $("#GEDate").datepicker({ dateFormat: "dd/mm/yy", maxDate: new Date() });
        $("#GrnDate").datepicker({ dateFormat: "dd/mm/yy", maxDate: new Date() });
        $("#INVoiceDate").datepicker({ dateFormat: "dd/mm/yy", maxDate: new Date() });
        $("#DCDate").datepicker({ dateFormat: "dd/mm/yy", maxDate: new Date() });
        $("#BEDate").datepicker({ dateFormat: "dd/mm/yy", maxDate: new Date() });
    });

</script>
<link type="text/css" href="~/Datepicker/css/ui-lightness/jquery-ui-1.8.19.custom.css" rel="stylesheet" />
<script src="~/jquery-ui-timepicker-0.3.3/jquery.ui.timepicker.js"></script>
<link href="~/jquery-ui-timepicker-0.3.3/jquery.ui.timepicker.css" rel="stylesheet" />
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tab section</title>

</head>
<body>
    <div class="container">
        <ul class="nav nav-tabs data_tab">
            <li class="active"><a data-toggle="tab" href="#section1">material details</a></li>
            <li><a data-toggle="tab" href="#section2">Quantity</a></li>
            <li><a data-toggle="tab" href="#section3">Tax information</a></li>
        </ul>
        <div class="tab-content">
            <div id="section1" class="tab-pane fade in active">
                <div class="form_info_cnt">
                    <div class="table-responsive">
                        <table class="table" id="">
                            <thead>
                                <tr>
                                    <th>Gate Entry No</th>
                                    <th>GE Date/Time</th>
                                    <th>GRN Type</th>
                                    <th>GRN No</th>
                                    <th>GRN Date</th>
                                    <th>Customer</th>
                                    <th>Season</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>@Html.HiddenFor(x => x.isSizeRamge)</td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.TextBoxFor(x => x.GateEntryNo, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })
                                    </td>
                                    <td>
                                        <div>
                                            @if (Model != null && Model.GrnID != 0)
                                            {
                                                var purdate = Model.GEDate;
                                                @Html.TextBoxFor(m => m.GEDate, new { @Value = purdate, @class = "form-control text-field datepick" })
                                            }
                                            else
                                            {
                                                @Html.TextBoxFor(m => m.GEDate, new { @Value = System.DateTime.Now.Date.ToString("dd/MM/yyyy"), @class = "form-control text-field datepick" })
                                            }
                                            @*@Html.TextBoxFor(x => x.GETime, new { @class = "form-control text-field timepicker" })*@
                                        </div>
                                    </td>
                                    <td>
                                        @Html.DropDownListFor(m => m.GrnType, MMS.Web.ExtensionMethod.HtmlHelper.GetGRNType(), new { @class = "select-style text-field " })
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(x => x.GrnNo, new { @class = "form-control", @onkeypress = "return isNumberKey(event)", @readonly = true })
                                    </td>
                                    <td>
                                        @if (Model != null && Model.GrnID != 0)
                                        {
                                            var purdate = Model.GrnDate;
                                            @Html.TextBoxFor(m => m.GrnDate, new { @Value = purdate, @class = "form-control text-field datepick" })
                                        }
                                        else
                                        {
                                            @Html.TextBoxFor(m => m.GrnDate, new { @Value = System.DateTime.Now.Date.ToString("dd/MM/yyyy"), @class = "form-control text-field date_Grn" })
                                        }
                                    </td>
                                    <td>
                                        @Html.DropDownListFor(x => x.BuyerMasterId, MMS.Web.ExtensionMethod.HtmlHelper.BuyerName(), new { @class = "select-style text-field " })
                                    </td>
                                    <td>
                                        @Html.DropDownListFor(x => x.BuyerSeasonID, MMS.Web.ExtensionMethod.HtmlHelper.SeasonName(), new { @class = "select-style text-field " })
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>GRN Material Type</th>
                                    <th id="Pono_">Po.No</th>
                                    <th id="AutomaticPono_">Po.No</th>
                                    <th>Po/Date</th>
                                    <th>DC No</th>
                                    <th>DC Date</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        @Html.DropDownListFor(m => m.MaterialType, new SelectList(
                                       new List<object> {
                                            new { value=0, text="Please select" },
                                           new { value=1, text="Local" },
                                           new { value=2, text="Customer Import"},
                                            new { value=3, text="Direct Import"}
                                       },
                                       "value",
                                       "text", 0), new { @class = "select-style text-field" })
                                    </td>
                                    <td id="PoNumber">
                                        @Html.DropDownListFor(m => m.PoNO, MMS.Web.ExtensionMethod.HtmlHelper.GetPONO(), new { @class = "select-style text-field" })
                                    </td>
                                    <td id="AutomaticPonumber">
                                        @Html.TextBoxFor(x => x.AutomaticPONumber, new { @class = "form-control text-field", @style = "display:none;" })
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(m => m.PoDate, new { @class = "form-control text-field", @readonly = true })
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(x => x.DC_No, new { @class = "form-control" })
                                    </td>
                                    <td>
                                        @if (Model != null && Model.GrnID != 0)
                                        {
                                            var purdate = Model.DCDate;
                                            @Html.TextBoxFor(m => m.DCDate, new { @Value = purdate, @class = "form-control text-field datepick" })
                                        }
                                        else
                                        {
                                            @Html.TextBoxFor(m => m.DCDate, new { @Value = System.DateTime.Now.Date.ToString("dd/MM/yyyy"), @class = "form-control text-field datepick" })
                                        }
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(x => x.INVoiceNo, new { @class = "form-control text-field" })
                                    </td>
                                    <td>
                                        @if (Model != null && Model.GrnID != 0)
                                        {
                                            var purdate = Model.INVoiceDate;
                                            @Html.TextBoxFor(m => m.INVoiceDate, new { @Value = purdate, @class = "form-control text-field datepick" })
                                        }
                                        else
                                        {
                                            @Html.TextBoxFor(m => m.INVoiceDate, new { @Value = System.DateTime.Now.Date.ToString("dd/MM/yyyy"), @class = "form-control text-field datepick" })
                                        }
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Bill of Entry No</th>
                                    <th>Bill of Entry Date</th>
                                    <th>Mode of Transport</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>@Html.TextBoxFor(x => x.BENo, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(m => m.BEDate, new { @class = "form-control text-field datepick" })</td>
                                    <td>@Html.DropDownListFor(m => m.ModeofTransport, MMS.Web.ExtensionMethod.HtmlHelper.ModeofTransportGEDoc(), new { @class = "select-style text-field" })</td>

                                </tr>
                            </tbody>
                        </table>
                        <div class="scroller">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Supplier</th>
                                        <th>Barcode/Mat Code</th>
                                        <th>Name of Material</th>
                                        <th>Colour</th>
                                        <th>Machinery Name</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            @Html.DropDownListFor(m => m.SupplierNameId, MMS.Web.ExtensionMethod.HtmlHelper.SupplierName(), new { @class = "select-style text-field" })
                                        </td>
                                        <td style="width:150px;">
                                            @Html.HiddenFor(x => x.WithoutIndent)
                                            @Html.TextBoxFor(x => x.BarCodeNo, new { @class = "form-control" })
                                        </td>
                                        <td class="select_drop" style="width:450px;">
                                            @Html.HiddenFor(m => m.MaterialName)
                                            @Html.DropDownListFor(m => m.MaterialId, MMS.Web.ExtensionMethod.HtmlHelper.MaterialMasterName(), new { @class = "select-style text-field" })
                                        </td>
                                        <td>
                                            @Html.DropDownListFor(m => m.ColourId, MMS.Web.ExtensionMethod.HtmlHelper.ColourName(), new { @class = "select-style text-field" })
                                        </td>
                                        <td>
                                            @Html.DropDownListFor(m => m.MachineryName, MMS.Web.ExtensionMethod.HtmlHelper.MachineName(), new { @class = "select-style text-field", disabled = "disabled" })
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Stores</th>
                                    <th>Category</th>
                                    <th>Material Group</th>
                                    <th>Substance</th>
                                    <th>Grade</th>
                                    <th>Weight</th>
                                    <th>Store Location</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>@Html.DropDownListFor(m => m.Stores, MMS.Web.ExtensionMethod.HtmlHelper.Store(), new { @class = "select-style text-field" })</td>
                                    <td>@Html.DropDownListFor(m => m.CategoryId, MMS.Web.ExtensionMethod.HtmlHelper.MaterialCategoryName(), new { @class = "select-style text-field" })</td>
                                    <td>@Html.DropDownListFor(m => m.GroupID, MMS.Web.ExtensionMethod.HtmlHelper.MaterialGroupName(), new { @class = "select-style text-field" })</td>
                                    <td>@Html.DropDownListFor(m => m.Substance, MMS.Web.ExtensionMethod.HtmlHelper.SubstanceRange(), new { @class = "select-style text-field" })</td>
                                    <td>@Html.DropDownListFor(m => m.Grade, MMS.Web.ExtensionMethod.HtmlHelper.GetLeatherShoeGrade(), new { @class = "select-style text-field" })</td>
                                    <td>@Html.TextBoxFor(x => x.Weight, new { @class = "form-control" })</td>
                                    <td>@Html.DropDownListFor(m => m.StoreLocation, MMS.Web.ExtensionMethod.HtmlHelper.StoreLocation(), new { @class = "select-style text-field" })</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div id="section2" class="tab-pane fade">
                <div class="form_info_cnt">
                    <div class="table-responsive">
                        <table class="table" id="">
                            <thead>
                                <tr>
                                    <th>DC/INV Qty</th>
                                    <th>Received Qty</th>
                                    <th>Shortage Qty</th>
                                    <th>Rejected Qty</th>
                                    <th>Accepted Qty</th>
                                    <th>UoM</th>
                                    <th>Accepted Pcs</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>@Html.TextBoxFor(x => x.QtyAsPerDc, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.ReceivedQty, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.ShortageQty, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.RejectedQty, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.AcceptedQty, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.DropDownListFor(m => m.UOMId, MMS.Web.ExtensionMethod.HtmlHelper.Uom(), new { @class = "select-style text-field" })</td>
                                    <td>@Html.TextBoxFor(x => x.AcceptedPCS, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Po.Qty</th>
                                    <th>Po Reced Qty</th>
                                    <th>Po Pending Qty</th>
                                    <th>Po Excess Qty</th>
                                    <th>Po Excess Approved</th>
                                    <th>Supplier Lot No</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>@Html.TextBoxFor(x => x.PoQty, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.PoReceivedQty, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.PendingQty, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.QtyExcess, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.ExcessApproval, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.LOTNo, new { @class = "form-control" })</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="table-responsive">
                        @Html.HiddenFor(x => x.SizeRangeDetails)
                        <table class="table" id="sizeRangeTable" style="width: 263px;">
                            <tbody>
                                @if (Model.grnSizeRangeQuantityList == null || Model.grnSizeRangeQuantityList.Count == 0)
                                {
                                    <tr>
                                        <td style="background-color: #ddd; padding-bottom: 3px;  padding-left: 0;  padding-top: 1px;  float: left;">Size</td>
                                    </tr>
                                    <tr>
                                        <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;   float: left;" class="">QTY as Per DC</td>
                                    </tr>
                                    <tr>
                                        <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px; float: left;" class="">Received QTY</td>
                                    </tr>
                                    <tr>
                                        <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;   float: left;" class="">Shortage QTY</td>
                                    </tr>
                                    <tr>
                                        <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;   float: left;" class="">Rejected QTY</td>
                                    </tr>
                                    <tr>
                                        <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;   float: left;" class="">Accepted QTY</td>
                                    </tr>
                                }
                                @if (Model.grnSizeRangeQuantityList != null && Model.grnSizeRangeQuantityList.Count > 0)
                                {
                                    decimal total_ = 0;
                                    <tr>

                                        @if (Model.grnSizeRangeQuantityList != null)
                                        {

                                            total_ = Model.grnSizeRangeQuantityList.Sum(x => Convert.ToDecimal(x.quantity));
                                            <td style="background-color: #ddd; padding-bottom: 3px;  padding-left: 0;  padding-top: 1px;  width: 39px !important; float: left;">Size</td>
                                            foreach (var item in Model.grnSizeRangeQuantityList)
                                            {
                                                <td class="sizeVal">@item.Size</td>
                                                count++;
                                            }
                                        }
                                    </tr>

                                    <tr>

                                        @if (Model.grnSizeRangeQuantityList != null)
                                        {
                                            <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;  width: 39px !important; float: left;">Rate</td>
                                            foreach (var item in Model.grnSizeRangeQuantityList)
                                            {
                                                <td><input type="text" class="QtyAsPerDc_" id="qtyId@(count)" value="@item.Rate" style='width:50px;' onchange="CalculateTotal(this)" /></td>
                                                count++;
                                            }
                                        }
                                    </tr>
                                    <tr>

                                        @if (Model.grnSizeRangeQuantityList != null)
                                        {
                                            <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;  width: 39px !important; float: left;">Rate</td>
                                            foreach (var item in Model.grnSizeRangeQuantityList)
                                            {
                                                <td><input type="text" class="ReceivedQty_" id="qtyId@(count)" value="@item.Rate" style='width:50px;' onchange="CalculateTotal(this)" /></td>
                                                count++;
                                            }
                                        }
                                    </tr>
                                    <tr>

                                        @if (Model.grnSizeRangeQuantityList != null)
                                        {
                                            <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;  width: 39px !important; float: left;">Rate</td>
                                            foreach (var item in Model.grnSizeRangeQuantityList)
                                            {
                                                <td><input type="text" class="ShortageQty_" id="qtyId@(count)" value="@item.Rate" style='width:50px;' onchange="CalculateTotal(this)" /></td>
                                                count++;
                                            }
                                        }
                                    </tr>
                                    <tr>

                                        @if (Model.grnSizeRangeQuantityList != null)
                                        {
                                            <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;  width: 39px !important; float: left;">Rate</td>
                                            foreach (var item in Model.grnSizeRangeQuantityList)
                                            {
                                                <td><input type="text" class="RejectedQty_" id="qtyId@(count)" value="@item.Rate" style='width:50px;' onchange="CalculateTotal(this)" /></td>
                                                count++;
                                            }
                                        }
                                    </tr>
                                    <tr>

                                        @if (Model.grnSizeRangeQuantityList != null)
                                        {
                                            <td style="background-color: #ddd; padding-bottom: 3px;padding-left: 0;  padding-top: 1px;  width: 39px !important; float: left;">Rate</td>
                                            foreach (var item in Model.grnSizeRangeQuantityList)
                                            {
                                                <td><input type="text" class="AcceptedQty_" id="qtyId@(count)" value="@item.Rate" style='width:50px;' onchange="CalculateTotal(this)" /></td>
                                                count++;
                                            }
                                        }
                                    </tr>
                                }
                                @{
                                    decimal total = 0;
                                    if (Model.grnSizeRangeQuantityList != null && Model.grnSizeRangeQuantityList.Count > 0)
                                    {
                                        total = Model.grnSizeRangeQuantityList.Sum(x => Convert.ToDecimal(x.quantity));
                                        foreach (var item in Model.grnSizeRangeQuantityList)
                                        {
                                            <tr>
                                                <td>@item.Size</td>
                                                <td><input type="text" class="qty_Total" value="@item.quantity" style="width: 50px;" onchange='Calculate()' /></td>
                                                <td><input type="text" value="@item.Rate" style="width: 50px;" /></td>
                                            </tr>
                                        }
                                    }
                                }

                            </tbody>
                            <tfoot class="footer-bg-gray">

                                <tr>
                                    <td>Total</td>
                                    <td id="TotalCount">@total </td>
                                    <td></td>
                                </tr>

                            </tfoot>
                        </table>

                    </div>


                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Material Rate</th>
                                    <th>Value / currency (A)</th>
                                    <th>Exchange Rate</th>
                                    <th>Value in Rupees</th>
                                    <th>MRP Margin %</th>
                                    <th>MRP Price</th>
                                    <th>Accesible Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>@Html.TextBoxFor(x => x.Rate, new { @class = "form-control", @readonly = true })</td>
                                    <td class="value_acc">
                                        @Html.TextBoxFor(x => x.Currencykey, new { @class = "form-control", @readonly = "true" })
                                        @Html.TextBoxFor(x => x.Value, new { @class = "form-control" })
                                    </td>
                                    <td>@Html.TextBoxFor(x => x.ExchangeRate, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.ValueInRps, new { @class = "ValueInRps form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.MRPMargin, new { @class = "form-control text-field allow_decimal" })</td>
                                    <td>@Html.TextBoxFor(x => x.MRPPrice, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.AccessibleValue, new { @class = "form-control AccessibleValue" })</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div id="section3" class="tab-pane fade">
                <div class="form_info_cnt">
                    <div class="table-responsive">
                        <div class="value_to_rup">
                            <label>DC/INV Value</label>
                            @Html.TextBoxFor(x => x.ValueInRps, new { @class = "ValueInRps form-control" })
                        </div>
                        <table class="table" id="">
                            <thead>
                                <tr>
                                    <th>&nbsp;</th>
                                    <th>Percentage (%)</th>
                                    <th>Tax Value</th>
                                    <th>&nbsp;</th>
                                    <th>Amount</th>
                                    <th>Percentage (%)</th>
                                    <th>Amount + Tax Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>GST: </td>
                                    <td>@Html.TextBoxFor(x => x.GST, new { @class = "form-control " })</td>
                                    <td>@Html.TextBoxFor(x => x.GSTValue, new { @class = "form-control" })</td>
                                    <td>Freight Amount</td>
                                    <td>@Html.TextBoxFor(x => x.FreightAmount, new { @class = "form-control text-field", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.FreightAmtPercent, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.FreightTaxAmt, new { @class = "form-control" })</td>
                                </tr>
                                <tr>
                                    <td>SGST :</td>
                                    <td>@Html.TextBoxFor(x => x.SGST, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.SGSTValue, new { @class = "form-control TaxInfo" })</td>
                                    <td>Insurance Amt</td>
                                    <td>@Html.TextBoxFor(x => x.InsuranceAmount, new { @class = "form-control text-field", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.InsuranceAmtPercent, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.InsuranceTaxAmt, new { @class = "form-control" })</td>
                                </tr>
                                <tr>
                                    <td>CGST :</td>
                                    <td>@Html.TextBoxFor(x => x.CGST, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.CGSTValue, new { @class = "form-control TaxInfo" })</td>
                                    <td>Custom's Duty</td>
                                    <td>@Html.TextBoxFor(x => x.CustomsDuty, new { @class = "form-control text-field" })</td>
                                    <td>@Html.TextBoxFor(x => x.CustomDutyPercent, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.CustomDutyTax, new { @class = "form-control" })</td>
                                </tr>
                                <tr>
                                    <td>IGST  :</td>
                                    <td>@Html.TextBoxFor(x => x.IGST, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.IGSTValue, new { @class = "form-control TaxInfo" })</td>
                                    <td>Clearing Charges</td>
                                    <td>@Html.TextBoxFor(x => x.OtherCharges, new { @class = "form-control text-field", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.ClearingChargePercent, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.ClearingChargeTax, new { @class = "form-control" })</td>
                                </tr>
                                <tr>
                                    <td>Import IGST</td>
                                    <td>@Html.TextBoxFor(x => x.ImportIGST, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.ImportIGSTValue, new { @class = "form-control TaxInfo" })</td>
                                    <td>Pack & forward</td>
                                    <td>@Html.TextBoxFor(x => x.Pack_Forward, new { @class = "form-control text-field" })</td>
                                    <td>@Html.TextBoxFor(x => x.PackforwardPercent, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.PackforwardTax, new { @class = "form-control" })</td>
                                </tr>
                                <tr>
                                    <td>Surcharges</td>
                                    <td>@Html.TextBoxFor(x => x.Surcharges, new { @class = "form-control" })</td>
                                    <td>@Html.TextBoxFor(x => x.SurchargesValue, new { @class = "form-control" })</td>
                                    <td>Service Charges</td>
                                    <td>@Html.TextBoxFor(x => x.ServiceTaxPer, new { @class = "form-control text-field", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.ServiceTax, new { @class = "form-control text-field", @onkeypress = "return isNumberKey(event)" })</td>
                                    <td>@Html.TextBoxFor(x => x.ServiceChargeTax, new { @class = "form-control" })</td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table" id="Valueb">
                            <thead>
                                <tr>
                                    <th>&nbsp;</th>
                                    <th class="total_tit_pp">Total : (B)</th>
                                    <th colspan="0">@Html.TextBoxFor(x => x.AmountplusTax, new { @class = "form-control total_input" })</th>
                                    <th>&nbsp;</th>
                                    <th>&nbsp;</th>
                                    <th>Total : (C)</th>
                                    <th>@Html.TextBoxFor(x => x.TotalAmount, new { @class = "form-control total_input margin-align" })</th>

                                </tr>
                                <tr>
                                    <th colspan="5">&nbsp;</th>
                                    <th>Net Total:</th>
                                    <th>@Html.TextBoxFor(x => x.NetTotal, new { @class = "form-control total_input margin-align" })</th>
                                </tr>

                            </thead>
                            <tbody>
                                <tr class="blank_row">
                                    <td bgcolor="#FFFFFF" colspan="7">&nbsp;</td>
                                </tr>
                                <tr>
                                    <td>Discount %</td>
                                    <td>@Html.TextBoxFor(x => x.Discount_Per, new { @class = "form-control text-field allow_decimal" })</td>
                                    <td>@Html.TextBoxFor(x => x.Discount_Val, new { @class = "form-control text-field" })</td>
                                    <td>Tag Pieces/Other Am. .</td>
                                    <td>@Html.TextBoxFor(x => x.TagsPiecesDiscount, new { @class = "form-control" })</td>
                                    <td>Landing Cost</td>
                                    <td>@Html.TextBoxFor(x => x.TotalCost, new { @class = "form-control" })</td>
                                </tr>
                                <tr>
                                    <td>TCS</td>
                                    <td>@Html.TextBoxFor(x => x.TCS, new { @class = "form-control text-field " })</td>
                                    <td>@Html.TextBoxFor(x => x.TCSValue, new { @class = "form-control text-field" })</td>
                                </tr>
                                <tr class="blank_row">
                                    <td bgcolor="#FFFFFF" colspan="7">&nbsp;</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>

                <div class="form-footer">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 text-center" id="DisplayGridViewEdit">
                            <input type="button" class="btn btn-default btn-sec btn-style" onclick="Cancel()" style="cursor: pointer;" title="Back" value="Back">

                            @{
                                bool Save = false; bool Update = false;

                                foreach (var item in PermissionModel)
                                {
                                    if (item.PermissionDesc == "Update")
                                    {
                                        Update = true;
                                    }
                                    if (item.PermissionDesc == "Save")
                                    {
                                        Save = true;
                                    }
                                }
                                if (Model.GrnID == 0)
                                {

                                    if (Save == true)
                                    {
                                        <button style="cursor:pointer" title="ADD" class="AutoDisplay" type="button">Add/Save</button>
                                    }
                                    else
                                    {
                                        <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Add/Save">
                                    }
                                }
                                else
                                {
                                    if (Update == true)
                                    {
                                        @Html.HiddenFor(x => x.GrnID)
                                        <input type="button" id="BtnUpdate" class="btn btn-default btn-style AutoDisplay" value="Update" />
                                    }
                                    else
                                    {
                                        <input type="button" onclick="alert('No Permission To access !')" style="cursor: pointer;" class="btn btn-default btn-style" value="Update">
                                    }

                                }
                            }

                        </div>

                        <div class="col-lg-12 col-sm-12 col-xs-12" id="DisplayGridViewEdit_" style="text-align:right;margin-top:10px;">
                            @Html.HiddenFor(x => x.GrnID)
                            <button style="cursor:pointer" title="Update" class="AutoDisplay" type="button">Update</button>
                            <input type="button" class="btn btn-default btn-sec btn-style" onclick="Cancel()" style="cursor: pointer;" title="Back" value="Back">
                        </div>

                    </div>
                </div>


                <div class="row">
                    <div class="field-section">
                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12">
                            <div class="table-responsive table-td-padding parent-table-height" style="height:auto;overflow: scroll;">
                                <table class="table" id="list-amended-material">
                                    <thead>
                                        <tr class="table-nowrap">
                                            <td style="display:none">Bar Code No</td>
                                            <td style="">Remove</td>
                                            <td style="">Edit</td>
                                            <td>GRN NO</td>
                                            <td>GRN Date</td>
                                            <td>Supplier Name</td>
                                            <td>DC NO</td>
                                            <td>DC Date</td>
                                            <td>Invoice no</td>
                                            <td>Invoice Date</td>
                                            <td>Gate Entry No</td>
                                            <td>Ge date</td>
                                            <td style="display:none">GE Time</td>
                                            <td>GRN Type</td>
                                            <td style="display:none">ST/GST Credit</td>
                                            <td style="display:none">Importance Clearnce</td>
                                            <td style="display:none">BE No</td>
                                            <td style="display:none">Exchange Rate</td>
                                            <td style="display:none">Shipment Mode</td>
                                            <td style="display:none">Fright Amt</td>
                                            <td style="display:none">Insurance Amt</td>
                                            <td style="display:none">Customs Duty</td>
                                            <td style="display:none">Pack & Forward</td>
                                            <td style="display:none">Service Tax%</td>
                                            <td style="display:none">Other Charges</td>
                                            <td style="display:none">Transport</td>
                                            <td style="display:none">Remarks</td>
                                            <td style="">Po No</td>
                                            <td style="">Lot No</td>
                                            <td style="display:none">Stores</td>
                                            <td>Material</td>
                                            <td style="display:none">Grade</td>
                                            <td>Group</td>
                                            <td>Category</td>
                                            <td style="display:none">GRP Mtnc</td>
                                            <td>Color</td>
                                            <td>UOM</td>
                                            <td style="display:none">DOM</td>
                                            <td>Store Location</td>
                                            <td style="display:none">Remakrs</td>
                                            <td>Substance</td>
                                            <td style="display:none">Weight</td>
                                            <td>QTY As per Dc</td>
                                            <td>Qty Sqt Value</td>
                                            <td>QTY PCS</td>
                                            <td style="">QTY Type</td>
                                            <td>Received QTY</td>
                                            <td style="display:none">Received Sqft</td>
                                            <td style="display:none">Received PCS</td>
                                            <td style="display:none">PCS Type</td>
                                            <td style="display:none">Rejected QTY</td>
                                            <td style="display:none">Rejected Sqft</td>
                                            <td style="display:none">Rejected PCS</td>
                                            <td style="display:none">RejectedPCS Type</td>
                                            <td style="display:none">Accpted QTY</td>
                                            <td style="display:none">Accepted Sqft</td>
                                            <td style="display:none">Accpted PCS</td>
                                            <td style="display:none">AccptedPCS Type</td>
                                            <td style="display:none">QTY Excess</td>
                                            <td>Pending QTY</td>
                                            <td style="display:none">Excess Approval</td>
                                            <td style="display:none">General Remarks</td>
                                            <td>Rate</td>
                                            <td>Value</td>
                                            <td style="display:none">MRP Margin%</td>
                                            <td style="display:none">MRP Price</td>
                                            <td style="display:none">Accessible Value</td>
                                            <td style="display:none">Discount %</td>
                                            <td style="display:none">Discount Value</td>
                                            <td style="display:none">Excise Duty%</td>
                                            <td style="display:none">Excise Duty Value</td>
                                            <td style="display:none">ST/GST/CST%</td>
                                            <td style="display:none">ST/GST/CST Value</td>
                                            <td style="display:none">Ecess%</td>
                                            <td style="display:none">Ecess Value</td>
                                            <td style="display:none">SH Ecess %</td>
                                            <td style="display:none">SH Ecess Value</td>
                                            <td style="display:none">Surcharge %</td>
                                            <td style="display:none">Surcharge val</td>
                                            <td style="display:none" width="200">Tag Prices Discount%</td>
                                            <td style="display:none">Tag Prices Discount value</td>
                                            <td style="display:none">Buyer Season</td>
                                            <td style="display:none">Buyer Name</td>
                                            <td>Amount+Tax</td>
                                            <td style="display:none">GRNID</td>
                                            <td style="display:none">POQty</td>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if (Model != null && Model.listOFGrnModel != null && Model.listOFGrnModel.Count > 0)
                                        {
                                            foreach (var item in Model.listOFGrnModel)
                                            {
                                                <tr id="@item.GrnID">
                                                    <td style='display:none' id='BarCodeNo' class='BarCodeNo'>@item.BarCodeNo</td>
                                                    <td><input type='button' value='Remove' onclick='DeleteMaterial("@item.GrnID")' class='' /></td>
                                                    <td><input type='button' name='Edit' id='EditRow' value='Edit' onclick='MainRowClick("@item.GrnID")' class='' /></td>
                                                    <td id='GrnNo' class='GrnNo'>@item.GrnNo</td>
                                                    <td id='GrnDate' class='GrnDate'>@item.GrnDate</td>
                                                    <td style='display:none' id='SupplierNameId' class='SupplierNameId'>@item.SupplierNameId</td>
                                                    <td id='SupplierNameId' class='SupplierNameId_ details_tab'>@item.SupplierName</td>
                                                    <td id='DC_No' class='DC_No'>@item.DC_No</td>
                                                    <td id='DCDate' class='DCDate'>@item.DCDate</td>
                                                    <td id='INVoiceNo' class='INVoiceNo'>@item.INVoiceNo</td>
                                                    <td id='INVoiceDate' class='INVoiceDate'>@item.INVoiceDate</td>
                                                    <td id='GateEntryNo' class='GateEntryNo'>@item.GateEntryNo</td>
                                                    <td id='GEDate' class='GEDate'>@item.GEDate</td>
                                                    <td style='display:none' id='GETime' class='GETime'>@item.GETime</td>
                                                    <td style='display:none' id='GrnType' class='GrnType'>@item.GrnType</td>
                                                    <td id='GrnType' class='GrnType_ details_tab'>@item.GrnTypeName</td>
                                                    <td style='display:none' id='ST_VATcredit' class='ST_VATcredit'>@item.ST_VATcredit </td>
                                                    <td style='display:none' id='ImportClearance' class='ImportClearance'>@item.ImportClearance</td>
                                                    <td style='display:none' id='BENo' class='BENo'>@item.BENo</td>
                                                    <td style='display:none' id='ExchangeRate' class='ExchangeRate'>@item.ExchangeRate</td>
                                                    <td style='display:none' id='ShipmentMode' class='ShipmentMode'>@item.ShipmentMode</td>
                                                    <td style='display:none' id='FreightAmount' class='FreightAmount'>@item.FreightAmount</td>
                                                    <td style='display:none' id='InsuranceAmount' class='InsuranceAmount'>@item.InsuranceAmount</td>
                                                    <td style='display:none' id='CustomsDuty' class='CustomsDuty'>@item.CustomsDuty</td>
                                                    <td style='display:none' id='Pack_Forward' class='Pack_Forward'>@item.Pack_Forward</td>
                                                    <td style='display:none' id='ServiceTax' class='ServiceTax'>@item.ServiceTax</td>
                                                    <td style='display:none' id='OtherCharges' class='OtherCharges'>@item.OtherCharges</td>
                                                    <td style='display:none' id='Transporter' class='Transporter'>@item.Transporter</td>
                                                    <td style='display:none' id='GeneralRemarks1' class='GeneralRemarks1'>@item.GeneralRemarks1</td>
                                                    <td id='PoNO' class='PoNO'>@item.PoNO </td>
                                                    <td id='LOTNo' class='LOTNo'>@item.LOTNo</td>
                                                    <td style='display:none' id='Stores' class='Stores'>@item.Stores</td>
                                                    <td style='display:none' id='Stores' class='Stores_ details_tab'>@item.StoresName</td>
                                                    <td style='display:none' id='MaterialId' class='MaterialId'>@item.MaterialId</td>
                                                    <td style='width: 382px;display: block;' id='MaterialId' class='MaterialId_'>@item.MaterialDescription</td>
                                                    <td style='display:none' id='Grade' class='Grade'>@item.Grade</td>
                                                    <td style='display:none' id='Grade' class='Grade_'>@item.Grade</td>
                                                    <td style='display:none' id='GroupID' class='GroupID'>@item.GroupID</td>
                                                    <td id='GroupID' class='GroupID_'>@item.GroupName</td>
                                                    <td style='display:none' id='CategoryId' class='CategoryId'>@item.CategoryId</td>
                                                    <td id='CategoryId' class='CategoryId_'>@item.CategoryName</td>
                                                    <td style='display:none' id='IfGroupIsMaintenance' class='IfGroupIsMaintenance'>@item.IfGroupIsMaintenance</td>
                                                    <td style='display:none' id='ColourId' class='ColourId'>@item.ColourId</td>
                                                    <td id='ColourId' class='ColourId_'>@item.ColourId</td>
                                                    <td style='display:none' id='UOMId' class='UOMId'>@item.UOMId</td>
                                                    <td id='UOMId' class='UOMId_ details_tab'>@item.UomName</td>
                                                    <td style='display:none' id='DOM' class='DOM'>@item.DOM </td>
                                                    <td style='display:none' id='StoreLocation' class='StoreLocation'>@item.StoreLocation</td>
                                                    <td id='StoreLocation' class='StoreLocation_'>@item.StoreLocation</td>
                                                    <td style='display:none' id='GeneralRemarks' class='GeneralRemarks'>@item.GeneralRemarks</td>
                                                    <td style='display:none' id='Substance' class='Substance'>@item.Substance</td>
                                                    <td id='Substance' class='Substance_'>@item.SubstanceName</td>
                                                    <td style='display:none' id='Weight' class='Weight'>@item.Weight</td>
                                                    <td style='' id='QtyAsPerDc' class='QtyAsPerDc'>@item.QtyAsPerDc</td>
                                                    <td style='' id='QtyAsPerSQFT' class='QtyAsPerSQFT'>@item.QtyAsPerSQFT</td>
                                                    <td style='' id='QtyAsPerSQFT' class='QtyAsPerSQFT_'>@item.UomName</td>
                                                    <td style='' id='QtyAsPerPCS' class='QtyAsPerPCS'>@item.QtyAsPerPCS</td>
                                                    <td style='display:none' id='QTYType' class='QTYType'>@item.QTYType</td>
                                                    <td id='QTYType' class='QTYType_ details_tab'>@item.UomName</td>
                                                    <td id='ReceivedQty' class='ReceivedQty'>@item.ReceivedQty</td>
                                                    <td style='display:none' id='ReceivedSQFT' class='ReceivedSQFT'>@item.ReceivedSQFT</td>
                                                    <td style='display:none' id='ReceivedSQFT' class='ReceivedSQFT_'>@item.ReceivedSQFT</td>
                                                    <td style='display:none' id='ReceivedPCS' class='ReceivedPCS'>@item.ReceivedPCS</td>
                                                    <td style='display:none' id='ReceivedType' class='ReceivedType'>@item.ReceivedType</td>
                                                    <td style='display:none' id='ReceivedType' class='ReceivedType_'>@item.ReceivedType</td>
                                                    <td style='display:none' id='RejectedQty' class='RejectedQty'>@item.RejectedQty</td>
                                                    <td style='display:none' id='RejectedSQFT' class='RejectedSQFT'>@item.RejectedSQFT</td>
                                                    <td style='display:none' id='RejectedSQFT' class='RejectedSQFT_'>@item.RejectedSQFT</td>
                                                    <td style='display:none' id='RejectedPCS' class='RejectedPCS'>@item.RejectedPCS</td>
                                                    <td style='display:none' id='RejectedType' class='RejectedType'>@item.RejectedSQFT</td>
                                                    <td style='display:none' id='RejectedType' class='RejectedType_ details_tab'>@item.RejectedSQFT</td>
                                                    <td style='display:none' id='AcceptedQty' class='AcceptedQty'>@item.AcceptedQty</td>
                                                    <td style='display:none' id='AcceptedSQFT' class='AcceptedSQFT'>@item.AcceptedSQFT</td>
                                                    <td style='display:none' id='AcceptedSQFT' class='AcceptedSQFT_'>@item.AcceptedSQFT</td>
                                                    <td style='display:none' id='AcceptedPCS' class='AcceptedPCS'>@item.AcceptedPCS</td>
                                                    <td style='display:none' id='AcceptedType' class='AcceptedType'>@item.AcceptedType</td>
                                                    <td style='display:none' id='AcceptedType' class='AcceptedType_'>@item.AcceptedType</td>
                                                    <td style='display:none' id='QtyExcess' class='QtyExcess'>@item.QtyExcess</td>
                                                    <td id='PendingQty' class='PendingQty'>@item.PendingQty</td>
                                                    <td style='display:none' id='ExcessApproval' class='ExcessApproval'>@item.ExcessApproval</td>
                                                    <td style='display:none' id='GeneralRemarks' class='GeneralRemarks'>@item.GeneralRemarks</td>
                                                    <td id='Rate' class='Rate'>@item.Rate</td>
                                                    <td id='Value' class='Value'>@item.Value </td>
                                                    <td style='display:none' id='MRPMargin' class='MRPMargin'>@item.MRPMargin</td>
                                                    <td style='display:none' id='MRPPrice' class='MRPPrice'>@item.MRPPrice </td>
                                                    <td style='display:none' id='AccessibleValue' class='AccessibleValue'>@item.AccessibleValue</td>
                                                    <td style='display:none' id='Discount_Per' class='Discount_Per'>@item.Discount_Per</td>
                                                    <td style='display:none' id='Discount_Val' class='Discount_Val'>@item.Discount_Val</td>
                                                    <td style='display:none' id='ExciseDuty_Per' class='ExciseDuty_Per'>@item.ExciseDuty_Per</td>
                                                    <td style='display:none' id='ExciseDuty_Val' class='ExciseDuty_Val'>@item.ExciseDuty_Val</td>
                                                    <td style='display:none' id='ST_VAT_CST_Per' class='ST_VAT_CST_Per'>@item.ST_VAT_CST_Per</td>
                                                    <td style='display:none' id='ST_VAT_CST_Val' class='ST_VAT_CST_Val'>@item.ST_VAT_CST_Val</td>
                                                    <td style='display:none' id='Ecess_Per' class='Ecess_Per'>@item.Ecess_Per</td>
                                                    <td style='display:none' id='Ecess_Val' class='Ecess_Val'>@item.Ecess_Val</td>
                                                    <td style='display:none' id='SH_Ecess_Per' class='SH_Ecess_Per'>@item.SH_Ecess_Per</td>
                                                    <td style='display:none' id='SH_Ecess_Val' class='SH_Ecess_Val'>@item.SH_Ecess_Val</td>
                                                    <td style='display:none' id='GrnID' class='GrnID'>@item.GrnID</td>
                                                    <td style='display:none' id='Surcharge_Per' class='Surcharge_Per'>@item.Surcharge_Per</td>
                                                    <td style='display:none' id='Surcharge_Val' class='Surcharge_Val'>@item.Surcharge_Val</td>
                                                    <td style='display:none' id='TagsPiecesDiscount_Per' class='TagsPiecesDiscount_Per'>@item.TagsPiecesDiscount_Per </td>
                                                    <td style='display:none' id='TagsPiecesDiscount_Val' class='TagsPiecesDiscount_Val'>@item.TagsPiecesDiscount_Val </td>
                                                    <td style='display:none' id='BuyerSeasonID' class='BuyerSeasonID'>@item.BuyerSeasonID </td>
                                                    <td style='display:none' id='BuyerMasterId' class='BuyerMasterId'>@item.BuyerMasterId </td>
                                                    <td style='display:none' id='ShortageQty' class='ShortageQty'>@item.ShortageQty </td>
                                                    <td style='display:none' id='ShortageSQFT' class='ShortageSQFT'>@item.ShortageSQFT</td>
                                                    <td style='display:none' id='ShortagePCS' class='ShortagePCS'>@item.ShortagePCS</td>
                                                    <td style='display:none' id='ShortageType' class='ShortageType'>@item.ShortageType </td>
                                                    <td style='display:none' id='AmountplusTax' class='AmountplusTax'>@item.AmountplusTax </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>
                <div style="text-align:right;">
                    <div id="TotalAmount" style="display:inline-block;">
                        <span id="Tot">Total Amount</span>
                    </div>
                    <div id="TotalAmount" style="display:inline-block;">
                        @if (Model != null && Model.GrnID != 0)
                        {
                            <span id="TotalAmountVlaue">@Model.TotalAmountTax</span>
                        }
                        else
                        {
                            <span id="TotalAmountVlaue"></span>
                        }

                    </div>
                </div>







            </div>
        </div>
    </div>


</body>
</html>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
@*<script src="~/Scripts/EasyAutocomplete-1.3.5/AutoComplete%20v1.10.2.js"></script>*@
<script src="~/Scripts/EasyAutocomplete-1.3.5/AutoComplete%20v1.11.4.js"></script>
<script src="~/Scripts/AutoCompleteCommon.js"></script>
<script src="~/Scripts/EasyAutocomplete-1.3.5/ComboBox.js"></script>
<script src="~/Scripts/moment.js"></script>
<script>
    $(document).ready(function () {
        $('#DisplayGridViewEdit_').hide();
        $("#ExchangeRate").val("1");
        $('#sizeRangeTable').hide();

    });
</script>
<script>
    var IsSizeRange = false;
    $(function () {
        $("#MaterialId").combobox();
        //$("#PoDate").datepicker();
        //$("#BEDate").datepicker();
        if ('@storeid' != 0) {
            $('#Substance').val(0);
        }
        if ('@grd' != 0) {
            $('#Grade').val(0);
        }
    });
    $(function () {
        if ('@Model' != null && '@Model.AutomaticPONumber' != null && '@Model.AutomaticPONumber' != "") {
            $("#PoNumber").hide();
            $("#AutomaticPONumber").show();
            $("#Pono_").hide();
            $("#AutomaticPono_").show();
        }
        else if ('@Model.GrnTypeName' == "Direct GRN") {
            $("#PoNumber").hide();
            $("#AutomaticPONumber").show();
            $("#Pono_").hide();
            $("#AutomaticPono_").show();
        }
        else {
            $("#PoNumber").show();
            $("#AutomaticPONumber").hide();
            $("#AutomaticPono_").hide();
            $("#Pono_").show();
        }
    });
    function isNumberKey(evt) {

        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode != 46 && charCode > 31
          && (charCode < 48 || charCode > 57))
            return false;

        return true;
    }
    function ToJavaScriptDate(value) {
        debugger;
        var pattern = /Date\(([^)]+)\)/;
        var results = pattern.exec(value);
        var dt = new Date(parseFloat(results[1]));
        var len = parseInt(dt.getDate().toString().length);       
        return (dt.getDate() + "/" + dt.getMonth() + 1) + "/" + dt.getFullYear();
    }
    $(function () {
        $("#PoNO").combobox({
            select: function (event, ui) {
                var PoNO = $('#PoNO').val();

                $.ajax({
                    url: '/GRN_DetailNew/FillPoBasedMaterialName',
                    type: "GET",
                    dataType: "JSON",
                    data: { PoNO: PoNO },
                    success: function (cities) {
                        if (cities != null && cities.Message != null && cities.Message == "There is no data") {
                            alert("PO and Material is not match.Please contac admin");
                            return false;
                        }
                        else {
                            var isTrue = cities.IsIndent;
                            if (isTrue == "true" || isTrue == true) {
                                $("#WithoutIndent").val(true);
                            }
                            else {
                                $("#WithoutIndent").val(false);
                            }

                            $("#MaterialId").html("");
                            $("#MaterialId").append("<option value='0'>--Select--</option>");
                            if (cities.Material != null) {
                                debugger;
                                $.each(cities.Material, function (i, city) {                               
                                    $("#MaterialId").append('<option value=' + city.IndentMaterialID + '>' + city.MaterialDescription + '</option>');
                                });
                                $.each(cities.Date, function (i, city) {
                                    var date = city.PoDate;
                                    var nowDate = new Date(parseInt(date.substr(6)));
                                   // var result = nowDate.toLocaleString().split(',')[0];
                                    //, var a = result;
                                    var result = moment(nowDate).format('DD/MM/YYYY');
                                    $("#PoDate").val(result);
                                });
                            }
                        }

                    }
                });
            }
        });
    });
    $(function () {
        $("#Transporter").blur(function () {
            var serviceTax = 0;
            var FreightAmount = $("#FreightAmount").val();
            var InsuranceAmount = $("#InsuranceAmount").val();
            var CustomsDuty = $("#CustomsDuty").val();
            var Pack_Forward = $("#Pack_Forward").val();
            serviceTax = $("#ServiceTax").val();
            var OtherCharges = $("#OtherCharges").val();
            var Transporter = $("#Transporter").val();
            var value = $("#Value").val();
            var discountPer = $("#Discount_Val").val();
            var ExciseDutyAmount = $('#ExciseDuty_Val').val();
            var STVATAmount = $('#ST_VAT_CST_Val').val();
            var ExessAmount = $('#Ecess_Val').val();
            var SHAmt = $('#SH_Ecess_Val').val();
            var tagsPiecesDiscount = 0;
            var Surcharge_Val = 0;
            tagsPiecesDiscount = $("#TagsPiecesDiscount_Val").val();
            Surcharge_Val = $("#Surcharge_Val").val();
            if (tagsPiecesDiscount == "" || tagsPiecesDiscount == undefined) {
                tagsPiecesDiscount = 0;
            }
            if (Surcharge_Val == "") {
                Surcharge_Val = 0;
            }
            if (discountPer == "") {
                discountPer = 0;
            }
            if (ExciseDutyAmount == "") {
                ExciseDutyAmount = 0;
            }
            if (STVATAmount == "" || STVATAmount == undefined) {
                STVATAmount = 0;
            }
            if (ExessAmount == "" || ExessAmount == undefined) {
                ExessAmount = 0;
            }
            if (SHAmt == "") {
                SHAmt = 0;
            }
            if (value == "" || value == undefined) {
                value = 0;
            }
            var amount = ((parseFloat(value) + parseFloat(ExciseDutyAmount) + parseFloat(STVATAmount) + parseFloat(ExessAmount) + parseFloat(SHAmt) + parseFloat(Surcharge_Val)) - (parseFloat(tagsPiecesDiscount) + parseFloat(discountPer)));

            if (serviceTax == "") {
                serviceTax = 0;
            }
            if (FreightAmount == "") {
                FreightAmount = 0;
            }
            if (InsuranceAmount == "") {
                InsuranceAmount = 0;
            }
            if (CustomsDuty == "") {
                CustomsDuty = 0;
            }
            if (Pack_Forward == "") {
                Pack_Forward = 0;
            }
            if (OtherCharges == "") {
                OtherCharges = 0;
            }
            if (Transporter == "") {
                Transporter = 0;
            }
            var totalAmount = parseFloat(serviceTax) + parseFloat(FreightAmount) + parseFloat(InsuranceAmount) + parseFloat(CustomsDuty) + parseFloat(Pack_Forward) + parseFloat(OtherCharges) + parseFloat(Transporter);
            $("#AmountplusTax").val((parseFloat(totalAmount) + parseFloat(amount)).toFixed(3));
        });
    });

    $(function () {
     
        $("#MaterialId").combobox({
            select: function (event, ui) {
                debugger;
                $("#GrnNo").prop("disabled", false);
                var isWithoutIndent = false;
                isWithoutIndent = $("#WithoutIndent").val();
                if (isWithoutIndent == undefined) {
                    isWithoutIndent = false;
                }
                if ($('#GrnType option:selected').text() != "General" && $('#GrnType option:selected').text() != "Direct GRN") {
                    var IndentMaterialID = $('#MaterialId').val();
                    var grnno = "";
                    grnno = $("#GrnNo").val();
                    $.ajax({
                        url: '/GRN_DetailNew/FillIndentMaterialIDBasedPopulateDetails',
                        type: "GET",
                        dataType: "JSON",
                        data: { IndentMaterialID: IndentMaterialID, grnno: grnno },
                        success: function (data) {
                            if (data == "Already Exist") {
                                alert("Already Existed please select another Material.");
                                $("#MaterialType").val("");
                                $("#MaterialId").val("");
                                $("#MaterialId").combobox('destroy');
                                $("#MaterialId").combobox();
                                $("#IONo").val("");
                                $("#IONo").combobox('destroy');
                                $("#IONo").combobox();
                                $("#IndentNo").val("")
                                $("#IndentNo").combobox('destroy');
                                $("#IndentNo").combobox();
                                $("#QtyAsPerDc").val("0");
                                $("#ReceivedQty").val("0");
                                $("#ShortageQty").val("0");
                                $("#RejectedQty").val("");
                                $("#AcceptedQty").val("0");
                                $("#QtyAsPerPCS").val("0");
                                $("#ReceivedPCS").val("0");
                                $("#ShortagePCS").val("0");
                                $("#RejectedPCS").val("0");
                                $("#AcceptedPCS").val("0");
                                $("#QtyAsPerSQFT").val(0);
                                $("#ReceivedSQFT").val(0);
                                $("#ShortageSQFT").val(0);
                                $("#RejectedSQFT").val(0);
                                $("#AcceptedSQFT").val(0);
                                $("#QTYType").val(0);
                                $("#ReceivedType").val(0);
                                $("#ShortageType").val(0);
                                $("#RejectedType").val(0);
                                $("#AcceptedType").val(0);
                                $("#Substance").val(0);
                                $("#Grade").val(0);
                                $("#GroupID").val(0);
                                $("#UOMId").val(0);
                                $("#CategoryId").val(0);
                                $("#PoQty").val(0);
                                $("#QtyExcess").val(0);
                                $("#PendingQty").val(0);
                                $("#ExcessApproval").val(0);
                                $("#Rate").val(0);
                                $("#Value").val(0);
                                $("#ColourId").val("");
                                $("#Stores").val("");
                                $("#MRPMargin").val(0);
                                $("#MRPPrice").val(0);
                                $("#AccessibleValue").val(0);
                                $("#Discount_Per").val(0);
                                $("#Discount_Val").val(0);
                                $("#ExciseDuty_Per").val(0);
                                $("#ExciseDuty_Val").val(0);
                                $("#ST_VAT_CST_Per").val(0);
                                $("#ST_VAT_CST_Val").val(0);
                                $("#Ecess_Per").val(0);
                                $("#Ecess_Val").val(0);
                                $("#SH_Ecess_Per").val(0);
                                $("#SH_Ecess_Val").val(0);
                                $("#TagsPiecesDiscount_Per").val(0);
                                $("#TagsPiecesDiscount_Val").val(0);
                                $("#AmountplusTax").val(0);
                                $("#Surcharge_Per").val(0);
                                $("#Surcharge_Val").val(0);
                                $("#FreightAmount").val(0);
                                $("#InsuranceAmount").val(0);
                                $("#InsuranceAmount").val(0);
                                $("#CustomsDuty").val(0);
                                $("#Pack_Forward").val(0);
                                $("#ServiceTaxPer").val(0);
                                $("#ServiceTax").val(0);
                                $("#TotalCount").text("");
                                $("#OtherCharges").val(0);
                                $("#Transporter").val(0);
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                return false;
                            }
                            else if (data.Message != null) {
                                alert(data.Message);
                                return false;
                            }
                            else {


                                if (data.approvedPriceListExcessPo != null) {
                                    $.each(data.approvedPriceListExcessPo, function (i, approved) {
                                        $("#ExcessApproval").val(approved.POExcessPercentage);
                                    });
                                    $("#ExcessApproval").prop("disabled", true);
                                }
                                $("#PoQty").val(data.PurchaseOrder.Qty);
                                $("#PoQty").prop("disabled", true);
                                $("#IndentMaterialId_").val(IndentMaterialID);
                                //$("#BuyerSeasonID_").val(data.IndentMaterial.BuyerSeason);
                                //$("#BuyerMasterId_").val(data.IndentMaterial.BuyerMasterId);
                                $("#Grade").val(data.Material.GradeMasterId);
                                $("#Stores").val(data.Material.StoreMasterId);
                                if (data.Material != null && data.Material.isLocal == true && data.Material.isImport == true) {
                                    var int = 1;
                                    $("#MaterialType").html("");
                                    $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                    for (i = 1; i <= 2; i++) {
                                        var type = "";
                                        if (i == 1) {
                                            type = "Local";
                                        }
                                        else if (i == 2) {
                                            type = "Direct Import";
                                            i = 3;
                                        }
                                        $("#MaterialType").append(
                                            $('<option></option>').val(i).html(type));
                                    }
                                }
                                else if (data.Material != null && data.Material.isImportCustomer == true && data.Material.isImport == true) {
                                    var int = 1;
                                    $("#MaterialType").html("");
                                    $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                    for (i = 1; i <= 2; i++) {
                                        var type = "";
                                        if (i == 1) {
                                            type = "Customer Import";
                                            i = 2;
                                        }
                                        else if (i == 2) {
                                            type = "Direct Import";
                                            i = 3;
                                        }
                                        $("#MaterialType").append(
                                            $('<option></option>').val(i).html(type));
                                    }
                                }
                                else if (data.Material != null && data.Material.isImportCustomer == true && data.Material.isLocal == true) {
                                    var int = 1;
                                    $("#MaterialType").html("");
                                    $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                    for (i = 1; i <= 2; i++) {
                                        var type = "";
                                        if (i == 1) {
                                            type = "Local";
                                            i = 1;
                                        }
                                        else if (i == 2) {
                                            type = "Customer Import";
                                            i = 2;
                                        }
                                        $("#MaterialType").append(
                                            $('<option></option>').val(i).html(type));
                                    }
                                }
                                else if (data.Material.isImportCustomer == true) {
                                    $("#MaterialType").val(2);
                                }
                                else if (data.Material.isLocal == true) {
                                    $("#MaterialType").val(1);
                                }
                                else if (data.Material.isImport == true) {
                                    $("#MaterialType").val(3);
                                }
                                debugger;
                                //if (data.IndentMaterial!=0 && data .IndentMaterialId!=0)
                                $("#CategoryId").val(data.IndentMaterial.MaterialCategoryMasterId);
                                $("#ColourId").val(data.IndentMaterial.ColorMasterID);
                                $("#IndentMaterialId").val(data.IndentMaterial.IndentMaterialId);
                                //$("#BuyerSeasonID").val(data.IndentMaterial.BuyerSeason);
                              //  $("#BuyerMasterId").val(data.IndentMaterial.BuyerMasterId);
                                $("#UOMId").val(data.Material.Uom);
                                $("#GroupID").val(data.IndentMaterial.MaterialGroupMasterId);
                                $("#Substance").val(data.Material.SubstanceMasterId);
                                //$("#Substance").val(data.Material.SubstanceMasterId);
                                $("#SupplierNameId").val(data.purchaseOrder.Supplier);
                                $("#QtyAsPerDc").val(data.IndentMaterial.IndentQTY);
                                if (data.orderDetails != null && data.orderDetails.LotNo != null) {
                                    $("#LOTNo").val(data.orderDetails.LotNo);
                                    $("#IONo").val(data.orderDetails.OrderEntryId);
                                    $("#IONo").combobox('destroy');
                                    $("#IONo").combobox();
                                }
                                $("#IndentNo").val(data.IndentMaterial.IndentID);
                                $("#IndentNo").combobox('destroy');
                                $("#IndentNo").combobox();
                                $("#Rate").val(data.PurchaseOrder.Rate);
                                $("#Rate").prop("disabled", true);
                                $("#Value").val(data.PurchaseOrder.ExRate);
                                $("#MRPMargin").val(data.PurchaseOrder.MRPMargin);
                                $("#MRPPrice").val(data.PurchaseOrder.MRPPrice);
                                $("#AccessibleValue").val(data.PurchaseOrder.AccessibleValue);
                                $("#Weight").val(data.PurchaseOrder.Weight);
                                $("#Discount_Per").val(data.PurchaseOrder.Dis);
                                $("#Discount_Val").val(data.PurchaseOrder.DisAmount);
                                $("#ExciseDuty_Per").val(data.PurchaseOrder.ExciseDuty);
                                $("#ExciseDuty_Val").val(data.PurchaseOrder.ExciseDutyAmount);
                                $("#ST_VAT_CST_Per").val(data.PurchaseOrder.VAT);
                                $("#ST_VAT_CST_Val").val(data.PurchaseOrder.VATAmt);
                                $("#Ecess_Per").val(data.PurchaseOrder.Exess);
                                $("#Ecess_Val").val(data.PurchaseOrder.ExessAmount);
                                $("#SH_Ecess_Per").val(data.PurchaseOrder.SHExess);
                                $("#SH_Ecess_Val").val(data.PurchaseOrder.SHExessAmount);
                                $("#Surcharge_Per").val(data.PurchaseOrder.SurCharge);
                                $("#Surcharge_Val").val(data.PurchaseOrder.SurChargeAmt);
                                $("#AmountplusTax").val(data.PurchaseOrder.AmountTax);
                                $("#FreightAmount").val(data.PurchaseOrder.FreightAmt);
                                $("#InsuranceAmount").val(data.PurchaseOrder.InsuranceAmount);
                                $("#CustomsDuty").val(data.PurchaseOrder.CustomsDutyType);
                                $("#Pack_Forward").val(data.PurchaseOrder.PackForwardtype);
                                if (data.PurchaseOrder.ServiceTax == null) {
                                    $("#ServiceTax").val(0);
                                }
                                $("#QtyAsPerSQFT").val(data.IndentMaterial.WastageQtyUOM);
                                $("#QTYType").val(data.IndentMaterial.WastageQtyUOM);
                                $("#ReceivedSQFT").val(data.IndentMaterial.WastageQtyUOM);
                                $("#ReceivedType").val(data.IndentMaterial.WastageQtyUOM);
                                $("#RejectedSQFT").val(data.IndentMaterial.WastageQtyUOM);
                                $("#RejectedType").val(data.IndentMaterial.WastageQtyUOM);
                                $("#AcceptedSQFT").val(data.IndentMaterial.WastageQtyUOM);
                                $("#AcceptedType").val(data.IndentMaterial.WastageQtyUOM);
                                if (data.store != null && data.store.StoreName != null) {
                                    if (data.store.StoreName == "Leather Store" || data.store.StoreMaster == "Leather Store-Local") {
                                        $("#QTYType").prop("disabled", false);
                                        $("#ReceivedType").prop("disabled", false);
                                        $("#ShortageType").prop("disabled", false);
                                        $("#RejectedType").prop("disabled", false);
                                        $("#AcceptedType").prop("disabled", false);
                                        $("#QtyAsPerPCS").prop("disabled", false);
                                        $("#ReceivedPCS").prop("disabled", false);
                                        $("#ShortagePCS").prop("disabled", false);
                                        $("#RejectedPCS").prop("disabled", false);
                                        $("#AcceptedPCS").prop("disabled", false);
                                        $("#MachineryName").val(0);
                                        $("#MachineryName").prop("disabled", true);

                                    }
                                    else if (data.store.StoreName.trim() == "Maintenance Store") {
                                        $("#MachineryName").prop("disabled", false);
                                        $('#Substance').val(0);
                                        $("#Substance").prop("disabled", true);
                                        $('#Grade').val(0);
                                        $("#Grade").prop("disabled", true);
                                    }
                                    else {
                                        $("#MachineryName").val(0);
                                        $("#MachineryName").prop("disabled", true);
                                        $("#QTYType").val("");
                                        $("#ReceivedType").val("");
                                        $("#ShortageType").val("");
                                        $("#RejectedType").val("");
                                        $("#AcceptedType").val("");
                                        $("#QTYType").prop("disabled", true);
                                        $("#ReceivedType").prop("disabled", true);
                                        $("#ShortageType").prop("disabled", true);
                                        $("#RejectedType").prop("disabled", true);
                                        $("#AcceptedType").prop("disabled", true);
                                        $("#QtyAsPerPCS").prop("disabled", true);
                                        $("#ReceivedPCS").prop("disabled", true);
                                        $("#ShortagePCS").prop("disabled", true);
                                        $("#RejectedPCS").prop("disabled", true);
                                        $("#AcceptedPCS").prop("disabled", true);
                                    }
                                }
                                else {
                                    $("#MachineryName").val(0);
                                    $("#MachineryName").prop("disabled", true);
                                    $("#QTYType").val("");
                                    $("#ReceivedType").val("");
                                    $("#ShortageType").val("");
                                    $("#RejectedType").val("");
                                    $("#AcceptedType").val("");
                                    $("#QTYType").prop("disabled", true);
                                    $("#ReceivedType").prop("disabled", true);
                                    $("#ShortageType").prop("disabled", true);
                                    $("#RejectedType").prop("disabled", true);
                                    $("#AcceptedType").prop("disabled", true);
                                    $("#QtyAsPerPCS").prop("disabled", true);
                                    $("#ReceivedPCS").prop("disabled", true);
                                    $("#ShortagePCS").prop("disabled", true);
                                    $("#RejectedPCS").prop("disabled", true);
                                    $("#AcceptedPCS").prop("disabled", true);
                                }
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                var count = 1;
                                var totalQty = 0;
                                for (var i = 0; i <= data.SizeRange.length - 1; i++) {
                                    var sIsSizeRangeize = data.SizeRange[i].SizeRange.trim();
                                    IsSizeRange = true;
                                    $('#sizeRangeTable tbody tr:first-child').append('<td class="SizeRangeRefValue" style="background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;"> ' + size + ' </td> ');
                                    $('#sizeRangeTable tbody tr:last').append("<td class='Rate' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Rates' id='Rate'  onchange='CalculateTotal(this)' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /</td>");
                                    count++;
                                    totalQty += parseInt(totalQty);
                                }
                                $("#TotalCount").val(totalQty);

                                $("#TotalCount").val(totalQty);
                            }

                        }
                    });
                }
                else if ($('#GrnType option:selected').text() == "General" && isWithoutIndent == "false") {
                    var IndentMaterialID = $('#MaterialId').val();
                    var grnno = "";
                    grnno = $("#GrnNo").val();
                    $.ajax({
                        url: '/GRN_DetailNew/FillIndentMaterialIDBasedPopulateDetails',
                        // type: "GET",
                        dataType: "JSON",
                        data: { IndentMaterialID: IndentMaterialID, grnno: grnno },
                        success: function (data) {
                            debugger;
                            if (data == "Already Exist") {
                                alert("Already Existed please select another Material.");
                                $("#MaterialType").val("");
                                $("#MaterialId").val("");
                                $("#MaterialId").combobox('destroy');
                                $("#MaterialId").combobox();
                                $("#IONo").val("");
                                $("#IONo").combobox('destroy');
                                $("#IONo").combobox();
                                $("#IndentNo").val("")
                                $("#IndentNo").combobox('destroy');
                                $("#IndentNo").combobox();
                                $("#QtyAsPerDc").val("0");
                                $("#ReceivedQty").val("0");
                                $("#ShortageQty").val("0");
                                $("#RejectedQty").val("");
                                $("#AcceptedQty").val("0");
                                $("#QtyAsPerPCS").val("0");
                                $("#ReceivedPCS").val("0");
                                $("#ShortagePCS").val("0");
                                $("#RejectedPCS").val("0");
                                $("#AcceptedPCS").val("0");
                                $("#QtyAsPerSQFT").val(0);
                                $("#ReceivedSQFT").val(0);
                                $("#ShortageSQFT").val(0);
                                $("#RejectedSQFT").val(0);
                                $("#AcceptedSQFT").val(0);
                                $("#QTYType").val(0);
                                $("#ReceivedType").val(0);
                                $("#ShortageType").val(0);
                                $("#RejectedType").val(0);
                                $("#AcceptedType").val(0);
                                $("#Substance").val(0);
                                $("#Grade").val(0);
                                $("#GroupID").val(0);
                                $("#UOMId").val(0);
                                $("#CategoryId").val(0);
                                $("#PoQty").val(0);
                                $("#QtyExcess").val(0);
                                $("#PendingQty").val(0);
                                $("#ExcessApproval").val(0);
                                $("#Rate").val(0);
                                $("#Value").val(0);
                                $("#ColourId").val("");
                                $("#Stores").val("");
                                $("#MRPMargin").val(0);
                                $("#MRPPrice").val(0);
                                $("#AccessibleValue").val(0);
                                $("#Discount_Per").val(0);
                                $("#Discount_Val").val(0);
                                $("#ExciseDuty_Per").val(0);
                                $("#ExciseDuty_Val").val(0);
                                $("#ST_VAT_CST_Per").val(0);
                                $("#ST_VAT_CST_Val").val(0);
                                $("#Ecess_Per").val(0);
                                $("#Ecess_Val").val(0);
                                $("#SH_Ecess_Per").val(0);
                                $("#SH_Ecess_Val").val(0);
                                $("#TagsPiecesDiscount_Per").val(0);
                                $("#TagsPiecesDiscount_Val").val(0);
                                $("#AmountplusTax").val(0);
                                $("#Surcharge_Per").val(0);
                                $("#Surcharge_Val").val(0);
                                $("#FreightAmount").val(0);
                                $("#InsuranceAmount").val(0);
                                $("#InsuranceAmount").val(0);
                                $("#CustomsDuty").val(0);
                                $("#Pack_Forward").val(0);
                                $("#ServiceTaxPer").val(0);
                                $("#ServiceTax").val(0);
                                $("#TotalCount").text("");
                                $("#OtherCharges").val(0);
                                $("#Transporter").val(0);
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                return false;
                            }
                            else if (data.Message != null) {
                                alert(data.Message);
                                return false;
                            }
                            else {

                                if (data.PurchaseOrder != null) {
                                    if (data.PurchaseOrder.ServiceTax == null) {
                                        $("#ServiceTax").val(0);
                                    }
                                    if (data.PurchaseOrder.IndentNoDirectPO != null) {
                                        $("#IndentNo").val(data.PurchaseOrder.IndentNoDirectPO);
                                    }
                                    else {
                                        $("#IndentNo").val(data.PurchaseOrder.IndentNo);
                                    }

                                    if (data.approvedPriceListExcessPo != null) {
                                        $.each(data.approvedPriceListExcessPo, function (i, approved) {
                                            $("#ExcessApproval").val(approved.POExcessPercentage);
                                        });
                                        $("#ExcessApproval").prop("disabled", true);
                                    }
                                    $("#QtyAsPerSQFT").val(data.Material.Uom);
                                    $("#RejectedSQFT").val(data.Material.Uom);
                                    $("#ReceivedSQFT").val(data.Material.Uom);
                                    $("#ShortageSQFT").val(data.Material.Uom);
                                    $("#AcceptedSQFT").val(data.Material.Uom);
                                    $("#PendingQty").val(data.poQty);

                                    $("#PoQty").val(data.PurchaseOrder.Qty);
                                    $("#PoQty").prop("disabled", true);
                                    $("#Rate").val(data.PurchaseOrder.Rate);
                                    if (data.resultCurrency != null) {
                                        var curID = data.resultCurrency.LongForm;
                                        if (curID == "Rupees") {
                                            $("#Currencykey").val(curID);
                                            $("#ExchangeRate").prop('readonly', true);
                                        }
                                        else {
                                            $("#Currencykey").val(curID);
                                            $("#ExchangeRate").prop('readonly', false);
                                        }
                                    }

                                    var exchangeRate = $("#ExchangeRate").val();
                                    var value_ = $("#Value").val();
                                    var valueinRps = parseFloat(value_) * parseFloat(exchangeRate);
                                    $(".ValueInRps").val(parseFloat((valueinRps)));

                                    $("#Value").val(data.PurchaseOrder.ExRate);
                                    $("#MRPMargin").val(data.PurchaseOrder.MRPMargin);
                                    $("#MRPPrice").val(data.PurchaseOrder.MRPPrice);
                                    $("#AccessibleValue").val(data.PurchaseOrder.AccessibleValue);
                                    $("#Weight").val(data.PurchaseOrder.Weight);
                                    $("#Discount_Per").val(data.PurchaseOrder.Dis);
                                    $("#Discount_Val").val(data.PurchaseOrder.DisAmount);
                                    $("#ExciseDuty_Per").val(data.PurchaseOrder.ExciseDuty);
                                    $("#ExciseDuty_Val").val(data.PurchaseOrder.ExciseDutyAmount);
                                    $("#ST_VAT_CST_Per").val(data.PurchaseOrder.VAT);
                                    $("#ST_VAT_CST_Val").val(data.PurchaseOrder.VATAmt);
                                    $("#Ecess_Per").val(data.PurchaseOrder.Exess);
                                    $("#Ecess_Val").val(data.PurchaseOrder.ExessAmount);
                                    $("#SH_Ecess_Per").val(data.PurchaseOrder.SHExess);
                                    $("#SH_Ecess_Val").val(data.PurchaseOrder.SHExessAmount);
                                    $("#Surcharge_Per").val(data.PurchaseOrder.SurCharge);
                                    $("#Surcharge_Val").val(data.PurchaseOrder.SurChargeAmt);
                                    // $("#AmountplusTax").val(data.PurchaseOrder.AmountTax);
                                    $("#FreightAmount").val(data.PurchaseOrder.FreightAmt);
                                    $("#InsuranceAmount").val(data.PurchaseOrder.InsuranceAmount);
                                    $("#CustomsDuty").val(data.PurchaseOrder.CustomsDuty);
                                    $("#Pack_Forward").val(data.PurchaseOrder.PackForward);
                                }
                                $("#SupplierNameId").val(data.PurchaseOrder.Supplier);

                                if (data.IndentMaterial != null) {
                                    $("#IndentMaterialId_").val(IndentMaterialID);
                                    //$("#BuyerSeasonID_").val(data.IndentMaterial.BuyerSeason);
                                 //   $("#BuyerMasterId_").val(data.IndentMaterial.BuyerMasterId);
                                    $("#IndentMaterialId").val(data.IndentMaterial.IndentMaterialId);
                                   // $("#BuyerSeasonID").val(data.IndentMaterial.BuyerSeason);
                                    //$("#BuyerMasterId").val(data.IndentMaterial.BuyerMasterId);
                                    $("#QtyAsPerDc").val(data.IndentMaterial.IndentQTY);
                                    $("#IndentNo").val(data.IndentMaterial.IndentID);
                                    $("#IndentNo").combobox('destroy');
                                    $("#IndentNo").combobox();
                                }
                                $("#Grade").val(data.Material.GradeMasterId);
                                $("#Stores").val(data.Material.StoreMasterId);
                                $("#CategoryId").val(data.Material.MaterialCategoryMasterId);
                                $("#ColourId").val(data.Material.ColorMasterId);
                                $("#UOMId").val(data.Material.Uom);
                                $("#GroupID").val(data.Material.MaterialGroupMasterId);
                                $("#Substance").val(data.Material.SubstanceMasterId);

                                if (data.Material != null && data.Material.isLocal == true && data.Material.isImport == true) {
                                    var int = 1;
                                    $("#MaterialType").html("");
                                    $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                    for (i = 1; i <= 2; i++) {
                                        var type = "";
                                        if (i == 1) {
                                            type = "Local";
                                        }
                                        else if (i == 2) {
                                            type = "Direct Import";
                                            i = 3;
                                        }
                                        $("#MaterialType").append(
                                            $('<option></option>').val(i).html(type));
                                    }
                                }
                                else if (data.Material != null && data.Material.isImportCustomer == true && data.Material.isImport == true) {
                                    var int = 1;
                                    $("#MaterialType").html("");
                                    $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                    for (i = 1; i <= 2; i++) {
                                        var type = "";
                                        if (i == 1) {
                                            type = "Customer Import";
                                            i = 2;
                                        }
                                        else if (i == 2) {
                                            type = "Direct Import";
                                            i = 3;
                                        }
                                        $("#MaterialType").append(
                                            $('<option></option>').val(i).html(type));
                                    }
                                }
                                else if (data.Material != null && data.Material.isImportCustomer == true && data.Material.isLocal == true) {
                                    var int = 1;
                                    $("#MaterialType").html("");
                                    $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                    for (i = 1; i <= 2; i++) {
                                        var type = "";
                                        if (i == 1) {
                                            type = "Local";
                                            i = 1;
                                        }
                                        else if (i == 2) {
                                            type = "Customer Import";
                                            i = 2;
                                        }
                                        $("#MaterialType").append(
                                            $('<option></option>').val(i).html(type));
                                    }
                                }
                                else if (data.Material.isImportCustomer == true) {
                                    $("#MaterialType").val(2);
                                }
                                else if (data.Material.isLocal == true) {
                                    $("#MaterialType").val(1);
                                }
                                else if (data.Material.isImport == true) {
                                    $("#MaterialType").val(3);
                                }
                                if (data.orderDetails != null && data.orderDetails.LotNo != null) {
                                    $("#LOTNo").val(data.orderDetails.LotNo);
                                }
                                debugger;
                                if (data.store != null && data.store.StoreName != null) {
                                    if (data.store.StoreName == "Leather Store" || data.store.StoreName == "Leather Store-Local") {
                                        $("#QTYType").prop("disabled", false);
                                        if (data.Material.SubstanceMasterId != null) {
                                            $('#Substance').val(data.Material.SubstanceMasterId);
                                            $('#Substance').prop("disabled", false);
                                        }
                                        else {
                                            $('#Substance').val(0);
                                            $("#Substance").prop("disabled", true);
                                        }
                                        if ((data != null && (data.Material.GradeMasterId != null || data.Material.GradeMasterId != 0))) {
                                            $('#Grade').val(data.Material.GradeMasterId);
                                            $('#Grade').prop("disabled", false);
                                        }
                                        else {
                                            $('#Grade').val(0);
                                            $("#Grade").prop("disabled", true);
                                        }
                                        $("#QTYType").val(data.Material.UomUnit);
                                        $("#ReceivedType").val(data.Material.UomUnit);
                                        $("#ShortageType").val(data.Material.UomUnit);
                                        $("#RejectedType").val(data.Material.UomUnit);
                                        $("#AcceptedType").val(data.Material.UomUnit);

                                        $("#ReceivedType").prop("disabled", false);
                                        $("#ShortageType").prop("disabled", false);
                                        $("#RejectedType").prop("disabled", false);
                                        $("#AcceptedType").prop("disabled", false);
                                        $("#QtyAsPerPCS").prop("disabled", false);
                                        $("#ReceivedPCS").prop("disabled", false);
                                        $("#ShortagePCS").prop("disabled", false);
                                        $("#RejectedPCS").prop("disabled", false);
                                        $("#AcceptedPCS").prop("disabled", false);
                                        $("#MachineryName").val(0);
                                        $("#MachineryName").prop("disabled", true);

                                    }
                                    else if (data.store.StoreName.trim() == "Maintenance Store") {
                                        $("#MachineryName").prop("disabled", false);
                                        $('#Substance').val(0);
                                        $("#Substance").prop("disabled", true);
                                        $('#Grade').val(0);
                                        $("#Grade").prop("disabled", true);
                                    }
                                    else {
                                        $("#MachineryName").val(0);
                                        $("#MachineryName").prop("disabled", true);
                                        $('#Substance').val(0);
                                        $("#Substance").prop("disabled", true);
                                        $('#Grade').val(0);
                                        $("#Grade").prop("disabled", true);
                                        $("#QTYType").val("");
                                        $("#ReceivedType").val("");
                                        $("#ShortageType").val("");
                                        $("#RejectedType").val("");
                                        $("#AcceptedType").val("");
                                        $("#QTYType").prop("disabled", true);
                                        $("#ReceivedType").prop("disabled", true);
                                        $("#ShortageType").prop("disabled", true);
                                        $("#RejectedType").prop("disabled", true);
                                        $("#AcceptedType").prop("disabled", true);
                                        $("#QtyAsPerPCS").prop("disabled", true);
                                        $("#ReceivedPCS").prop("disabled", true);
                                        $("#ShortagePCS").prop("disabled", true);
                                        $("#RejectedPCS").prop("disabled", true);
                                        $("#AcceptedPCS").prop("disabled", true);
                                    }
                                }
                                else {
                                    $("#MachineryName").val(0);
                                    $("#MachineryName").prop("disabled", true);
                                    $('#Substance').val(0);
                                    $("#Substance").prop("disabled", true);
                                    $('#Grade').val(0);
                                    $("#Grade").prop("disabled", true);
                                    $("#QTYType").val("");
                                    $("#ReceivedType").val("");
                                    $("#ShortageType").val("");
                                    $("#RejectedType").val("");
                                    $("#AcceptedType").val("");
                                    $("#QTYType").prop("disabled", true);
                                    $("#ReceivedType").prop("disabled", true);
                                    $("#ShortageType").prop("disabled", true);
                                    $("#RejectedType").prop("disabled", true);
                                    $("#AcceptedType").prop("disabled", true);
                                    $("#QtyAsPerPCS").prop("disabled", true);
                                    $("#ReceivedPCS").prop("disabled", true);
                                    $("#ShortagePCS").prop("disabled", true);
                                    $("#RejectedPCS").prop("disabled", true);
                                    $("#AcceptedPCS").prop("disabled", true);
                                }
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                var count = 1;
                                var totalQty = 0;
                                var isvalue = false;
                                if (data.SizeRange.length == 0) {
                                    $("#isSizeRamge").val(isvalue);
                                    $("#sizeRangeTable").hide();
                                }
                                else {
                                    isvalue = 1;
                                    $("#isSizeRamge").val(isvalue);
                                    for (var i = 0; i <= data.SizeRange.length - 1 ; i++) {
                                        var size = data.SizeRange[i].Size.trim();
                                        $('#sizeRangeTable tbody tr:first-child').append('<td class="SizeRangeRefValue SizeRangeRefValue' + i + '" style="background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;"> ' + size + ' </td> ');
                                        $('#sizeRangeTable tbody tr:nth-child(2)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Qty_Value' onchange='CalculateTotal(this)' id='Qty_Value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:nth-child(3)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Received_value' onchange='receivedcallChange(this)' id='Received_value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:nth-child(4)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Shortage_value'  id='Shortage_value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:nth-child(5)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Rejectd_value' onchange='rejectedcallChange(this)' id='Rejectd_value" + i + "' value='' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:last').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Accepted_value'  id='Accepted_value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        count++;
                                        totalQty += parseInt(totalQty);
                                    }
                                    $("#sizeRangeTable").show();
                                }
                                $("#TotalCount").val(totalQty);
                            }

                        }
                    });
                }
                else if ($('#GrnType option:selected').text() == "General" && isWithoutIndent == "true") {
                    debugger;
                    var MaterialId = $('#MaterialId').val();
                    var PoOrderID = $("#PoNO").val();
                    var grnno = "";
                    grnno = $("#GrnNo").val();
                    $.ajax({
                        url: '/GRN_DetailNew/FillWithOutIndentMaterialIDBasedPopulateDetails',
                        type: "GET",
                        dataType: "JSON",
                        data: { MaterialID: MaterialId, PoOrderID: PoOrderID, grnno: grnno },
                        success: function (data) {
                            debugger;
                            if (data == "Already Exist") {
                                alert("Already Existed please select another Material.");

                                $("#MaterialType").val("");
                                $("#MaterialId").val("");
                                $("#MaterialId").combobox('destroy');
                                $("#MaterialId").combobox();
                                $("#IONo").val("");
                                $("#IONo").combobox('destroy');
                                $("#IONo").combobox();
                                $("#IndentNo").val("");
                                $("#IndentNo").combobox('destroy');
                                $("#IndentNo").combobox();
                                $("#QtyAsPerDc").val("0");
                                $("#ReceivedQty").val("0");
                                $("#ShortageQty").val("0");
                                $("#RejectedQty").val("");
                                $("#AcceptedQty").val("0");
                                $("#QtyAsPerPCS").val("0");
                                $("#ReceivedPCS").val("0");
                                $("#ShortagePCS").val("0");
                                $("#RejectedPCS").val("0");
                                $("#AcceptedPCS").val("0");
                                $("#QtyAsPerSQFT").val(0);
                                $("#ReceivedSQFT").val(0);
                                $("#ShortageSQFT").val(0);
                                $("#RejectedSQFT").val(0);
                                $("#AcceptedSQFT").val(0);
                                $("#QTYType").val(0);
                                $("#ReceivedType").val(0);
                                $("#ShortageType").val(0);
                                $("#RejectedType").val(0);
                                $("#AcceptedType").val(0);
                                $("#Substance").val(0);
                                $("#Grade").val(0);
                                $("#GroupID").val(0);
                                $("#UOMId").val(0);
                                $("#CategoryId").val(0);
                                $("#PoQty").val(0);
                                $("#QtyExcess").val(0);
                                $("#PendingQty").val(0);
                                $("#ExcessApproval").val(0);
                                $("#Rate").val(0);
                                $("#Value").val(0);
                                $("#ColourId").val("");
                                $("#Stores").val("");
                                $("#MRPMargin").val(0);
                                $("#MRPPrice").val(0);
                                $("#AccessibleValue").val(0);
                                $("#Discount_Per").val(0);
                                $("#Discount_Val").val(0);
                                $("#ExciseDuty_Per").val(0);
                                $("#ExciseDuty_Val").val(0);
                                $("#ST_VAT_CST_Per").val(0);
                                $("#ST_VAT_CST_Val").val(0);
                                $("#Ecess_Per").val(0);
                                $("#Ecess_Val").val(0);
                                $("#SH_Ecess_Per").val(0);
                                $("#SH_Ecess_Val").val(0);
                                $("#TagsPiecesDiscount_Per").val(0);
                                $("#TagsPiecesDiscount_Val").val(0);
                                $("#AmountplusTax").val(0);
                                $("#Surcharge_Per").val(0);
                                $("#Surcharge_Val").val(0);
                                $("#FreightAmount").val(0);
                                $("#InsuranceAmount").val(0);
                                $("#InsuranceAmount").val(0);
                                $("#CustomsDuty").val(0);
                                $("#Pack_Forward").val(0);
                                $("#ServiceTaxPer").val(0);
                                $("#ServiceTax").val(0);
                                $("#TotalCount").text("");
                                $("#OtherCharges").val(0);
                                $("#Transporter").val(0);
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                return false;
                            }
                            else if (data.Message != null) {
                                alert(data.Message);
                                return false;
                            }
                            else {
                                if (data.orderDetails != null && data.orderDetails.LotNo != null) {
                                    $("#LOTNo").val(data.orderDetails.LotNo);
                                }
                                if (data.approvedPriceListExcessPo != null) {
                                    $.each(data.approvedPriceListExcessPo, function (i, approved) {
                                        $("#ExcessApproval").val(approved.POExcessPercentage);
                                    });
                                    $("#ExcessApproval").prop("disabled", true);
                                }
                                $("#Grade").val(data.Material.GradeMasterId);
                                $("#Stores").val(data.Material.StoreMasterId);
                                $("#ColourId").val(data.Material.ColorMasterId);
                               // $("#BuyerSeasonID").val(data.IndentMaterial.BuyerSeason);
                              //  $("#BuyerMasterId").val(data.IndentMaterial.BuyerMasterId);
                                $("#UOMId").val(data.Material.Uom);
                                $("#Substance").val(data.Material.SubstanceMasterId);
                                if (data.Material != null && data.Material.isLocal == true && data.Material.isImport == true) {
                                    var int = 1;
                                    $("#MaterialType").html("");
                                    $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                    for (i = 1; i <= 2; i++) {
                                        var type = "";
                                        if (i == 1) {
                                            type = "Local";
                                        }
                                        else if (i == 2) {
                                            type = "Direct Import";
                                            i = 3;
                                        }
                                        $("#MaterialType").append(
                                            $('<option></option>').val(i).html(type));
                                    }
                                }
                                else if (data.Material != null && data.Material.isImportCustomer == true && data.Material.isImport == true) {
                                    var int = 1;
                                    $("#MaterialType").html("");
                                    $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                    for (i = 1; i <= 2; i++) {
                                        var type = "";
                                        if (i == 1) {
                                            type = "Customer Import";
                                            i = 2;
                                        }
                                        else if (i == 2) {
                                            type = "Direct Import";
                                            i = 3;
                                        }
                                        $("#MaterialType").append(
                                            $('<option></option>').val(i).html(type));
                                    }
                                }
                                else if (data.Material != null && data.Material.isImportCustomer == true && data.Material.isLocal == true) {
                                    var int = 1;
                                    $("#MaterialType").html("");
                                    $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                    for (i = 1; i <= 2; i++) {
                                        var type = "";
                                        if (i == 1) {
                                            type = "Local";
                                            i = 1;
                                        }
                                        else if (i == 2) {
                                            type = "Customer Import";
                                            i = 2;
                                        }
                                        $("#MaterialType").append(
                                            $('<option></option>').val(i).html(type));
                                    }
                                }
                                else if (data.Material.isImportCustomer == true) {
                                    $("#MaterialType").val(2);
                                }
                                else if (data.Material.isLocal == true) {
                                    $("#MaterialType").val(1);
                                }
                                else if (data.Material.isImport == true) {
                                    $("#MaterialType").val(3);
                                }
                                if (data.PurchaseOrder != null) {
                                    if (data.PurchaseOrder.IndentNoDirectPO != null) {
                                        $("#IndentNo").val(data.PurchaseOrder.IndentNoDirectPO);
                                    }
                                    else {
                                        $("#IndentNo").val(data.PurchaseOrder.IndentNo);
                                    }
                                    var curID = data.resultCurrency.LongForm;

                                    var exchangeRate = $("#ExchangeRate").val();
                                    if (curID == "Rupees") {
                                        $("#Currencykey").val(curID);
                                        $("#ExchangeRate").prop('readonly', true);
                                    }
                                    else {
                                        $("#Currencykey").val(curID);
                                        $("#ExchangeRate").prop('readonly', false);
                                    }
                                    var value_ = $("#Value").val();
                                    if (value_ == undefined || value_ == "") {
                                        value_ = 0;
                                    }
                                    var valueinRps = parseFloat(value_) * parseFloat(exchangeRate);
                                    $(".ValueInRps").val(parseFloat((valueinRps)));

                                    $("#PendingQty").val(data.poQty);
                                    $("#PoQty").val(data.PurchaseOrder.Qty);
                                    $("#PoQty").prop("disabled", true);
                                    $("#CategoryId").val(data.PurchaseOrder.Category);
                                    $("#GroupID").val(data.PurchaseOrder.Groupname);
                                    debugger;
                                    $("#SupplierNameId").val(data.PurchaseOrder.Supplier);
                                    $("#QtyAsPerDc").val(0);
                                    $("#Rate").val(data.PurchaseOrder.Rate);
                                    $("#Rate").prop("disabled", true);
                                    $("#Value").val(data.PurchaseOrder.ExRate);
                                    $("#MRPMargin").val(data.PurchaseOrder.MRPMargin);
                                    $("#MRPPrice").val(data.PurchaseOrder.MRPPrice);
                                    $("#AccessibleValue").val(data.PurchaseOrder.AccessibleValue);
                                    $("#Weight").val(data.PurchaseOrder.Weight);
                                    $("#Discount_Per").val(data.PurchaseOrder.Dis);
                                    $("#Discount_Val").val(data.PurchaseOrder.DisAmount);
                                    $("#ExciseDuty_Per").val(data.PurchaseOrder.ExciseDuty);
                                    $("#ExciseDuty_Val").val(data.PurchaseOrder.ExciseDutyAmount);
                                    $("#ST_VAT_CST_Per").val(data.PurchaseOrder.VAT);
                                    $("#ST_VAT_CST_Val").val(data.PurchaseOrder.VATAmt);
                                    $("#Ecess_Per").val(data.PurchaseOrder.Exess);
                                    $("#Ecess_Val").val(data.PurchaseOrder.ExessAmount);
                                    $("#SH_Ecess_Per").val(data.PurchaseOrder.SHExess);
                                    $("#SH_Ecess_Val").val(data.PurchaseOrder.SHExessAmount);
                                    $("#Surcharge_Per").val(data.PurchaseOrder.SurCharge);
                                    $("#Surcharge_Val").val(data.PurchaseOrder.SurChargeAmt);
                                    $("#AmountplusTax").val(data.PurchaseOrder.AmountTax);
                                    $("#FreightAmount").val(data.PurchaseOrder.FreightAmt);
                                    $("#InsuranceAmount").val(data.PurchaseOrder.InsuranceAmount);
                                    $("#CustomsDuty").val(data.PurchaseOrder.CustomsDutyType);
                                    $("#Pack_Forward").val(data.PurchaseOrder.PackForward);
                                    $("#SupplierNameId").val(data.PurchaseOrder.Supplier);
                                    if (data.PurchaseOrder.ServiceTax == null) {
                                        $("#ServiceTax").val(0);
                                    }
                                    $("#QtyAsPerSQFT").val(data.Material.Uom);
                                    $("#RejectedSQFT").val(data.Material.Uom);
                                    $("#ReceivedSQFT").val(data.Material.Uom);
                                    $("#ShortageSQFT").val(data.Material.Uom);
                                    $("#AcceptedSQFT").val(data.Material.Uom);
                                }
                                debugger;
                                if (data.store != null && data.store.StoreName != null) {
                                    if (data.store.StoreName == "Leather Store" || data.store.StoreName == "Leather Store-Local") {
                                        if (data.Material.SubstanceMasterId != null) {
                                            $('#Substance').val(data.Material.SubstanceMasterId);
                                            $('#Substance').prop("disabled", false);
                                        }
                                        else {
                                            $('#Substance').val(0);
                                            $("#Substance").prop("disabled", true);
                                        }
                                        if ((data != null && (data.Material.GradeMasterId != null || data.Material.GradeMasterId != 0))) {
                                            $('#Grade').val(data.Material.GradeMasterId);
                                            $('#Grade').prop("disabled", false);
                                        }
                                        else {
                                            $('#Grade').val(0);
                                            $("#Grade").prop("disabled", true);
                                        }
                                        $("#QTYType").prop("disabled", false);
                                        $("#QTYType").val(data.Material.UomUnit);
                                        $("#ReceivedType").val(data.Material.UomUnit);
                                        $("#ShortageType").val(data.Material.UomUnit);
                                        $("#RejectedType").val(data.Material.UomUnit);
                                        $("#AcceptedType").val(data.Material.UomUnit);

                                        $("#ReceivedType").prop("disabled", false);
                                        $("#ShortageType").prop("disabled", false);
                                        $("#RejectedType").prop("disabled", false);
                                        $("#AcceptedType").prop("disabled", false);
                                        $("#QtyAsPerPCS").prop("disabled", false);
                                        $("#ReceivedPCS").prop("disabled", false);
                                        $("#ShortagePCS").prop("disabled", false);
                                        $("#RejectedPCS").prop("disabled", false);
                                        $("#AcceptedPCS").prop("disabled", false);
                                        $('#MachineryName').val(0);
                                        $("#MachineryName").prop("disabled", true);
                                    }
                                    else if (data.store.StoreName.trim() == "Maintenance Store") {
                                        $("#MachineryName").prop("disabled", false);
                                        $('#Substance').val(0);
                                        $("#Substance").prop("disabled", true);
                                        $('#Grade').val(0);
                                        $("#Grade").prop("disabled", true);
                                    }
                                    else {
                                        $('#MachineryName').val(0);
                                        $("#MachineryName").prop("disabled", true);
                                        $('#Substance').val(0);
                                        $("#Substance").prop("disabled", true);
                                        $('#Grade').val(0);
                                        $("#Grade").prop("disabled", true);
                                        $("#QTYType").val("");
                                        $("#ReceivedType").val("");
                                        $("#ShortageType").val("");
                                        $("#RejectedType").val("");
                                        $("#AcceptedType").val("");
                                        $("#QTYType").prop("disabled", true);
                                        $("#ReceivedType").prop("disabled", true);
                                        $("#ShortageType").prop("disabled", true);
                                        $("#RejectedType").prop("disabled", true);
                                        $("#AcceptedType").prop("disabled", true);
                                        $("#QtyAsPerPCS").prop("disabled", true);
                                        $("#ReceivedPCS").prop("disabled", true);
                                        $("#ShortagePCS").prop("disabled", true);
                                        $("#RejectedPCS").prop("disabled", true);
                                        $("#AcceptedPCS").prop("disabled", true);
                                    }
                                }
                                else {
                                    $("#MachineryName").val(0);
                                    $("#MachineryName").prop("disabled", true);
                                    $('#Substance').val(0);
                                    $("#Substance").prop("disabled", true);
                                    $('#Grade').val(0);
                                    $("#Grade").prop("disabled", true);
                                    $("#QTYType").val("");
                                    $("#ReceivedType").val("");
                                    $("#ShortageType").val("");
                                    $("#RejectedType").val("");
                                    $("#AcceptedType").val("");
                                    $("#QTYType").prop("disabled", true);
                                    $("#ReceivedType").prop("disabled", true);
                                    $("#ShortageType").prop("disabled", true);
                                    $("#RejectedType").prop("disabled", true);
                                    $("#AcceptedType").prop("disabled", true);
                                    $("#QtyAsPerPCS").prop("disabled", true);
                                    $("#ReceivedPCS").prop("disabled", true);
                                    $("#ShortagePCS").prop("disabled", true);
                                    $("#RejectedPCS").prop("disabled", true);
                                    $("#AcceptedPCS").prop("disabled", true);
                                }
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                var count = 1;
                                var totalQty = 0;
                                var isvalue = false;
                                if (data.SizeRange.length == 0) {
                                    $("#isSizeRamge").val(isvalue);
                                    $("#sizeRangeTable").hide();
                                }
                                else {
                                    isvalue = 1;
                                    $("#isSizeRamge").val(isvalue);
                                    for (var i = 0; i <= data.SizeRange.length - 1 ; i++) {
                                        var size = data.SizeRange[i].Size.trim();
                                        $('#sizeRangeTable tbody tr:first-child').append('<td class="SizeRangeRefValue SizeRangeRefValue' + i + '" style="background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;"> ' + size + ' </td> ');
                                        $('#sizeRangeTable tbody tr:nth-child(2)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Qty_Value' onchange='CalculateTotal(this)' id='Qty_Value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:nth-child(3)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Received_value' onchange='receivedcallChange(this)' id='Received_value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:nth-child(4)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Shortage_value'  id='Shortage_value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:nth-child(5)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Rejectd_value' onchange='rejectedcallChange(this)' id='Rejectd_value" + i + "' value='' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:last').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Accepted_value'  id='Accepted_value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        count++;
                                        totalQty += parseInt(totalQty);
                                    }
                                    $("#sizeRangeTable").show();
                                }
                                $("#TotalCount").val(totalQty);


                            }

                        }
                    });
                }
                else if ($('#GrnType option:selected').text() == "Direct GRN") {

                    var MaterialId = $('#MaterialId').val();
                    $.ajax({
                        type: "GET",
                        contentType: "application/json",

                        url: '/GRN_DetailNew/isExistGRNMaterialNameBasedonGRNNO_new',
                        dataType: "JSON",
                        data: { MaterialNameID: MaterialId, GrnNO: $("#GrnNo").val() },
                        success: function (data) {
                            debugger;
                            if (data.Message == "Already Existed") {
                                alert("This Material name already existed this grn no");
                                $("#MaterialType").val("");
                                $("#MaterialId").val("");
                                $("#MaterialId").combobox('destroy');
                                $("#MaterialId").combobox();
                                $("#IONo").val("");
                                $("#IONo").combobox('destroy');
                                $("#IONo").combobox();
                                $("#IndentNo").val("")
                                $("#IndentNo").combobox('destroy');
                                $("#IndentNo").combobox();
                                $("#QtyAsPerDc").val("0");
                                $("#ReceivedQty").val("0");
                                $("#ShortageQty").val("0");
                                $("#RejectedQty").val("");
                                $("#AcceptedQty").val("0");
                                $("#QtyAsPerPCS").val("0");
                                $("#ReceivedPCS").val("0");
                                $("#ShortagePCS").val("0");
                                $("#RejectedPCS").val("0");
                                $("#AcceptedPCS").val("0");
                                $("#QtyAsPerSQFT").val(0);
                                $("#ReceivedSQFT").val(0);
                                $("#ShortageSQFT").val(0);
                                $("#RejectedSQFT").val(0);
                                $("#AcceptedSQFT").val(0);
                                $("#QTYType").val(0);
                                $("#ReceivedType").val(0);
                                $("#ShortageType").val(0);
                                $("#RejectedType").val(0);
                                $("#AcceptedType").val(0);
                                $("#Substance").val(0);
                                $("#Grade").val(0);
                                $("#GroupID").val(0);
                                $("#UOMId").val(0);
                                $("#CategoryId").val(0);
                                $("#PoQty").val(0);
                                $("#QtyExcess").val(0);
                                $("#PendingQty").val(0);
                                $("#ExcessApproval").val(0);
                                $("#Rate").val(0);
                                $("#Value").val(0);
                                $("#ColourId").val("");
                                $("#Stores").val("");
                                $("#MRPMargin").val(0);
                                $("#MRPPrice").val(0);
                                $("#AccessibleValue").val(0);
                                $("#Discount_Per").val(0);
                                $("#Discount_Val").val(0);
                                $("#ExciseDuty_Per").val(0);
                                $("#ExciseDuty_Val").val(0);
                                $("#ST_VAT_CST_Per").val(0);
                                $("#ST_VAT_CST_Val").val(0);
                                $("#Ecess_Per").val(0);
                                $("#Ecess_Val").val(0);
                                $("#SH_Ecess_Per").val(0);
                                $("#SH_Ecess_Val").val(0);
                                $("#TagsPiecesDiscount_Per").val(0);
                                $("#TagsPiecesDiscount_Val").val(0);
                                $("#AmountplusTax").val(0);
                                $("#Surcharge_Per").val(0);
                                $("#Surcharge_Val").val(0);
                                $("#FreightAmount").val(0);
                                $("#InsuranceAmount").val(0);
                                $("#InsuranceAmount").val(0);
                                $("#CustomsDuty").val(0);
                                $("#Pack_Forward").val(0);
                                $("#ServiceTaxPer").val(0);
                                $("#ServiceTax").val(0);
                                $("#TotalCount").text("");
                                $("#OtherCharges").val(0);
                                $("#Transporter").val(0);
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                return false;
                            }
                            else if (data.Message != null) {
                                alert(data.Message);
                                return false;
                            }
                            else {
                                if (data.store != null && data.store.StoreName != null) {
                                    if (data.store.StoreName == "Leather Store" || data.store.StoreName == "Leather Store-Local") {
                                        $("#QTYType").prop("disabled", false);
                                        $("#ReceivedType").prop("disabled", false);
                                        $("#ShortageType").prop("disabled", false);
                                        $("#RejectedType").prop("disabled", false);
                                        $("#AcceptedType").prop("disabled", false);
                                        $("#QtyAsPerPCS").prop("disabled", false);
                                        $("#ReceivedPCS").prop("disabled", false);
                                        $("#ShortagePCS").prop("disabled", false);
                                        $("#RejectedPCS").prop("disabled", false);
                                        $("#AcceptedPCS").prop("disabled", false);
                                        $("#MachineryName").val(0);
                                        $("#MachineryName").prop("disabled", true);
                                    }
                                    else if (data.store.StoreName.trim() == "Maintenance Store") {
                                        $("#MachineryName").prop("disabled", false);
                                        $('#Substance').val(0);
                                        $("#Substance").prop("disabled", true);
                                        $('#Grade').val(0);
                                        $("#Grade").prop("disabled", true);
                                    }
                                    else {
                                        $("#MachineryName").val(0);
                                        $("#MachineryName").prop("disabled", true);
                                        $("#QTYType").val("");
                                        $("#ReceivedType").val("");
                                        $("#ShortageType").val("");
                                        $("#RejectedType").val("");
                                        $("#AcceptedType").val("");
                                        $("#QTYType").prop("disabled", true);
                                        $("#ReceivedType").prop("disabled", true);
                                        $("#ShortageType").prop("disabled", true);
                                        $("#RejectedType").prop("disabled", true);
                                        $("#AcceptedType").prop("disabled", true);
                                        $("#QtyAsPerPCS").prop("disabled", true);
                                        $("#ReceivedPCS").prop("disabled", true);
                                        $("#ShortagePCS").prop("disabled", true);
                                        $("#RejectedPCS").prop("disabled", true);
                                        $("#AcceptedPCS").prop("disabled", true);
                                    }
                                }

                                else {
                                    $("#MachineryName").val(0);
                                    $("#MachineryName").prop("disabled", true);
                                    $("#QTYType").val("");
                                    $("#ReceivedType").val("");
                                    $("#ShortageType").val("");
                                    $("#RejectedType").val("");
                                    $("#AcceptedType").val("");
                                    $("#QTYType").prop("disabled", true);
                                    $("#ReceivedType").prop("disabled", true);
                                    $("#ShortageType").prop("disabled", true);
                                    $("#RejectedType").prop("disabled", true);
                                    $("#AcceptedType").prop("disabled", true);
                                    $("#QtyAsPerPCS").prop("disabled", true);
                                    $("#ReceivedPCS").prop("disabled", true);
                                    $("#ShortagePCS").prop("disabled", true);
                                    $("#RejectedPCS").prop("disabled", true);
                                    $("#AcceptedPCS").prop("disabled", true);
                                }
                                $("#SupplierNameId").html("");
                                $("#SupplierNameId").append("<option value='0'>--Please Select--</option>");
                                $.each(data.supplierItems, function (i, approved) {
                                    $("#SupplierNameId").append('<option value=' + approved.SupplierId + '>' + approved.SupplierName + '</option>');
                                });
                                $.each(data.Material, function (i, city) {
                                    $("#Grade").val(city.GradeMasterId);
                                    $("#Stores").val(city.StoreMasterId);
                                    $("#CategoryId").val(city.MaterialCategoryMasterId);
                                    $("#ColourId").val(city.ColorMasterId);
                                    $("#UOMId").val(city.Uom);
                                    $("#GroupID").val(city.MaterialGroupMasterId);
                                    $("#Substance").val(city.SubstanceMasterId);

                                    $("#Rate").val("");
                                    $("#QtyAsPerSQFT").val(city.Uom);
                                    $("#RejectedSQFT").val(city.Uom);
                                    $("#ReceivedSQFT").val(city.Uom);
                                    $("#ShortageSQFT").val(city.Uom);
                                    $("#AcceptedSQFT").val(city.Uom);
                                    if (city.isLocal == true && city.isImport == true) {
                                        var int = 1;
                                        $("#MaterialType").html("");
                                        $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                        for (i = 1; i <= 2; i++) {
                                            var type = "";
                                            if (i == 1) {
                                                type = "Local";
                                            }
                                            else if (i == 2) {
                                                type = "Direct Import";
                                                i = 3;
                                            }

                                            $("#MaterialType").append(
                                                $('<option></option>').val(i).html(type));
                                        }
                                    }
                                    else if (city.isImportCustomer == true && city.isImport == true) {
                                        var int = 1;
                                        $("#MaterialType").html("");
                                        $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                        for (i = 1; i <= 2; i++) {
                                            var type = "";
                                            if (i == 1) {
                                                type = "Customer Import";
                                                i = 2;
                                            }
                                            else if (i == 2) {
                                                type = "Direct Import";
                                                i = 3;
                                            }
                                            $("#MaterialType").append(
                                                $('<option></option>').val(i).html(type));
                                        }
                                    }
                                    else if (city.isImportCustomer == true && city.isLocal == true) {
                                        var int = 1;
                                        $("#MaterialType").html("");
                                        $("#MaterialType").append($('<option></option>').val(0).html("Please select"));
                                        for (i = 1; i <= 2; i++) {
                                            var type = "";
                                            if (i == 1) {
                                                type = "Local";
                                                i = 1;
                                            }
                                            else if (i == 2) {
                                                type = "Customer Import";
                                                i = 2;
                                            }
                                            $("#MaterialType").append(
                                                $('<option></option>').val(i).html(type));
                                        }
                                    }
                                    else if (city.isImportCustomer == true) {
                                        $("#MaterialType").val(2);
                                    }
                                    else if (city.isLocal == true) {
                                        $("#MaterialType").val(1);
                                    }
                                    else if (city.isImport == true) {
                                        $("#MaterialType").val(3);
                                    }
                                    $("#RejectedSQFT").val(city.Uom);
                                    $("#AcceptedSQFT").val(city.Uom);
                                    if (data.store != null && data.store.StoreName != null && (data.store.StoreName == "Leather Store" || data.store.StoreName == "Leather Store-Local")) {
                                        $("#QTYType").val(city.UomUnit);
                                        $("#ReceivedType").val(city.UomUnit);
                                        $("#ShortageType").val(city.UomUnit);
                                        $("#RejectedType").val(city.UomUnit);
                                        $("#AcceptedType").val(city.UomUnit);
                                        $("#QTYType").prop("disabled", false);
                                        $("#ReceivedType").prop("disabled", false);
                                        $("#ShortageType").prop("disabled", false);
                                        $("#RejectedType").prop("disabled", false);
                                        $("#AcceptedType").prop("disabled", false);
                                        $("#QtyAsPerPCS").prop("disabled", false);
                                        $("#ReceivedPCS").prop("disabled", false);
                                        $("#ShortagePCS").prop("disabled", false);
                                        $("#RejectedPCS").prop("disabled", false);
                                        $("#AcceptedPCS").prop("disabled", false);

                                        if (city.SubstanceMasterId != null) {
                                            $('#Substance').val(city.SubstanceMasterId);
                                            $('#Substance').prop("disabled", false);
                                        }
                                        else {
                                            $('#Substance').val(0);
                                            $("#Substance").prop("disabled", true);
                                        }
                                        if ((city != null && (city.GradeMasterId != null || city.GradeMasterId != 0))) {
                                            $('#Grade').val(city.GradeMasterId);
                                            $('#Grade').prop("disabled", false);
                                        }
                                        else {
                                            $('#Grade').val(0);
                                            $("#Grade").prop("disabled", true);
                                        }
                                    }
                                    else {
                                        $('#Substance').val(0);
                                        $("#Substance").prop("disabled", true);
                                        $('#Grade').val(0);
                                        $("#Grade").prop("disabled", true);
                                        $("#QTYType").val("");
                                        $("#ReceivedType").val("");
                                        $("#ShortageType").val("");
                                        $("#RejectedType").val("");
                                        $("#AcceptedType").val("");
                                        $("#QTYType").prop("disabled", true);
                                        $("#ReceivedType").prop("disabled", true);
                                        $("#ShortageType").prop("disabled", true);
                                        $("#RejectedType").prop("disabled", true);
                                        $("#AcceptedType").prop("disabled", true);
                                        $("#QtyAsPerPCS").prop("disabled", true);
                                        $("#ReceivedPCS").prop("disabled", true);
                                        $("#ShortagePCS").prop("disabled", true);
                                        $("#RejectedPCS").prop("disabled", true);
                                        $("#AcceptedPCS").prop("disabled", true);
                                    }
                                });
                                var curID = data.resultCurrency.LongForm;
                                if (curID == "Rupees") {
                                    $("#Currencykey").val(curID);
                                    $("#ExchangeRate").prop('readonly', true);
                                }
                                else {
                                    $("#Currencykey").val(curID);
                                    $("#ExchangeRate").prop('readonly', false);
                                }
                                var exchangeRate = $("#ExchangeRate").val();
                                var value_ = $("#Value").val();
                                var valueinRps = parseFloat(value_) * parseFloat(exchangeRate);
                                $(".ValueInRps").val(parseFloat((valueinRps)));
                                $('#sizeRangeTable tbody tr').each(function () {
                                    $(this).find("td:not(:first)").remove();
                                });
                                var count = 1;
                                var totalQty = 0;
                                var isvalue = false;
                                if (data.SizeRange.length == 0) {
                                    $("#isSizeRamge").val(isvalue);
                                    $("#sizeRangeTable").hide()
                                }
                                else {
                                    isvalue = 1;
                                    $("#isSizeRamge").val(isvalue);
                                    for (var i = 0; i <= data.SizeRange.length - 1 ; i++) {
                                        var size = data.SizeRange[i].SizeRange.trim();
                                        $('#sizeRangeTable tbody tr:first-child').append('<td class="SizeRangeRefValue SizeRangeRefValue' + i + '" style="background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;"> ' + size + ' </td> ');
                                        $('#sizeRangeTable tbody tr:nth-child(2)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Qty_Value' onchange='CalculateTotal(this)' id='Qty_Value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:nth-child(3)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Received_value' onchange='receivedcallChange(this)' id='Received_value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:nth-child(4)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Shortage_value'  id='Shortage_value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:nth-child(5)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Rejectd_value' onchange='rejectedcallChange(this)' id='Rejectd_value" + i + "' value='' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        $('#sizeRangeTable tbody tr:last').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Accepted_value'  id='Accepted_value" + i + "' value='0' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                                        count++;
                                        totalQty += parseInt(totalQty);
                                    }
                                    $("#sizeRangeTable").show();
                                }
                                $("#TotalCount").val(totalQty);
                                $("AutoDisplay").show();
                            }
                        },
                        error: function (ex) {
                            alert(ex.Message);
                            console.log(ex.Message);
                        }
                    });
                }
                $("#GrnNo").prop("disabled", true);
            }
        });
    });

    $(function () {
        $('#SupplierNameId').change(function () {
            if (($('#SupplierNameId').val() == "" || $('#SupplierNameId').val() == 0)) {
                alert("Please select supplier name");
                return false;
            }
            else if ($("#MaterialId").val() == "" || $("#MaterialId").val() == 0) {
                $('#SupplierNameId').val("");
                alert("Please select material name");
                return false;
            }
            else {
                $.ajax({
                    url: '/GRN_DetailNew/GetApprovedPriceDetails',
                    type: "GET",
                    dataType: "JSON",
                    contentType: "application/json; charset=utf-8",
                    data: { SupplierID: $('#SupplierNameId').val(), MaterialID: $("#MaterialId").val(), MaterialType: $("#MaterialType").val() },
                    success: function (data) {

                        if (data.approvedPrieList == null) {
                            $(".ValueInRps").val("0");
                            $("#Rate").val("0");
                        }
                        else {
                            $("#Rate").val(data.approvedPrieList.PriceRs);
                            var curID = "";
                            if (data.resultCurrency != null) {
                                curID = data.resultCurrency.LongForm;
                                if (curID == "Rupees") {
                                    $("#Currencykey").val(curID);
                                    $("#ExchangeRate").prop('readonly', true);
                                }

                                else {
                                    $("#Currencykey").val(curID);
                                    $("#ExchangeRate").prop('readonly', false);
                                }
                            }
                            var qty = $("#AcceptedQty").val();
                            var amount = 0;
                            ampunt = parseFloat(qty) * parseFloat(data.approvedPrieList.PriceRs);
                            $("#Value").val(Math.round(parseFloat(ampunt)).toFixed(3));
                            if ($("#Discount_Per").val() != "") {
                                var dis_Per = $("#Discount_Per").val();
                                var amount = $("#AmountplusTax").val();
                                var materialValue = $("#Value").val();
                                var totalAmount = amount
                                var DiscountValue = ((parseFloat(dis_Per) / 100) * parseFloat(materialValue));

                                $("#AmountplusTax").val(parseFloat(amount) - Math.round(parseFloat(DiscountValue)).toFixed(3));
                            }
                            if ($("#GST").val() != "") {
                                var GST_Per = $("#GST").val();
                                var amount = $(".ValueInRps").val();
                                var GSTValue = ((parseFloat(GST_Per) / 100) * parseFloat(amount));
                                $('#GSTValue').val(GSTValue.toFixed(3));
                                $("#AmountplusTax").val(parseFloat(amount) + Math.round(parseFloat(GSTValue)).toFixed(3));
                            }
                        }
                        Supplier_lotGet();
                    },
                    error: function () {

                    }
                });
            }

        });
    });
    function exchangeRate() {
        $.ajax({
            url: '/GRN_DetailNew/GetApprovedPriceDetails',
            type: "GET",
            dataType: "JSON",
            contentType: "application/json; charset=utf-8",
            data: { SupplierID: $('#SupplierNameId').val(), MaterialID: $("#MaterialId").val() },
            success: function (data) {

                if (data.approvedPrieList == null) {
                    $(".ValueInRps").val("0");
                }
                else {
                    var curID = data.approvedPrieList.CurrencyID;
                    console.log(curID);
                    var euro_ = 75.98;
                    var dollar_ = 64.07;
                    if (curID == 2) {
                        $("#MRPMargin").prop('readonly', true);
                        $("#MRPPrice").prop('readonly', true);
                        var exchangeRate = $("#ExchangeRate").val();
                        var value_ = $("#Value").val();
                        var valueinRps = exchangeRate * dollar_;
                        var valueinRps_ = value_ * valueinRps;
                        $(".ValueInRps").val(parseFloat((valueinRps_)));
                    }
                    else if (curID == 3) {
                        $("#MRPMargin").prop('readonly', true);
                        $("#MRPPrice").prop('readonly', true);
                        var exchangeRate = $("#ExchangeRate").val();
                        var value_ = $("#Value").val();
                        var valueinRps = exchangeRate * euro_;
                        var valueinRps_ = value_ * valueinRps;
                        $(".ValueInRps").val(parseFloat((valueinRps_)));
                    }
                    else {
                        $("#MRPMargin").prop('readonly', false);
                        $("#MRPPrice").prop('readonly', false);
                        $("#ExchangeRate").prop('readonly', true);
                        var exchangeRate = $("#ExchangeRate").val();
                        var value_ = $("#Value").val();
                        var valueinRps = exchangeRate * value_;
                        $(".ValueInRps").val(parseFloat((valueinRps)));
                        $("#MRPMargin").val(data.approvedPrieList.MRPMargin);
                        $("#MRPPrice").val(data.approvedPrieList.MRPPrice);
                    }
                }

            },
            error: function () {

            }
        });
    }

    function CalculateTotal(agr1) {

    }
    function receivedcallChange(arg) {
        var str = arg.id;
        str = str.replace(/[^0-9]+/ig, "");
        var qty_val = $("#Qty_Value" + str + "").val();
        var total = 0;
        total = parseFloat(qty_val) - arg.value;
        $("#Shortage_value" + str + "").val(total);
    }
    function rejectedcallChange(arg1) {
        var str = arg1.id;
        str = str.replace(/[^0-9]+/ig, "");
        var qty_val = $("#Qty_Value" + str + "").val();
        var shortage_val = $("#Shortage_value" + str + "").val();

        var total = 0;
        total = (parseFloat(qty_val) - (parseFloat(arg1.value) + parseFloat(shortage_val)));
        $("#Accepted_value" + str + "").val(total);
        var add = 0;
        $('#sizeRangeTable tbody tr').find('.Accepted_value').each(function () {
            add += Number($(this).val());
        });
        $("#TotalCount").text(add);
        $("#TotalCount").prop("disabled", true);

    }

    $(function () {
        $("#ReceivedPCS").keyup(function () {
            $('#AcceptedPCS').val($('#ReceivedPCS').val());
            $('#AcceptedQty').val($('#ReceivedQty').val());
        });
    });
    $(function () {
        $("#ExchangeRate").keyup(function () {
            var exchangeRate = $("#ExchangeRate").val();
            var value_ = $("#Value").val();
            var valueinRps = parseFloat(value_) * parseFloat(exchangeRate);
            $(".ValueInRps").val(parseFloat((valueinRps)));

        });
    });

    $(function () {
        $("#ReceivedQty").keyup(function () {
            $('#AcceptedQty').val($('#ReceivedQty').val());
            var ReceivedQTy = $('#ReceivedQty').val();
            var PoQty = $('#PoQty').val();
            var QtyAsPerDc = $('#QtyAsPerDc').val();
            var shortageamount = 0;
            shortageamount = (parseFloat(QtyAsPerDc) - parseFloat(ReceivedQTy));
            $('#ShortageQty').val(shortageamount);
            var UOM = parseInt($('#ReceivedSQFT').val());
            var uomPrimary = parseInt($('#ReceivedType').val());

            $('#ShortageSQFT').val(UOM);
            $('#ShortageType').val(uomPrimary);
            var poqty = $("#PoQty").val();
            var qtyAsPerDC = 0;
            var pendingQty = 0;

            var received = 0;
            var dbpendingQty = 0;
            var pendingQty = $('#PendingQty').val();
            var MaterialId = $('#MaterialId').val();
            var PoOrderID = $("#PoNO").val();
            var PONumber = "";
            if (PoOrderID == "") {
                PONumber = $("#AutomaticPONumber").val();
                PoOrderID = 0;
            }
            $.ajax({
                url: '/GRN_DetailNew/FillWithOutIndentMaterialIDBasedPopulateDetails',
                type: "GET",
                dataType: "JSON",
                data: { MaterialID: MaterialId, PoOrderID: PoOrderID, AutoMaticPoNumber: PONumber },
                success: function (data) {
                    debugger;                 

                    if ((data != null || data != undefined || data != "undefined") && parseFloat(data.poQty) != 0) {
                        received = $("#ReceivedQty").val();
                        poqty = 0;
                        poqty = $("#PoQty").val();
                        dbpendingQty = 0;
                        dbpendingQty = data.poQty;
                        qtyAsPerDC = $("#QtyAsPerDc").val();
                        pendingQty = data.poQty;
                        var excessApproval = 0;
                        var checkexcess = 0;
                        var excessqty = 0;
                        excessApproval = $("#ExcessApproval").val();
                        excessqty = ((parseFloat(excessApproval) / 100) * parseFloat(poqty));
                        $("#QtyExcess").val(parseFloat(excessqty));
                        checkexcess = parseFloat(dbpendingQty) + parseFloat(excessqty);                      
                        var pendingqtytotal = 0;
                        if (parseFloat(dbpendingQty) ==parseFloat( received)) {
                            pendingqtytotal = parseFloat(dbpendingQty) - parseFloat(received);
                            $("#PendingQty").val(pendingqtytotal.toFixed(2));
                        }
                        else {
                            if (parseFloat(checkexcess) < parseFloat(received)) {
                                $(".AutoDisplay").hide();
                                alert("Exceeding PO Qty");                              
                                $('#ReceivedQty').css('border-color', 'red'); $('#ReceivedQty').focus();
                                return false;
                            }
                            else if (parseFloat(checkexcess) - parseFloat(received) < 0) {
                                $(".AutoDisplay").hide();
                                alert("Exceeding PO Qty");                                
                                $('#ReceivedQty').css('border-color', 'red'); $('#ReceivedQty').focus();
                                return false;
                            }
                            else if (parseFloat(checkexcess) - parseFloat(received) < 0) {
                                $(".AutoDisplay").hide();
                                alert("Exceeding PO Qty");
                               
                                $('#ReceivedQty').css('border-color', 'red'); $('#ReceivedQty').focus();
                                return false;
                            }
                            else if (parseFloat(checkexcess) > parseFloat(poqty)) {
                                alert("Exceeding PO Qty");
                                var answer = confirm('Are you sure you want to continue this?');
                                if (answer) {
                                    $('#ReceivedQty').css('border-color', '');
                                    $("#PendingQty").val(parseFloat(data.poQty) - parseFloat(received));
                                    $(".AutoDisplay").show();
                                }
                                else {
                                    $(".AutoDisplay").hide();
                                    $('#ReceivedQty').css('border-color', 'red'); $('#ReceivedQty').focus();
                                    return false;
                                }

                            }
                            else {
                                $('#ReceivedQty').css('border-color', '');
                                if (checkexcess > received) {
                                    var pendingqtytotal = 0
                                    pendingqtytotal = parseFloat(checkexcess) - parseFloat(received);
                                    $("#PendingQty").val(pendingqtytotal.toFixed(2));
                                    $(".AutoDisplay").show();
                                }
                                else {
                                    var pendingqtytotal = 0
                                    pendingqtytotal = parseFloat(received) - parseFloat(checkexcess);
                                    $("#PendingQty").val(pendingqtytotal.toFixed(2));
                                    $(".AutoDisplay").show();
                                }

                            }
                        }
                    }
                    else {

                        received = $("#ReceivedQty").val();
                        poqty = 0;
                        poqty = $("#PoQty").val();
                        dbpendingQty = 0;
                        qtyAsPerDC = $("#QtyAsPerDc").val();
                        if (parseFloat(qtyAsPerDC) < parseFloat(received)) {
                            alert("Exceeding PO Qty");
                            $(".AutoDisplay").hide();
                            $('#QtyAsPerDc').css('border-color', 'red'); $('#QtyAsPerDc').focus();
                            return false;
                        }
                        else if (parseFloat(qtyAsPerDC) - parseFloat(received) < 0) {
                            alert("Exceeding PO Qty");
                            $(".AutoDisplay").hide();
                            $('#QtyAsPerDc').css('border-color', 'red'); $('#QtyAsPerDc').focus();
                            return false;
                        }
                        else if (parseFloat(qtyAsPerDC) > parseFloat(poqty) && parseFloat(received) > parseFloat(poqty)) {
                            alert("Exceeding PO Qty");
                            var answer = confirm('Press OK to continue or else Cancel?');
                            if (answer) {
                                $('#QtyAsPerDc').css('border-color', '');
                                $("#PendingQty").val(parseFloat(data.poQty) - parseFloat(received));
                                $(".AutoDisplay").show();
                            }
                            else {
                                $(".AutoDisplay").hide();
                                $('#QtyAsPerDc').css('border-color', 'red'); $('#QtyAsPerDc').focus();
                                return false;
                            }

                        }
                        else {
                            $('#QtyAsPerDc').css('border-color', '');
                            $("#PendingQty").val(parseFloat(data.poQty) - parseFloat(received));
                            $(".AutoDisplay").show();
                        }
                        received = $("#ReceivedQty").val();
                        var qtyAsPerDC = $("#QtyAsPerDc").val();
                        var pending = 0;
                        if (data.poQty == 0) {
                            pending = parseFloat(qtyAsPerDC) - parseFloat(received);
                            $("#PendingQty").val(pending);
                        }
                        else {
                            $("#PendingQty").val(parseFloat(data.poQty) - parseFloat(pending));
                        }
                    }

                }

            });

        });
    });
    $(function () {
        $("#QtyAsPerDc").blur(function () {
            var poQtyValue = 0;
            var Excess_Val = 0;
            var grnqty = 0;
            var QtyAsPerDc = 0; var total = 0;
            poQtyValue = $("#PoQty").val();
            Excess_Val = $('#ExcessApproval').val();
            total = (parseFloat(poQtyValue) / 100) * parseFloat(Excess_Val);
            grnqty = parseFloat(total) + parseFloat(poQtyValue);
            QtyAsPerDc = $("#QtyAsPerDc").val();
            if (QtyAsPerDc > grnqty) {
                alert("Exceeding PO Excess %");
                $(".AutoDisplay").hide();
                return false;
            }
            else {
                $("AutoDisplay").show();
            }
        });
    })
    $(function () {
        $("#RejectedQty").keyup(function () {
            var qtyAsPerDC = 0;
            var pendingQty = 0;

            var received = 0;
            var dbpendingQty = 0;
            var ReceivedAMt = $('#ReceivedQty').val();
            var RejectedAMt = $('#RejectedQty').val();
            var dcqty = $('#QtyAsPerDc').val();
            var Total = parseFloat(ReceivedAMt) - parseFloat(RejectedAMt);
            //$('#PendingQty').val(Total);
            $('#AcceptedQty').val(Total);
            var shortageamount = 0;
            shortageamount = (parseFloat(dcqty) - parseFloat(ReceivedAMt));
            $('#ShortageQty').val(shortageamount);
            var rate = $("#Rate").val();
            var value_total = parseFloat(dcqty) * parseFloat(rate);
            $('#AcceptedQty').val(Total);
            $("#AmountplusTax").val((value_total).toFixed(3));
            $("#Value").val(value_total);
            var poqty = $("#PoQty").val();
            var qtyAsPerDC = $("#QtyAsPerDc").val();
            var pendingQty = 0;
            var MaterialId = $('#MaterialId').val();
            var PoOrderID = $("#PoNO").val();

            $.ajax({
                url: '/GRN_DetailNew/FillWithOutIndentMaterialIDBasedPopulateDetails',
                type: "GET",
                dataType: "JSON",
                data: { MaterialID: MaterialId, PoOrderID: PoOrderID },
                success: function (data) {
                    debugger;
                    var iserror = 0;
                    if (parseFloat(data.poQty) != 0) {
                        var received = $("#AcceptedQty").val();
                        var poqty = $("#PoQty").val();
                        var rejectedqty = $("#RejectedQty").val();
                        var qtyAsPerDC = $('#QtyAsPerDc').val();
                        pendingQty = data.poQty;
                        dbpendingQty = 0;
                        dbpendingQty = data.poQty;
                        qtyAsPerDC = $("#QtyAsPerDc").val();
                        pendingQty = data.poQty;
                        var excessApproval = 0;
                        var checkexcess = 0;
                        var excessqty = 0;
                        excessApproval = $("#ExcessApproval").val();
                        excessqty = ((parseFloat(excessApproval) / 100) * parseFloat(poqty));
                        $("#QtyExcess").val(parseFloat(excessqty));
                        checkexcess = parseFloat(dbpendingQty) + parseFloat(excessqty);
                        var pendingqtytotal = 0;
                        if (parseFloat(pendingQty) == parseFloat(received)) {
                            pendingqtytotal = parseFloat(pendingQty) - parseFloat(received);
                            $("#PendingQty").val(pendingqtytotal.toFixed(2));
                        }
                        else
                        {

                        
                        if (parseFloat(checkexcess) < parseFloat(rejectedqty) && iserror == 0) {
                            alert("Exceeding PO Qty");
                            $("#AutoDisplay").hide();
                            $('#QtyAsPerDc').css('border-color', 'red'); $('#QtyAsPerDc').focus();
                            iserror = 1;
                            return false;
                        }
                        else if (parseFloat(checkexcess) - parseFloat(rejectedqty) < 0 && iserror == 0) {
                            alert("Exceeding PO Qty");
                            $("#AutoDisplay").hide();
                            iserror = 1
                            $('#QtyAsPerDc').css('border-color', 'red'); $('#QtyAsPerDc').focus();
                            return false;
                        }

                        else {
                            $("#AutoDisplay").show();
                            $('#QtyAsPerDc').css('border-color', '');
                            //if (parseFloat(data.poQty) < parseFloat(rejectedqty)) {
                            //    $("#QtyExcess").val(parseFloat(data.poQty) - parseFloat(received));
                            //}
                            //else {
                            //    $("#PendingQty").val(parseFloat(data.poQty) - parseFloat(received));
                            //}
                            var pendingqtytotal = 0
                            if (checkexcess > received) {
                                pendingqtytotal = parseFloat(checkexcess)-parseFloat(received);
                                $("#PendingQty").val(pendingqtytotal.toFixed(2));
                                $("#AutoDisplay").show();
                            }
                            else {
                                pendingqtytotal = parseFloat(checkexcess) - parseFloat(received);
                                $("#PendingQty").val(pendingqtytotal.toFixed(2));
                                $("#AutoDisplay").show();
                            }
                        }
                    }

                    }
                    if (parseFloat(qtyAsPerDC) > parseFloat(poqty) && parseFloat(received) > parseFloat(poqty) && iserror == 0) {
                        alert("Exceeding PO Qty");
                        iserror = 1;
                        var answer = confirm('Press OK to continue or else Cancel?');
                        if (answer) {
                            $('#QtyAsPerDc').css('border-color', '');
                            if (parseFloat(data.poQty) < parseFloat(received)) {
                                $("#QtyExcess").val(parseFloat(received) - parseFloat(data.poQty));
                                $("#AutoDisplay").show();
                            }
                            else {
                                $("#PendingQty").val(parseFloat(data.poQty) - parseFloat(received));
                                $("#AutoDisplay").show();
                            }
                        }
                        else {
                            $("#AutoDisplay").hide();
                            $('#QtyAsPerDc').css('border-color', 'red'); $('#QtyAsPerDc').focus();
                            return false;
                        }
                    }
                }
            });
            if (parseFloat(ReceivedAMt) <= parseFloat(dcqty)) {
                if (parseFloat(poqty) < parseFloat(ReceivedAMt)) {
                    $('#QtyExcess').val((parseFloat(pendingQty) + parseFloat(ReceivedAMt) - parseFloat(poqty)));
                    $('#ShortageQty').val(parseFloat(shortageamount).toFixed(2));
                    $('#PendingQty').val(0);
                    $("#AutoDisplay").show();
                }
                else {
                    $('#PendingQty').val(parseFloat(poqty) - (parseFloat(pendingQty) + parseFloat(ReceivedAMt)));
                    $('#ShortageQty').val(parseFloat(shortageamount).toFixed(2));
                    $('#QtyExcess').val(0);
                    $("#AutoDisplay").show();
                }

            }
            else if (parseFloat(ReceivedAMt) >= parseFloat(dcqty)) {
                $('#QtyExcess').val(parseFloat(ReceivedAMt) - parseFloat(dcqty));
                $('#PendingQty').val(0);
                $("#AutoDisplay").show();
            }
            else {
                if (parseFloat(pendingQty) < 0) {
                    $('#PendingQty').val(parseFloat(pendingQty));
                }
                else {
                    $('#PendingQty').val(parseFloat(pendingQty) - parseFloat(ReceivedAMt));
                }

                alert("Exceeding PO Qty");
                $('#QtyAsPerDc').css('border-color', 'red'); $('#QtyAsPerDc').focus();
                $("#AutoDisplay").hide();
                return false;
            }
            if (parseFloat($('#PendingQty').val()) < 0) {
                alert("Exceeding PO Qty");
                $("#AutoDisplay").hide();
                $('#QtyAsPerDc').css('border-color', 'red'); $('#QtyAsPerDc').focus();
                return false;
            }
        });
    });


    $(function () {
        $("#RejectedPCS").keyup(function () {
            var ReceivedPCSAMt = $('#ReceivedPCS').val();
            var RejectedPCSAMt = $('#RejectedPCS').val();
            var Total = parseFloat(ReceivedPCSAMt) - parseFloat(RejectedPCSAMt);
            $('#AcceptedPCS').val(Total);
        });
    });

    function CalculateTotal(agr1) {

        var buyerTotalcnt = 0;
        var add = 0;
        $("#sizeRangeTable .qty_Total").each(function () {
            add += Number($(this).val());
        });
        if ($('#TotalCount').val() == "") {
            buyerTotalcnt = 0;
        }
        else {
            buyerTotalcnt = $('#TotalCount').val();
        }
        $('#TotalCount').text(add);
    }
    function Calculate() {

        var buyerTotalcnt = 0;
        var add = 0;
        $("#sizeRangeTable .qty_Total").each(function () {
            add += Number($(this).val());
        });
        if ($('#TotalCount').val() == "") {
            buyerTotalcnt = 0;
        }
        else {
            buyerTotalcnt = $('#TotalCount').val();
        }
        $('#TotalCount').text(add);
    }

    $(function () {
        $("#ExciseDuty_Per").blur(function () {
            var discountPer = $("#ExciseDuty_Per").val();
            if (discountPer != "") {
                var materialValue = $("#Value").val();
                var Value = ((parseFloat(discountPer) / 100) * parseFloat(materialValue));
                var Value_ = (Value);
                $('#ExciseDuty_Val').val(Value_.toFixed(3));
                var discount_Val = $('#Discount_Val').val();
                var STVATAmount = $('#ST_VAT_CST_Val').val();
                var ExessAmount = $('#Ecess_Val').val();
                var SHAmt = $('#SH_Ecess_Val').val();
                var tagsPiecesDiscount = 0;
                tagsPiecesDiscount = $("#TagsPiecesDiscount_Val").val();
                if (tagsPiecesDiscount == "" || tagsPiecesDiscount == undefined) {
                    tagsPiecesDiscount = 0;
                }
                if (discount_Val == "") {
                    discount_Val = 0;
                }
                if (STVATAmount == "") {
                    STVATAmount = 0;
                }
                if (ExessAmount == "") {
                    ExessAmount = 0;
                }
                if (SHAmt == "") {
                    SHAmt = 0;
                }
                var amount = ((parseFloat(Value_) + parseFloat(materialValue) + parseFloat(STVATAmount) + parseFloat(ExessAmount) + parseFloat(SHAmt)) - (parseFloat(tagsPiecesDiscount) + parseFloat(discount_Val)));
                //Freight cost calculation
                var serviceTax = 0;
                var FreightAmount = $("#FreightAmount").val();
                var InsuranceAmount = $("#InsuranceAmount").val();
                var CustomsDuty = $("#CustomsDuty").val();
                var Pack_Forward = $("#Pack_Forward").val();
                serviceTax = $("#ServiceTax").val();
                var OtherCharges = $("#OtherCharges").val();
                var Transporter = $("#Transporter").val();
                var amountTax = 0;
                amountTax = $("#AmountplusTax").val();

                if (FreightAmount == "") {
                    FreightAmount = 0;
                }
                if (InsuranceAmount == "") {
                    InsuranceAmount = 0;
                }
                if (CustomsDuty == "") {
                    CustomsDuty = 0;
                }
                if (Pack_Forward == "") {
                    Pack_Forward = 0;
                }
                if (serviceTax == "") {
                    serviceTax = 0;
                }
                if (OtherCharges == "") {
                    OtherCharges = 0;
                }
                if (Transporter == "") {
                    Transporter = 0;
                }
                if (amountTax == "") {
                    amountTax = 0;
                }
                var totalAmountTaxDiscount = parseFloat(amount) + parseFloat(FreightAmount) + parseFloat(InsuranceAmount) + parseFloat(CustomsDuty) + parseFloat(Pack_Forward) + parseFloat(serviceTax) + parseFloat(OtherCharges) + parseFloat(Transporter);
                $('#AmountplusTax').val((totalAmountTaxDiscount).toFixed(3));

            }
        });
    });
    $(".Received_value").blur(function () {
    });
    $(function () {
        $("#Ecess_Per").blur(function () {
            var discountPer = $("#Ecess_Per").val();
            if (discountPer != "") {
                var materialValue = $("#Value").val();
                var Value = ((parseFloat(discountPer) / 100) * parseFloat(materialValue));
                var Value_ = (Value);
                $('#Ecess_Val').val(Value_.toFixed(3));
                var discount_Val = $('#Discount_Val').val();
                var STVATAmount = $('#ST_VAT_CST_Val').val();
                var ExessAmount = $('#ExciseDuty_Val').val();
                var SHAmt = $('#SH_Ecess_Val').val();
                var tagsPiecesDiscount = 0;
                tagsPiecesDiscount = $("#TagsPiecesDiscount_Val").val();
                if (tagsPiecesDiscount == "" || tagsPiecesDiscount == undefined) {
                    tagsPiecesDiscount = 0;
                }
                if (discount_Val == "") {
                    discount_Val = 0;
                }
                if (STVATAmount == "") {
                    STVATAmount = 0;
                }
                if (ExessAmount == "") {
                    ExessAmount = 0;
                }
                if (SHAmt == "") {
                    SHAmt = 0;
                }
                var amount = ((parseFloat(Value_) + parseFloat(materialValue) + parseFloat(STVATAmount) + parseFloat(ExessAmount) + parseFloat(SHAmt)) - (parseFloat(tagsPiecesDiscount) + parseFloat(discount_Val)));
                //Freight cost calculation
                var serviceTax = 0;
                var FreightAmount = $("#FreightAmount").val();
                var InsuranceAmount = $("#InsuranceAmount").val();
                var CustomsDuty = $("#CustomsDuty").val();
                var Pack_Forward = $("#Pack_Forward").val();
                serviceTax = $("#ServiceTax").val();
                var OtherCharges = $("#OtherCharges").val();
                var Transporter = $("#Transporter").val();
                var amountTax = 0;
                amountTax = $("#AmountplusTax").val();

                if (FreightAmount == "") {
                    FreightAmount = 0;
                }
                if (InsuranceAmount == "") {
                    InsuranceAmount = 0;
                }
                if (CustomsDuty == "") {
                    CustomsDuty = 0;
                }
                if (Pack_Forward == "") {
                    Pack_Forward = 0;
                }
                if (serviceTax == "") {
                    serviceTax = 0;
                }
                if (OtherCharges == "") {
                    OtherCharges = 0;
                }
                if (Transporter == "") {
                    Transporter = 0;
                }
                if (amountTax == "") {
                    amountTax = 0;
                }
                var totalAmountTaxDiscount = parseFloat(amount) + parseFloat(FreightAmount) + parseFloat(InsuranceAmount) + parseFloat(CustomsDuty) + parseFloat(Pack_Forward) + parseFloat(serviceTax) + parseFloat(OtherCharges) + parseFloat(Transporter);
                $('#AmountplusTax').val((totalAmountTaxDiscount).toFixed(3));
            }
        });
    });
    $(function () {
        $("#SH_Ecess_Per").blur(function () {
            var discountPer = $("#SH_Ecess_Per").val();
            if (discountPer != "") {
                var materialValue = $("#Value").val();
                var Value = ((parseFloat(discountPer) / 100) * parseFloat(materialValue));
                var Value_ = (Value);
                $('#SH_Ecess_Val').val(Value_.toFixed(3));
                var discount_Val = $('#Discount_Val').val();
                var STVATAmount = $('#ST_VAT_CST_Val').val();
                var ExessAmount = $('#ExciseDuty_Val').val();
                var SHAmt = $('#Ecess_Val').val();
                var tagsPiecesDiscount = 0;
                tagsPiecesDiscount = $("#TagsPiecesDiscount_Val").val();
                if (tagsPiecesDiscount == "" || tagsPiecesDiscount == undefined) {
                    tagsPiecesDiscount = 0;
                }
                if (discount_Val == "") {
                    discount_Val = 0;
                }
                if (STVATAmount == "") {
                    STVATAmount = 0;
                }
                if (ExessAmount == "") {
                    ExessAmount = 0;
                }
                if (SHAmt == "") {
                    SHAmt = 0;
                }
                var amount = ((parseFloat(Value_) + parseFloat(materialValue) + parseFloat(STVATAmount) + parseFloat(ExessAmount) + parseFloat(SHAmt)) - (parseFloat(tagsPiecesDiscount) + parseFloat(discount_Val)));
                //Freight cost calculation
                var serviceTax = 0;
                var FreightAmount = $("#FreightAmount").val();
                var InsuranceAmount = $("#InsuranceAmount").val();
                var CustomsDuty = $("#CustomsDuty").val();
                var Pack_Forward = $("#Pack_Forward").val();
                serviceTax = $("#ServiceTax").val();
                var OtherCharges = $("#OtherCharges").val();
                var Transporter = $("#Transporter").val();
                var amountTax = 0;
                amountTax = $("#AmountplusTax").val();

                if (FreightAmount == "") {
                    FreightAmount = 0;
                }
                if (InsuranceAmount == "") {
                    InsuranceAmount = 0;
                }
                if (CustomsDuty == "") {
                    CustomsDuty = 0;
                }
                if (Pack_Forward == "") {
                    Pack_Forward = 0;
                }
                if (serviceTax == "") {
                    serviceTax = 0;
                }
                if (OtherCharges == "") {
                    OtherCharges = 0;
                }
                if (Transporter == "") {
                    Transporter = 0;
                }
                if (amountTax == "") {
                    amountTax = 0;
                }
                var totalAmountTaxDiscount = parseFloat(amount) + parseFloat(FreightAmount) + parseFloat(InsuranceAmount) + parseFloat(CustomsDuty) + parseFloat(Pack_Forward) + parseFloat(serviceTax) + parseFloat(OtherCharges) + parseFloat(Transporter);
                $('#AmountplusTax').val((totalAmountTaxDiscount).toFixed(3));
            }
        });
    });


    
    $("#TCS").change(function () {
        debugger;
        var TCS_Per = $("#TCS").val();
        if (TCS_Per != "") {
            var amount = $("#TotalCost").val();
            var TCSValue = ((parseFloat(TCS_Per) / 100) * parseFloat(amount));
            $('#TCSValue').val(TCSValue.toFixed(2));
            $("#NetTotal").val(parseFloat(amount) + parseFloat(TCSValue));
        }

    });


    $("#GST").change(function () {
        var GST_Per = $("#GST").val();
        debugger;
        if (GST_Per != "") {
            var amount = $(".ValueInRps").val();
            var GSTValue = ((parseFloat(GST_Per) / 100) * parseFloat(amount));
            $('#GSTValue').val(GSTValue.toFixed(2));

            //if (($("#SurchargesValue").val() != "") || ($("#SurchargesValue").val() != 0)) {
            //    var SurchargesValue = $('#SurchargesValue').val();
            //    $("#AmountplusTax").val(parseFloat(amount) + Math.round(parseFloat(GSTValue)) + Math.round(parseFloat(SurchargesValue).toFixed(2)));
            //}
            //else {
            //    $("#AmountplusTax").val(parseFloat(amount) + Math.round(parseFloat(GSTValue).toFixed(2)));
            //}

            //SGST and CGST calculation

            var SGST_Per = parseFloat(GST_Per / 2);
            console.log(SGST_Per);
            $("#SGST").val(SGST_Per);
            $("#CGST").val(SGST_Per);
            var SGSTVal_ = $("#SGST").val();
            var SGSTValue = ((parseFloat(SGSTVal_) / 100) * parseFloat(amount));
            $('#SGSTValue').val(SGSTValue.toFixed(2));
            $('#CGSTValue').val(SGSTValue.toFixed(2));
            $("#AmountplusTax").val(SGSTValue + SGSTValue);
        }
        else {
            $("#AmountplusTax").val(0);
        }
    });



    $(function () {
        $("#IGST").change(function () {
           
            var IGST_Per = $("#IGST").val();
            debugger;
            if (IGST_Per != "") {
                var amount = $(".ValueInRps").val();
                var IGSTValue = ((parseFloat(IGST_Per) / 100) * parseFloat(amount));
                $('#IGSTValue').val(IGSTValue.toFixed(2));
                var SGSTValue = 0;
                var CGSTValue = 0;
                var ImportIGSTValue_ = 0;
                var SurchargesValue_ = 0;
                SGSTValue = $("#SGSTValue").val();
                CGSTValue = $("#CGSTValue").val();
                ImportIGSTValue_ = $("#ImportIGSTValue").val();
                SurchargesValue_ = $("#SurchargesValue").val();
                if (ImportIGSTValue_ == "" || ImportIGSTValue_ == undefined) {
                    ImportIGSTValue_ = 0
                }
                if (CGSTValue == "" || CGSTValue == undefined) {
                    CGSTValue = 0
                }
                if (SGSTValue == "" || SGSTValue == undefined) {
                    SGSTValue = 0
                }
                if (SurchargesValue_ == "" || SurchargesValue_ == undefined) {
                    SurchargesValue_ = 0
                }
                $("#AmountplusTax").val((parseFloat(SGSTValue) + parseFloat(CGSTValue) + parseFloat(IGSTValue) + parseFloat(ImportIGSTValue_) + parseFloat(SurchargesValue_)));


            }
        });

        $("#Surcharges").change(function () {
           
            var IGSTValue = $("#IGSTValue").val();
            debugger;
            if (IGSTValue != "") {
                var amount = $(".ValueInRps").val();
                var Surcharges_Per = $("#Surcharges").val();
                var SurchargesValue = ((parseFloat(Surcharges_Per) / 100) * parseFloat(amount));
                $('#SurchargesValue').val(SurchargesValue.toFixed(2));
                var SGSTValue = 0;
                var CGSTValue = 0;
                var IGSTValue_ = 0;
                var ImportIGSTValue_ = 0
                var SurchargesValue_ = 0;
                SGSTValue = $("#SGSTValue").val();
                CGSTValue = $("#CGSTValue").val();
                IGSTValue_ = $("#IGSTValue").val();
                ImportIGSTValue_ = $("#ImportIGSTValue").val();

                SurchargesValue_ = $("#SurchargesValue").val();
                if (IGSTValue_ == "" || IGSTValue_ == undefined) {
                    IGSTValue_ = 0
                }
                if (CGSTValue == "" || CGSTValue == undefined) {
                    CGSTValue = 0
                }
                if (ImportIGSTValue_ == "" || ImportIGSTValue_ == undefined) {
                    ImportIGSTValue_ = 0
                }
                if (SGSTValue == "" || SGSTValue == undefined) {
                    SGSTValue = 0
                }
                if (SurchargesValue_ == "" || SurchargesValue_ == undefined) {
                    SurchargesValue_ = 0
                }
                $("#AmountplusTax").val((parseFloat(SGSTValue) + parseFloat(CGSTValue) + parseFloat(IGSTValue) + parseFloat(ImportIGSTValue_) + parseFloat(SurchargesValue_)));

            }
        });
    });

    $(function () {
        $("#ImportIGST").change(function () {

            var Import_Per = $("#ImportIGST").val();
            debugger;
            if (Import_Per != "") {
                var amount = $(".ValueInRps").val();
                var Import_Value = ((parseFloat(Import_Per) / 100) * parseFloat(amount));
                $('#ImportIGSTValue').val(Import_Value.toFixed(2));

                var SGSTValue = 0;
                var CGSTValue = 0;
                var IGSTValue_ = 0;
                var ImportIGSTValue_ = 0;
                var SurchargesValue_ = 0;
                SGSTValue = $("#SGSTValue").val();
                CGSTValue = $("#CGSTValue").val();
                IGSTValue_ = $("#IGSTValue").val();
                ImportIGSTValue_ = $("#ImportIGSTValue").val();
                SurchargesValue_ = $("#SurchargesValue").val();
                if (Import_Value == "" || Import_Value == undefined) {
                    Import_Value = 0;
                }
                else {
                    Import_Value = Import_Value.toFixed(2)
                }
                if (IGSTValue_ == "" || IGSTValue_ == undefined) {
                    IGSTValue_ = 0
                }
                if (CGSTValue == "" || CGSTValue == undefined) {
                    CGSTValue = 0
                }
                if (SGSTValue == "" || SGSTValue == undefined) {
                    SGSTValue = 0
                }
                if (ImportIGSTValue_ == "" || ImportIGSTValue_ == undefined) {
                    ImportIGSTValue_ = 0
                }
                if (SurchargesValue_ == "" || SurchargesValue_ == undefined) {
                    SurchargesValue_ = 0
                }
                $("#AmountplusTax").val((parseFloat(SGSTValue)) + (parseFloat(CGSTValue)) + (parseFloat(IGSTValue_)) + (parseFloat(ImportIGSTValue_)) + (parseFloat(SurchargesValue_).toFixed(2)));

            }
        });

        //$("#Surcharges").change(function () {
        //    var Import_Value = $("#ImportIGSTValue").val();
        //    if (Import_Value != "") {
        //        var amount = $(".ValueInRps").val();
        //        var Surcharges_Per = $("#Surcharges").val();
        //        var SurchargesValue = ((parseFloat(Surcharges_Per) / 100) * parseFloat(amount));
        //        $('#SurchargesValue').val(SurchargesValue.toFixed(2));
        //        $("#AmountplusTax").val(parseFloat(amount) + Math.round(parseFloat(Import_Value)) + Math.round(parseFloat(SurchargesValue)));
        //    }
        //});
    });


    $(function () {
        $("#FreightAmount").change(function () {

            if (($("#FreightAmount").val() != "") && ($("#FreightAmtPercent").val() != "")) {
                var Freight_Amt = $("#FreightAmount").val();
                var Freight_Per = $("#FreightAmtPercent").val();
                var FreightValue = ((parseFloat(Freight_Per) / 100) * parseFloat(Freight_Amt));
                $("#FreightTaxAmt").val(parseFloat(Freight_Amt) + Math.round(parseFloat(FreightValue)));
                var FAmt = $("#FreightTaxAmt").val();
                $("#TotalAmount").val(FAmt);
            }
            else if (($("#FreightAmount").val() != "") && (($("#FreightAmtPercent").val() == "") || ($("#FreightAmtPercent").val() == 0))) {
                var Freight_Amt = $("#FreightAmount").val();
                $("#FreightTaxAmt").val(parseFloat(Freight_Amt));
                var FAmt = $("#FreightTaxAmt").val();
                $("#TotalAmount").val(FAmt);
            }
            else {
                $("#FreightTaxAmt").val("0");
            }
        });
        $("#FreightAmtPercent").change(function () {
            var Freight_Amt = $("#FreightAmount").val();
            var Freight_Per = $("#FreightAmtPercent").val();
            var FreightValue = ((parseFloat(Freight_Per) / 100) * parseFloat(Freight_Amt));
            $("#FreightTaxAmt").val(parseFloat(Freight_Amt) + Math.round(parseFloat(FreightValue)));
            var FAmt = $("#FreightTaxAmt").val();
            $("#TotalAmount").val(FAmt);
        });
    });
    $(function () {
        $("#InsuranceAmount").change(function () {
            if (($("#InsuranceAmount").val() != "") && ($("#InsuranceAmtPercent").val() != "")) {
                var Insur_Amt = $("#InsuranceAmount").val();
                var Insur_Per = $("#InsuranceAmtPercent").val();
                var Insur_Value = ((parseFloat(Insur_Per) / 100) * parseFloat(Insur_Amt));
                $("#InsuranceTaxAmt").val(parseFloat(Insur_Amt) + Math.round(parseFloat(Insur_Value)));
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt);
                $("#TotalAmount").val(total);
            }
            else if (($("#InsuranceAmount").val() != "") && (($("#InsuranceAmtPercent").val() == "") || ($("#InsuranceAmtPercent").val() == 0))) {
                var Insur_Amt = $("#InsuranceAmount").val();
                $("#InsuranceTaxAmt").val(parseFloat(Insur_Amt));
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt);
                $("#TotalAmount").val(total);
            }
            else {
                $("#InsuranceTaxAmt").val("0");
            }
        });
        $("#InsuranceAmtPercent").change(function () {
            var Insur_Amt = $("#InsuranceAmount").val();
            var Insur_Per = $("#InsuranceAmtPercent").val();
            var Insur_Value = ((parseFloat(Insur_Per) / 100) * parseFloat(Insur_Amt));
            $("#InsuranceTaxAmt").val(parseFloat(Insur_Amt) + Math.round(parseFloat(Insur_Value)));
            var InsAmt = $("#InsuranceTaxAmt").val();
            var FAmt = $("#FreightTaxAmt").val();
            var total = parseFloat(FAmt) + parseFloat(InsAmt);
            $("#TotalAmount").val(total);
        });
    });
    $(function () {
        $("#CustomsDuty").change(function () {
            if (($("#CustomsDuty").val() != "") && ($("#CustomDutyPercent").val() != "")) {
                var Custom_Amt = $("#CustomsDuty").val();
                var Custom_Per = $("#CustomDutyPercent").val();
                var Custom_Value = ((parseFloat(Custom_Per) / 100) * parseFloat(Custom_Amt));
                $("#CustomDutyTax").val(parseFloat(Custom_Amt) + Math.round(parseFloat(Custom_Value)));
                var CusAmt = $("#CustomDutyTax").val();
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt);
                $("#TotalAmount").val(total);
            }
            else if (($("#CustomsDuty").val() != "") && (($("#CustomDutyPercent").val() == "") || ($("#CustomDutyPercent").val() == 0))) {
                var Custom_Amt = $("#CustomsDuty").val();
                $("#CustomDutyTax").val(parseFloat(Custom_Amt));
                var CusAmt = $("#CustomDutyTax").val();
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt);
                $("#TotalAmount").val(total);
            }
            else {
                $("#CustomDutyTax").val("0");
            }
        });
        $("#CustomDutyPercent").change(function () {
            var Custom_Amt = $("#CustomsDuty").val();
            var Custom_Per = $("#CustomDutyPercent").val();
            var Custom_Value = ((parseFloat(Custom_Per) / 100) * parseFloat(Custom_Amt));
            $("#CustomDutyTax").val(parseFloat(Custom_Amt) + Math.round(parseFloat(Custom_Value)));
            var CusAmt = $("#CustomDutyTax").val();
            var InsAmt = $("#InsuranceTaxAmt").val();
            var FAmt = $("#FreightTaxAmt").val();
            var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt);
            $("#TotalAmount").val(total);
        });
    });
    $(function () {
        $("#OtherCharges").change(function () {
            if (($("#OtherCharges").val() != "") && ($("#ClearingChargePercent").val() != "")) {
                var Clear_Amt = $("#OtherCharges").val();
                var Clear_Per = $("#ClearingChargePercent").val();
                var Clear_Value = ((parseFloat(Clear_Per) / 100) * parseFloat(Clear_Amt));
                $("#ClearingChargeTax").val(parseFloat(Clear_Amt) + Math.round(parseFloat(Clear_Value)));
                var ClrAmt = $("#ClearingChargeTax").val();
                var CusAmt = $("#CustomDutyTax").val();
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt) + parseFloat(ClrAmt);
                $("#TotalAmount").val(total);
            }
            else if (($("#OtherCharges").val() != "") && (($("#ClearingChargePercent").val() == "") || ($("#ClearingChargePercent").val() == 0))) {
                var Clear_Amt = $("#OtherCharges").val();
                $("#ClearingChargeTax").val(parseFloat(Clear_Amt));
                var ClrAmt = $("#ClearingChargeTax").val();
                var CusAmt = $("#CustomDutyTax").val();
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt) + parseFloat(ClrAmt);
                $("#TotalAmount").val(total);
            }
            else {
                $("#ClearingChargeTax").val("0");
            }
        });
        $("#ClearingChargePercent").change(function () {
            var Clear_Amt = $("#OtherCharges").val();
            var Clear_Per = $("#ClearingChargePercent").val();
            var Clear_Value = ((parseFloat(Clear_Per) / 100) * parseFloat(Clear_Amt));
            $("#ClearingChargeTax").val(parseFloat(Clear_Amt) + Math.round(parseFloat(Clear_Value)));
            var ClrAmt = $("#ClearingChargeTax").val();
            var CusAmt = $("#CustomDutyTax").val();
            var InsAmt = $("#InsuranceTaxAmt").val();
            var FAmt = $("#FreightTaxAmt").val();
            var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt) + parseFloat(ClrAmt);
            $("#TotalAmount").val(total);
        });
    });
    $(function () {
        $("#Pack_Forward").change(function () {
            if (($("#Pack_Forward").val() != "") && ($("#PackforwardPercent").val() != "")) {
                var Pack_FwdAmt = $("#Pack_Forward").val();
                var Pack_FwdPer = $("#PackforwardPercent").val();
                var Pack_FwdValue = ((parseFloat(Pack_FwdPer) / 100) * parseFloat(Pack_FwdAmt));
                $("#PackforwardTax").val(parseFloat(Pack_FwdAmt) + Math.round(parseFloat(Pack_FwdValue)));
                var PackAmt = $("#PackforwardTax").val();
                var ClrAmt = $("#ClearingChargeTax").val();
                var CusAmt = $("#CustomDutyTax").val();
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt) + parseFloat(ClrAmt) + parseFloat(PackAmt);
                $("#TotalAmount").val(total);
            }
            else if (($("#Pack_Forward").val() != "") && (($("#PackforwardPercent").val() == "") || ($("#PackforwardPercent").val() == 0))) {
                var Pack_FwdAmt = $("#Pack_Forward").val();
                $("#PackforwardTax").val(parseFloat(Pack_FwdAmt));
                var PackAmt = $("#PackforwardTax").val();
                var ClrAmt = $("#ClearingChargeTax").val();
                var CusAmt = $("#CustomDutyTax").val();
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt) + parseFloat(ClrAmt) + parseFloat(PackAmt);
                $("#TotalAmount").val(total);
            }
            else {
                $("#PackforwardTax").val("0");
            }
        });
        $("#PackforwardPercent").change(function () {
            var Pack_FwdAmt = $("#Pack_Forward").val();
            var Pack_FwdPer = $("#PackforwardPercent").val();
            var Pack_FwdValue = ((parseFloat(Pack_FwdPer) / 100) * parseFloat(Pack_FwdAmt));
            $("#PackforwardTax").val(parseFloat(Pack_FwdAmt) + Math.round(parseFloat(Pack_FwdValue)));
            var PackAmt = $("#PackforwardTax").val();
            var ClrAmt = $("#ClearingChargeTax").val();
            var CusAmt = $("#CustomDutyTax").val();
            var InsAmt = $("#InsuranceTaxAmt").val();
            var FAmt = $("#FreightTaxAmt").val();
            var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt) + parseFloat(ClrAmt) + parseFloat(PackAmt);
            $("#TotalAmount").val(total);
        });
    });
    $(function () {
        $("#ServiceTaxPer").change(function () {
            if (($("#ServiceTaxPer").val() != "") && ($("#ServiceTax").val() != 0)) {
                var Service_Per = $("#ServiceTaxPer").val();
                var Service_Amt = $("#ServiceTax").val();
                var Service_Value = ((parseFloat(Service_Amt) / 100) * parseFloat(Service_Per));
                $("#ServiceChargeTax").val(parseFloat(Service_Per) + Math.round(parseFloat(Service_Value)));
                var SerAmt = $("#ServiceChargeTax").val();
                var PackAmt = $("#PackforwardTax").val();
                var ClrAmt = $("#ClearingChargeTax").val();
                var CusAmt = $("#CustomDutyTax").val();
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt) + parseFloat(ClrAmt) + parseFloat(PackAmt) + parseFloat(SerAmt);
                $("#TotalAmount").val(total);
            }
            else if (($("#ServiceTaxPer").val() != "") && (($("#ServiceTax").val() == "") || ($("#ServiceTax").val() == 0))) {
                var Service_Per = $("#ServiceTaxPer").val();
                $("#ServiceChargeTax").val(parseFloat(Service_Per));
                var SerAmt = $("#ServiceChargeTax").val();
                var PackAmt = $("#PackforwardTax").val();
                var ClrAmt = $("#ClearingChargeTax").val();
                var CusAmt = $("#CustomDutyTax").val();
                var InsAmt = $("#InsuranceTaxAmt").val();
                var FAmt = $("#FreightTaxAmt").val();
                var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt) + parseFloat(ClrAmt) + parseFloat(PackAmt) + parseFloat(SerAmt);
                $("#TotalAmount").val(total);
            }
            else {
                $("#ServiceChargeTax").val("0");
            }
        });
        $("#ServiceTax").change(function () {
            var Service_Per = $("#ServiceTaxPer").val();
            var Service_Amt = $("#ServiceTax").val();
            var Service_Value = ((parseFloat(Service_Amt) / 100) * parseFloat(Service_Per));
            $("#ServiceChargeTax").val(parseFloat(Service_Per) + Math.round(parseFloat(Service_Value)));
            var SerAmt = $("#ServiceChargeTax").val();
            var PackAmt = $("#PackforwardTax").val();
            var ClrAmt = $("#ClearingChargeTax").val();
            var CusAmt = $("#CustomDutyTax").val();
            var InsAmt = $("#InsuranceTaxAmt").val();
            var FAmt = $("#FreightTaxAmt").val();
            var total = parseFloat(FAmt) + parseFloat(InsAmt) + parseFloat(CusAmt) + parseFloat(ClrAmt) + parseFloat(PackAmt) + parseFloat(SerAmt);
            $("#TotalAmount").val(total);
        });
    });

    $(function () {
        $("#Discount_Per").change(function () {
            debugger;
            var totalcost_ = 0;
            var finalGrnvalue = 0;
            totalcost_ = $("#TotalCost").val();
            var Discount_Per = $("#Discount_Per").val();
            if ((Discount_Per != "") || (Discount_Per != 0)) {
                var amount = $("#NetTotal").val();
                if ((amount != "") || (amount != 0)) {
                    console.log(Discount_Per);
                    console.log(amount);
                    var Discount_Value = ((parseFloat(Discount_Per) / 100) * parseFloat(amount));
                    console.log(Discount_Value);
                    $('#Discount_Val').val(Discount_Value.toFixed(2));
                    //  finalGrnvalue = totalcost_ - Discount_Value;
                    // $("#NetTotal").val(finalGrnvalue.toFixed());
                }
            }

            $("#NetTotal").val();
        });
    });

    /*landing cost calculation*/
    $(function () {
        $("#AmountplusTax").blur(function () {
            var totalB = $("#AmountplusTax").val();
            var totalA = $("#Value").val();
            var total = parseFloat(totalA) + parseFloat(totalB);
            $("#TotalCost").val(total.toFixed(2));

            //  }
        });
    });
    $("#TotalAmount").blur(function () {

        var totalC = $("#TotalAmount").val();
        if ((totalC != "") || (totalC != 0)) {
            var totalA = $("#ValueInRps").val();
            var totalB = $("#AmountplusTax").val();
            var total = parseFloat(totalA) + parseFloat(totalB) + parseFloat(totalC);
            $("#TotalCost").val(total.toFixed(2));
            $("#NetTotal").val(total.toFixed(2));

        }
        else {
            var totalA = $("#ValueInRps").val();
            var totalB = $("#AmountplusTax").val();
            var total = parseFloat(totalA) + parseFloat(totalB) + parseFloat(totalC);
            $("#TotalCost").val(total.toFixed(2));
            $("#NetTotal").val(total.toFixed(2));

        }
    });
    $("#Discount_Val").blur(function () {
        debugger;
        var Discount = $("#Discount_Val").val();
        if ((Discount != "") || (Discount != 0)) {
            var totalA = $("#ValueInRps").val();
            var totalB = $("#AmountplusTax").val();
            var totalC = $("#TotalAmount").val();
            // if ((totalB != 0) && (totalA != 0) && (totalC != 0)) {
            var total = (parseFloat(totalA) + parseFloat(totalB) + parseFloat(totalC)) - parseFloat(Discount);
            $("#TotalCost").val(total.toFixed(2));
            //}
        }
    });
    $("#TagsPiecesDiscount").blur(function () {
        var tagDiscount = $("#TagsPiecesDiscount").val();
        if ((tagDiscount != "") || (tagDiscount != 0)) {
            var totalA = $("#Value").val();
            var totalB = $("#AmountplusTax").val();
            var totalC = $("#TotalAmount").val();
            var Discount = $("#Discount_Val").val();
            //if ((totalB != 0) && (totalA != 0) && (totalC != 0) && (tagDiscount != 0)) {
            var total = (parseFloat(totalA) + parseFloat(totalB) + parseFloat(totalC)) - (parseFloat(Discount) + parseFloat(tagDiscount));
            $("#TotalCost").val(total.toFixed(2));
            //}
        }

    });
    $('.allow_decimal').keypress(function (event) {
        var $this = $(this);
        if ((event.which != 46 || $this.val().indexOf('.') != -1) &&
           ((event.which < 48 || event.which > 57) &&
           (event.which != 0 && event.which != 8))) {
            event.preventDefault();
        }

        var text = $(this).val();
        //debugger;
        if ((event.which == 46) && (text.indexOf('.') == -1)) {
            setTimeout(function () {
                if ($this.val().substring($this.val().indexOf('.')).length > 3) {
                    $this.val($this.val().substring(0, $this.val().indexOf('.') + 3));
                }
            }, 1);
        }

        if ((text.indexOf('.') != -1) &&
            (text.substring(text.indexOf('.')).length > 2) &&
            (event.which != 0 && event.which != 8) &&
            ($(this)[0].selectionStart >= text.length - 2)) {
            event.preventDefault();
        }
    });

    $('.allow_decimal').bind("paste", function (e) {
        debugger;
        var text = e.originalEvent.clipboardData.getData('Text');
        if ($.isNumeric(text)) {
            if ((text.substring(text.indexOf('.')).length > 3) && (text.indexOf('.') > -1)) {
                e.preventDefault();
                $(this).val(text.substring(0, text.indexOf('.') + 3));
            }
        }
        else {
            e.preventDefault();
        }
    });

    $(function () {
      
        $("#TagsPiecesDiscount_Val").blur(function () {

            var discountPer = $("#TagsPiecesDiscount_Val").val();
            var materialValue = $("#Value").val();
            materialValue = materialValue - discountPer;
            $("#Value").val(materialValue.toFixed(3));
            var ST_VAT_CST_Per = $("#ST_VAT_CST_Per").val();
            var Value = ((parseFloat(ST_VAT_CST_Per) / 100) * materialValue);
            var Value_ = (Value);
            $('#ST_VAT_CST_Val').val(Value_.toFixed(3));
            var discount_Val = $('#Discount_Val').val();
            var ExciseDutyAmount = $('#ExciseDuty_Val').val();
            var STVATAmount = 0;
            STVATAmount = $("#ST_VAT_CST_Val").val();
            var ExessAmount = $('#Ecess_Val').val();
            var SHAmt = $('#SH_Ecess_Val').val();
            var Surcharge_Val = 0;
            Surcharge_Val = $("#Surcharge_Val").val();
            if (ExciseDutyAmount == "") {
                ExciseDutyAmount = 0;
            }
            if (STVATAmount == "") {
                STVATAmount = 0;
            }
            if (ExessAmount == "") {
                ExessAmount = 0;
            }
            if (SHAmt == "") {
                SHAmt = 0;
            }
            if (discount_Val == "") {
                discount_Val = 0;
            }
            var amount = ((parseFloat(materialValue) + parseFloat(STVATAmount) + parseFloat(ExessAmount) + parseFloat(SHAmt) + parseFloat(ExciseDutyAmount) - (parseFloat(discountPer) + parseFloat(Surcharge_Val))));

            //Freight cost calculation
            var serviceTax = 0;
            var FreightAmount = $("#FreightAmount").val();
            var InsuranceAmount = $("#InsuranceAmount").val();
            var CustomsDuty = $("#CustomsDuty").val();
            var Pack_Forward = $("#Pack_Forward").val();
            serviceTax = $("#ServiceTax").val();
            var OtherCharges = $("#OtherCharges").val();
            var Transporter = $("#Transporter").val();

            if (FreightAmount == "") {
                FreightAmount = 0;
            }
            if (InsuranceAmount == "") {
                InsuranceAmount = 0;
            }
            if (CustomsDuty == "") {
                CustomsDuty = 0;
            }
            if (Pack_Forward == "") {
                Pack_Forward = 0;
            }
            if (serviceTax == "") {
                serviceTax = 0;
            }
            if (OtherCharges == "") {
                OtherCharges = 0;
            }
            if (Transporter == "") {
                Transporter = 0;
            }
            if (Surcharge_Val == "") {
                Surcharge_Val = 0;
            }
            var totalAmountTaxDiscount = parseFloat(amount) + parseFloat(FreightAmount) + parseFloat(InsuranceAmount) + parseFloat(CustomsDuty) + parseFloat(Pack_Forward) + parseFloat(serviceTax) + parseFloat(OtherCharges) + parseFloat(Transporter);
            $('#AmountplusTax').val((totalAmountTaxDiscount.toFixed(3)));


        });
    });


    $(function () {
        $("#GrnType").change(function () {
            if ($('#GrnType option:selected').text() == "General") {
                $("#LOTNo").val(""); $("#IndentNo").val("0"); $("#IONo").val(""); $("#Stores").val("");
                $("#MaterialName").val(""); $("#QtyAsPerDc").val("0"); $("#ReceivedQty").val("0");
                $("#ShortageQty").val("0"); $("#RejectedQty").show(); $("#AcceptedQty").val("0"); $("#QtyAsPerSQFT").val("");
                $("#ReceivedSQFT").val(""); $("#ShortageSQFT").val(""); $("#RejectedSQFT").val(""); $("#AcceptedSQFT").val("");
                $("#QtyAsPerPCS").val("0"); $("#ReceivedPCS").val("0"); $("#ShortagePCS").show(); $("#RejectedPCS").val("0");
                $("#AcceptedPCS").show(); $("#QTYType").val(""); $("#ReceivedType").val(""); $("#ShortageType").val("");
                $("#RejectedType").val(); $("#AcceptedType").val(""); $("#PendingQty").val("0"); $("#Weight").val("0");
                $("#PoQty").val("0"); $("#QtyExcess").val(""); $("#ExcessApproval").val("0"); $("#GeneralRemarks").val("");
                $("#Rate").val(); $("#Value").val(""); $("#MRPMargin").val(""); $("#MRPPrice").val("0"); $("#AccessibleValue").val("0");
                $("#Discount_Per").val("0"); $("#Discount_Val").val("0"); $("#ExciseDuty_Per").val("0"); $("#ExciseDuty_Val").val("");
                $("#ST_VAT_CST_Per").val("0"); $("#ST_VAT_CST_Val").val("0"); $("#Ecess_Per").val("0"); $("#Ecess_Val").val();
                $("#SH_Ecess_Per").val("0"); $("#SH_Ecess_Val").val("0"); $("#TagsPiecesDiscount_Per").val("0"); $("#TagsPiecesDiscount_Val").val("0");
                $("#AmountplusTax").val("0"); $("#Surcharge_Per").val("0"); $("#Surcharge_Val").val("0"); $("#CategoryId").val();
                $("#IfGroupIsMaintenance").val(""); $("#ColourId").val(); $("#UOMId").val(); $("#StoreLocation").val(""); $("#GeneralRemarks").val();
                $("#Substance").val(""); $("#Grade").val(""); $("#GroupID").val("");

                $("#AutomaticPonumber").hide();
                $("#PoNumber").show();
                $("#Pono_").show();
                $("#AutomaticPono_").hide();
            }
            else if ($('#GrnType option:selected').text() == "Direct GRN") {
                $("#PoNumber").hide();
                $("#AutomaticPonumber").show();
                $("#AutomaticPONumber").show();
                $("#Pono_").hide();
                $("#AutomaticPono_").show();
                $("#IONo").val("");
                $("#Stores").val("");
                $("#MaterialName").val(""); $("#QtyAsPerDc").val("0"); $("#ReceivedQty").val("0");
                $("#ShortageQty").val("0"); $("#RejectedQty").show(); $("#AcceptedQty").val("0"); $("#QtyAsPerSQFT").val("");
                $("#ReceivedSQFT").val("0"); $("#ShortageSQFT").val(""); $("#RejectedSQFT").val(""); $("#AcceptedSQFT").val("");
                $("#QtyAsPerPCS").val("0"); $("#ReceivedPCS").val("0"); $("#ShortagePCS").show(); $("#RejectedPCS").val("0");
                $("#AcceptedPCS").show("0"); $("#QTYType").val(""); $("#ReceivedType").val(""); $("#ShortageType").val("");
                $("#RejectedType").val(); $("#AcceptedType").val(""); $("#PendingQty").val("0"); $("#Weight").val("0");
                $("#PoQty").val("0"); $("#QtyExcess").val("0"); $("#ExcessApproval").val("0"); $("#GeneralRemarks").val("");
                $("#Rate").val(); $("#Value").val("0"); $("#MRPMargin").val("0"); $("#MRPPrice").val("0"); $("#AccessibleValue").val("0");
                $("#Discount_Per").val("0"); $("#Discount_Val").val(); $("#ExciseDuty_Per").val("0"); $("#ExciseDuty_Val").val("0");
                $("#ST_VAT_CST_Per").val("0"); $("#ST_VAT_CST_Val").val("0"); $("#Ecess_Per").val("0"); $("#Ecess_Val").val();
                $("#SH_Ecess_Per").val("0"); $("#SH_Ecess_Val").val("0"); $("#TagsPiecesDiscount_Per").val("0"); $("#TagsPiecesDiscount_Val").val("0");
                $("#AmountplusTax").val("0"); $("#Surcharge_Per").val("0"); $("#Surcharge_Val").val("0"); $("#CategoryId").val();
                $("#IfGroupIsMaintenance").val(""); $("#ColourId").val(); $("#UOMId").val();
                $("#GeneralRemarks").val();
                $("#Substance").val(""); $("#Grade").val(""); $("#GroupID").val("");
            }
            else {
                $("#PoNumber").show();
                $("#AutomaticPonumber").hide();
                $("#AutomaticPONumber").hide();
                $("#Pono_").show();
                $("#AutomaticPono_").hide();
                $("#LOTNo").val(""); $("#IndentNo").val(""); $("#IONo").val(""); $("#Stores").val("");
                $("#MaterialName").val(""); $("#QtyAsPerDc").val(""); $("#ReceivedQty").val("");
                $("#ShortageQty").val(""); $("#RejectedQty").show(); $("#AcceptedQty").val(""); $("#QtyAsPerSQFT").val("");
                $("#ReceivedSQFT").val(""); $("#ShortageSQFT").val(""); $("#RejectedSQFT").val(""); $("#AcceptedSQFT").val("");
                $("#QtyAsPerPCS").val(""); $("#ReceivedPCS").val(""); $("#ShortagePCS").show(); $("#RejectedPCS").val("");
                $("#AcceptedPCS").show(); $("#QTYType").val(""); $("#ReceivedType").val(""); $("#ShortageType").val("");
                $("#RejectedType").val(); $("#AcceptedType").val(""); $("#PendingQty").val(); $("#Weight").val("");
                $("#PoQty").val(""); $("#QtyExcess").val(""); $("#ExcessApproval").val(); $("#GeneralRemarks").val("");
                $("#Rate").val(); $("#Value").val(""); $("#MRPMargin").val(""); $("#MRPPrice").val(""); $("#AccessibleValue").val();
                $("#Discount_Per").val(""); $("#Discount_Val").val(); $("#ExciseDuty_Per").val(""); $("#ExciseDuty_Val").val("");
                $("#ST_VAT_CST_Per").val(""); $("#ST_VAT_CST_Val").val(); $("#Ecess_Per").val(""); $("#Ecess_Val").val();
                $("#SH_Ecess_Per").val(""); $("#SH_Ecess_Val").val(); $("#TagsPiecesDiscount_Per").val(""); $("#TagsPiecesDiscount_Val").val("");
                $("#AmountplusTax").val(""); $("#Surcharge_Per").val(); $("#Surcharge_Val").val(""); $("#CategoryId").val();
                $("#IfGroupIsMaintenance").val(""); $("#ColourId").val(); $("#UOMId").val(); $("#StoreLocation").val(""); $("#GeneralRemarks").val();
                $("#Substance").val(""); $("#Grade").val(""); $("#GroupID").val("");
            }
        });
    });

    //start
    function RowClick(arg) {
        $('#list-amended-material tr#' + arg + '').remove();
        $.ajax({
            url: '/GRN_DetailNew/GetGrnID',
            type: "GET",
            dataType: "JSON",
            data: { GrnID: arg },
            success: function (cities) {
                debugger;
                $('#BarCodeNo').val(cities.GrnDetailS.BarCodeNo);
                $('#GrnNo').val(cities.GrnDetailS.GrnNo);
                $('#DisplayGridViewEdit_').show();
                $('#DisplayGridViewEdit').hide();
                if (cities.grnType.IssueType.trim() == "Direct GRN") {
                    $("#PoNumber").hide();
                    $("#PoNO").hide();
                    $("#AutomaticPonumber").show();
                    $("#AutomaticPONumber").show();
                    $('#AutomaticPONumber').val(cities.GrnDetailS.AutomaticPONumber);
                    $('#AutomaticPONumber').prop("disabled", true);
                    $("#Pono_").hide();
                    $("#AutomaticPono_").show();
                }
                else {
                    $("#PoNumber").show();
                    $("#AutomaticPonumber").hide();
                    $("#AutomaticPONumber").hide();
                    $('#PoNO').show();
                    $('#PoNO').val(cities.GrnDetailS.PoNO);
                    $("#PoNO").combobox('destroy');
                    $("#PoNO").combobox();
                    $('#PoNO').prop("disabled", true);
                    $("#Pono_").show();
                    $("#AutomaticPono_").hide();
                }
                if (cities.GrnDetailS.Substance != null) {
                    $('#Substance').val(cities.GrnDetailS.Substance);
                    $('#Substance').prop("disabled", true);
                }
                else {
                    $('#Substance').val(0);
                    $("#Substance").prop("disabled", true);
                }
                if ((cities.Material != null && (cities.Material.GradeMasterId != null || cities.Material.GradeMasterId != 0))) {
                    $('#Grade').val(cities.Material.GradeMasterId);
                    $('#Grade').prop("disabled", true);
                }
                else {
                    $('#Grade').val(0);
                    $("#Grade").prop("disabled", true);
                }
                $('#GrnID').val(cities.GrnDetailS.GrnID);
                $('#PoQty').val(cities.GrnDetailS.PoQty);
                $('#TotalCount').val(cities.GrnDetailS.TotalCount);
                $('#MaterialType').val(cities.GrnDetailS.MaterialType);
                $('#GrnDate').val(cities.GrnDetailS.GrnDate);
                $('#GrnRefNo').val(cities.GrnDetailS.GrnRefNo);
                $('#SupplierNameId').val(cities.GrnDetailS.SupplierNameId);
                $('#DC_No').val(cities.GrnDetailS.DC_No);
                $('#DCDate').val(cities.GrnDetailS.DCDate);
                $('#INVoiceNo').val(cities.GrnDetailS.INVoiceNo);
                $('#INVoiceDate').val(cities.GrnDetailS.INVoiceDate);
                $('#GateEntryNo').val(cities.GrnDetailS.GateEntryNo);
                $('#GEDate').val(cities.GrnDetailS.GEDate);
                $('#GETime').val(cities.GrnDetailS.GETime);
                $('#GateRefNo').val(cities.GrnDetailS.GateRefNo);
                $('#GrnType').val(cities.GrnDetailS.GrnType);
                $('#ST_VATcredit').val(cities.GrnDetailS.ST_VATcredit);
                $('#ImportClearance').val(cities.GrnDetailS.ImportClearance);
                $('#BENo').val(cities.GrnDetailS.BENo);
                $('#ExchangeRate').val(cities.GrnDetailS.ExchangeRate);
                $('#ShipmentMode').val(cities.GrnDetailS.ShipmentMode);
                $('#FreightAmount').val(cities.GrnDetailS.FreightAmount);
                $('#InsuranceAmount').val(cities.GrnDetailS.InsuranceAmount);
                $('#CustomsDuty').val(cities.GrnDetailS.CustomsDuty);
                $('#Pack_Forward').val(cities.GrnDetailS.Pack_Forward);
                $('#ServiceTax').val(cities.GrnDetailS.ServiceTax);
                $('#ServiceTaxPer').val(cities.GrnDetailS.ServiceTaxPer);
                $('#OtherCharges').val(cities.GrnDetailS.OtherCharges);
                $('#Transporter').val(cities.GrnDetailS.Transporter);
                $('#GeneralRemarks1').val(cities.GrnDetailS.GeneralRemarks1);
                $('#Currencykey').val(cities.GrnDetailS.Currencykey);
                $('#LOTNo').val(cities.GrnDetailS.LOTNo);
                $('#IndentNo').val(cities.GrnDetailS.IndentNo);
                $('#IONo').val(cities.GrnDetailS.IONo);
                $('#Stores').val(cities.GrnDetailS.Stores);
                if (cities.purchaseOrder != null && cities.purchaseOrder.PoOrderId != 0) {
                    $('#MaterialId').val(cities.purchaseOrder.PoOrderId);
                }
                else {
                    $('#MaterialId').val(cities.GrnDetailS.MaterialId);
                }
                $("#MaterialId").combobox('destroy');
                $("#MaterialId").combobox();
                $('#GroupID').val(cities.GrnDetailS.GroupID);
                $('#CategoryId').val(cities.GrnDetailS.CategoryId);
                $('#IfGroupIsMaintenance').val(cities.GrnDetailS.IfGroupIsMaintenance);
                $('#ColourId').val(cities.GrnDetailS.ColourId);
                $('#UOMId').val(cities.GrnDetailS.UOMId);
                $('#DOM').val(cities.GrnDetailS.DOM);
                $('#StoreLocation').val(cities.GrnDetailS.StoreLocation);
                $('#GeneralRemarks').val(cities.GrnDetailS.GeneralRemarks);
                $('#MachineryName').val(parseInt(cities.GrnDetailS.MachineryName));
                $('#IndentMaterialId_').val(cities.GrnDetailS.IndentMaterialId);
                $('#Weight').val(cities.GrnDetailS.Weight);
                $('#ShortageQty').val(cities.GrnDetailS.ShortageQty);
                $('#QtyAsPerDc').val(cities.GrnDetailS.QtyAsPerDc);
                $('#QtyAsPerSQFT').val(cities.GrnDetailS.QtyAsPerSQFT);
                $("#ShortageSQFT").val(cities.GrnDetailS.ShortageSQFT);
                $('#QtyAsPerPCS').val(cities.GrnDetailS.QtyAsPerPCS);
                $('#QTYType').val(cities.GrnDetailS.QTYType);
                $('#ReceivedQty').val(cities.GrnDetailS.ReceivedQty);
                $('#ReceivedSQFT').val(cities.GrnDetailS.ReceivedSQFT);
                $('#ReceivedPCS').val(cities.GrnDetailS.ReceivedPCS);
                $('#ReceivedType').val(cities.GrnDetailS.ReceivedType);
                $('#RejectedQty').val(cities.GrnDetailS.RejectedQty);
                $('#RejectedSQFT').val(cities.GrnDetailS.RejectedSQFT);
                $('#RejectedPCS').val(cities.GrnDetailS.RejectedPCS);
                $('#RejectedType').val(cities.GrnDetailS.RejectedType);
                $('#AcceptedQty').val(cities.GrnDetailS.AcceptedQty);
                $('#AcceptedSQFT').val(cities.GrnDetailS.AcceptedSQFT);
                $('#AcceptedPCS').val(cities.GrnDetailS.AcceptedPCS);
                $('#AcceptedType').val(cities.GrnDetailS.AcceptedType);
                $('#QtyExcess').val(cities.GrnDetailS.QtyExcess);
                $('#PendingQty').val(cities.GrnDetailS.PendingQty);
                $('#ExcessApproval').val(cities.GrnDetailS.ExcessApproval);
                $('#GeneralRemarks').val(cities.GrnDetailS.GeneralRemarks);
                $('#Rate').val(cities.GrnDetailS.Rate);
                $('#Value').val(cities.GrnDetailS.Value);
                $('#MRPMargin').val(cities.GrnDetailS.MRPMargin);
                $('#MRPPrice').val(cities.GrnDetailS.MRPPrice);
                $('#AccessibleValue').val(cities.GrnDetailS.AccessibleValue);
                $('#Discount_Per').val(cities.GrnDetailS.Discount_Per);
                $('#Discount_Val').val(cities.GrnDetailS.Discount_Val);
                $('#ExciseDuty_Per').val(cities.GrnDetailS.ExciseDuty_Per);
                $('#ExciseDuty_Val').val(cities.GrnDetailS.ExciseDuty_Val);
                $('#ST_VAT_CST_Per').val(cities.GrnDetailS.ST_VAT_CST_Per);
                $('#ST_VAT_CST_Val').val(cities.GrnDetailS.ST_VAT_CST_Val);
                $('#Ecess_Per').val(cities.GrnDetailS.Ecess_Per);
                $('#Ecess_Val').val(cities.GrnDetailS.Ecess_Val);
                $('#SH_Ecess_Per').val(cities.GrnDetailS.SH_Ecess_Per);
                $('#SH_Ecess_Val').val(cities.GrnDetailS.SH_Ecess_Val);
                $('#Surcharge_Per').val(cities.GrnDetailS.Surcharge_Per);
                $('#Surcharge_Val').val(cities.GrnDetailS.Surcharge_Val);
                $('#TagsPiecesDiscount_Per').val(cities.GrnDetailS.TagsPiecesDiscount_Per);
                $('#TagsPiecesDiscount_Val').val(cities.GrnDetailS.TagsPiecesDiscount_Val);

                $('#GST').val(cities.GrnDetailS.GST);
                $('#SGST').val(cities.GrnDetailS.SGST);
                $('#CGST').val(cities.GrnDetailS.CGST);
                $('#IGST').val(cities.GrnDetailS.IGST);
                $('#ImportIGST').val(cities.GrnDetailS.ImportIGST);
                $('#Surcharges').val(cities.GrnDetailS.Surcharges);
                $('#GSTValue').val(cities.GrnDetailS.GSTValue);
                $('#SGSTValue').val(cities.GrnDetailS.SGSTValue);
                $('#CGSTValue').val(cities.GrnDetailS.CGSTValue);
                $('#IGSTValue').val(cities.GrnDetailS.IGSTValue);
                $('#ImportIGSTValue').val(cities.GrnDetailS.ImportIGSTValue);
                $('#SurchargesValue').val(cities.GrnDetailS.SurchargesValue);
                $('#FreightAmtPercent').val(cities.GrnDetailS.FreightAmtPercent);
                $('#InsuranceAmtPercent').val(cities.GrnDetailS.InsuranceAmtPercent);
                $('#CustomDutyPercent').val(cities.GrnDetailS.CustomDutyPercent);
                $('#ClearingChargePercent').val(cities.GrnDetailS.ClearingChargePercent);
                $('#PackforwardPercent').val(cities.GrnDetailS.PackforwardPercent);
                $('#FreightTaxAmt').val(cities.GrnDetailS.FreightTaxAmt);
                $('#InsuranceTaxAmt').val(cities.GrnDetailS.InsuranceTaxAmt);
                $('#CustomDutyTax').val(cities.GrnDetailS.CustomDutyTax);
                $('#ClearingChargeTax').val(cities.GrnDetailS.ClearingChargeTax);
                $('#PackforwardTax').val(cities.GrnDetailS.PackforwardTax);
                $('#ServiceChargeTax').val(cities.GrnDetailS.ServiceChargeTax);
                $('.ValueInRps').val(cities.GrnDetailS.ValueInRps);
                $('#TotalAmount').val(cities.GrnDetailS.TotalAmount);
                $('#TotalCost').val(cities.GrnDetailS.TotalCost);
                $('#TagsPiecesDiscount').val(cities.GrnDetailS.TagsPiecesDiscount);
                $('#NetTotal').val(cities.GrnDetailS.NetTotal);
                $("#TCS").val(cities.GrnDetailS.TCS);
                $('#TCSValue').val(cities.GrnDetailS.TCSValue);
                $('#AmountplusTax').val(cities.GrnDetailS.AmountplusTax);
                $("#TotalAmountVlaue").text(parseFloat($("#AmountplusTax").val()) - parseFloat(cities.GrnDetailS.AmountplusTax));
                //disabled and enabled
                if (cities.store != null) {
                    if (cities.store.StoreName == "Leather Store" || cities.store.StoreName == "Leather Store-Local" || cities.store.StoreName == "Leather Stores-Import") {
                        $("#QTYType").prop("disabled", false);
                        $("#ReceivedType").prop("disabled", false);
                        $("#ShortageType").prop("disabled", false);
                        $("#RejectedType").prop("disabled", false);
                        $("#AcceptedType").prop("disabled", false);
                        $("#QtyAsPerPCS").prop("disabled", false);
                        $("#ReceivedPCS").prop("disabled", false);
                        $("#ShortagePCS").prop("disabled", false);
                        $("#RejectedPCS").prop("disabled", false);
                        $("#AcceptedPCS").prop("disabled", false);
                    }
                    else {
                        $("#QTYType").val("");
                        $("#ReceivedType").val("");
                        $("#ShortageType").val("");
                        $("#RejectedType").val("");
                        $("#AcceptedType").val("");
                        $("#QTYType").prop("disabled", true);
                        $("#ReceivedType").prop("disabled", true);
                        $("#ShortageType").prop("disabled", true);
                        $("#RejectedType").prop("disabled", true);
                        $("#AcceptedType").prop("disabled", true);
                        $("#QtyAsPerPCS").prop("disabled", true);
                        $("#ReceivedPCS").prop("disabled", true);
                        $("#ShortagePCS").prop("disabled", true);
                        $("#RejectedPCS").prop("disabled", true);
                        $("#AcceptedPCS").prop("disabled", true);
                    }
                }
                else {
                    $("#QTYType").val("");
                    $("#ReceivedType").val("");
                    $("#ShortageType").val("");
                    $("#RejectedType").val("");
                    $("#AcceptedType").val("");
                    $("#MachineryName").prop("disabled", false);
                    $("#QTYType").prop("disabled", true);
                    $("#ReceivedType").prop("disabled", true);
                    $("#ShortageType").prop("disabled", true);
                    $("#RejectedType").prop("disabled", true);
                    $("#AcceptedType").prop("disabled", true);
                    $("#QtyAsPerPCS").prop("disabled", true);
                    $("#ReceivedPCS").prop("disabled", true);
                    $("#ShortagePCS").prop("disabled", true);
                    $("#RejectedPCS").prop("disabled", true);
                    $("#AcceptedPCS").prop("disabled", true);
                    $("#ShortageSQFT").prop("disabled", true);
                }
                $('#sizeRangeTable tbody tr').each(function () {
                    $(this).find("td:not(:first)").remove();
                });
                var count = 1;
                var totalQty = 0;
                var isvalue = false;
                if (cities.ListOfSizeRange.length == 0) {
                    $("#isSizeRamge").val(isvalue);
                }
                else {
                    isvalue = 1;
                    $("#isSizeRamge").val(isvalue);
                    for (var i = 0; i <= cities.ListOfSizeRange.length - 1 ; i++) {
                        var size = cities.ListOfSizeRange[i].Size;
                        $('#sizeRangeTable tbody tr:first-child').append('<td class="SizeRangeRefValue" style="background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;"> ' + size + ' </td> ');
                        $('#sizeRangeTable tbody tr:nth-child(2)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Qty_Value' id='Qty_Value' value='" + cities.ListOfSizeRange[i].Qty_Value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        $('#sizeRangeTable tbody tr:nth-child(3)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Received_value' id='Received_value' value='" + cities.ListOfSizeRange[i].Received_value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        $('#sizeRangeTable tbody tr:nth-child(4)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Shortage_value' id='Shortage_value' value='" + cities.ListOfSizeRange[i].Shortage_value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        $('#sizeRangeTable tbody tr:nth-child(5)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Rejectd_value' id='Rejectd_value' value='" + cities.ListOfSizeRange[i].Rejectd_value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        $('#sizeRangeTable tbody tr:last').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Accepted_value' id='Accepted_value' value='" + cities.ListOfSizeRange[i].Accepted_value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        count++;
                        totalQty += parseInt(totalQty);
                    }
                }
                $("#sizeRangeTable").css('display', 'block');
                $("#TotalCount").val(totalQty);
            }
        });

    }
    function MainRowClick(arg) {
        $('#list-amended-material tr#' + arg + '').remove();
        $.ajax({
            url: '/GRN_DetailNew/GetGrnID',
            type: "GET",
            dataType: "JSON",
            data: { GrnID: arg },
            success: function (cities) {
                debugger;
                $('#BarCodeNo').val(cities.GrnDetailS.BarCodeNo);
                $('#GrnNo').val(cities.GrnDetailS.GrnNo);
                $('#DisplayGridViewEdit_').show();
                $('#DisplayGridViewEdit').hide();
                if (cities.grnType.IssueType.trim() == "Direct GRN") {
                    $("#PoNumber").hide();
                    $("#PoNO").hide();
                    $("#AutomaticPonumber").show();
                    $("#AutomaticPONumber").show();
                    $('#AutomaticPONumber').val(cities.GrnDetailS.AutomaticPONumber);
                    $('#AutomaticPONumber').prop("disabled", true);
                    $("#Pono_").hide();
                    $("#AutomaticPono_").show();
                }
                else {
                    $("#PoNumber").show();
                    $("#AutomaticPonumber").hide();
                    $("#AutomaticPONumber").hide();
                    $('#PoNO').show();
                    $('#PoNO').val(cities.GrnDetailS.PoNO);
                    $("#PoNO").combobox('destroy');
                    $("#PoNO").combobox();
                    $('#PoNO').prop("disabled", true);
                    $("#Pono_").show();
                    $("#AutomaticPono_").hide();
                }
                if (cities.GrnDetailS.Substance != null) {
                    $('#Substance').val(cities.GrnDetailS.Substance);
                    $('#Substance').prop("disabled", true);
                }
                else {
                    $('#Substance').val(0);
                    $("#Substance").prop("disabled", true);
                }
                if ((cities.Material != null && (cities.Material.GradeMasterId != null || cities.Material.GradeMasterId != 0))) {
                    $('#Grade').val(cities.Material.GradeMasterId);
                    $('#Grade').prop("disabled", true);
                }
                else {
                    $('#Grade').val(0);
                    $("#Grade").prop("disabled", true);
                }
                $('#Currencykey').val(cities.GrnDetailS.Currencykey);
                $('#GrnID').val(cities.GrnDetailS.GrnID);
                $('#PoQty').val(cities.GrnDetailS.PoQty);
                $('#TotalCount').val(cities.GrnDetailS.TotalCount);
                $('#MaterialType').val(cities.GrnDetailS.MaterialType);
                $('#GrnDate').val(cities.GrnDetailS.GrnDate);
                $('#GrnRefNo').val(cities.GrnDetailS.GrnRefNo);
                $('#SupplierNameId').val(cities.GrnDetailS.SupplierNameId);
                $('#DC_No').val(cities.GrnDetailS.DC_No);
                $('#DCDate').val(cities.GrnDetailS.DCDate);
                $('#INVoiceNo').val(cities.GrnDetailS.INVoiceNo);
                $('#INVoiceDate').val(cities.GrnDetailS.INVoiceDate);
                $('#GateEntryNo').val(cities.GrnDetailS.GateEntryNo);
                $('#GEDate').val(cities.GrnDetailS.GEDate);
                $('#GETime').val(cities.GrnDetailS.GETime);
                $('#GateRefNo').val(cities.GrnDetailS.GateRefNo);
                $('#GrnType').val(cities.GrnDetailS.GrnType);
                $('#ST_VATcredit').val(cities.GrnDetailS.ST_VATcredit);
                $('#ImportClearance').val(cities.GrnDetailS.ImportClearance);
                $('#BENo').val(cities.GrnDetailS.BENo);
                $('#ExchangeRate').val(cities.GrnDetailS.ExchangeRate);
                $('#ShipmentMode').val(cities.GrnDetailS.ShipmentMode);
                $('#FreightAmount').val(cities.GrnDetailS.FreightAmount);
                $('#InsuranceAmount').val(cities.GrnDetailS.InsuranceAmount);
                $('#CustomsDuty').val(cities.GrnDetailS.CustomsDuty);
                $('#Pack_Forward').val(cities.GrnDetailS.Pack_Forward);
                $('#ServiceTax').val(cities.GrnDetailS.ServiceTax);
                $('#ServiceTaxPer').val(cities.GrnDetailS.ServiceTaxPer);
                $('#OtherCharges').val(cities.GrnDetailS.OtherCharges);
                $('#Transporter').val(cities.GrnDetailS.Transporter);
                $('#GeneralRemarks1').val(cities.GrnDetailS.GeneralRemarks1);
            
                $('#BuyerMasterId').val(cities.GrnDetailS.BuyerMasterId);
                $('#BuyerSeasonID').val(cities.GrnDetailS.BuyerSeasonID);



                $('#LOTNo').val(cities.GrnDetailS.LOTNo);
                $('#IndentNo').val(cities.GrnDetailS.IndentNo);
                $('#IONo').val(cities.GrnDetailS.IONo);
                $('#Stores').val(cities.GrnDetailS.Stores);
                if (cities.distinctList_ != null && cities.distinctList_.length > 0) {
                    $("#MaterialId").html("");
                    $("#MaterialId").append("<option value='0'>--Select--</option>");
                    $.each(cities.distinctList_, function (i, city) {
                        $("#MaterialId").append('<option value=' + city.IndentMaterialID + '>' + city.MaterialDescription + '</option>');
                    });
                }
                if (cities.purchaseOrder != null && cities.purchaseOrder.PoOrderId != 0) {
                    $('#MaterialId').val(cities.purchaseOrder.PoOrderId);
                }
                else {
                    $('#MaterialId').val(cities.GrnDetailS.MaterialId);
                }
                $("#MaterialId").combobox('destroy');
                $("#MaterialId").combobox();
                $('#GroupID').val(cities.GrnDetailS.GroupID);
                $('#CategoryId').val(cities.GrnDetailS.CategoryId);
                $('#IfGroupIsMaintenance').val(cities.GrnDetailS.IfGroupIsMaintenance);
                $('#ColourId').val(cities.GrnDetailS.ColourId);
                $('#UOMId').val(cities.GrnDetailS.UOMId);
                $('#DOM').val(cities.GrnDetailS.DOM);
                $('#StoreLocation').val(cities.GrnDetailS.StoreLocation);
                $('#GeneralRemarks').val(cities.GrnDetailS.GeneralRemarks);
                $('#MachineryName').val(parseInt(cities.GrnDetailS.MachineryName));
                $('#IndentMaterialId_').val(cities.GrnDetailS.IndentMaterialId);
                $('#Weight').val(cities.GrnDetailS.Weight);
                $('#ShortageQty').val(cities.GrnDetailS.ShortageQty);
                $('#QtyAsPerDc').val(cities.GrnDetailS.QtyAsPerDc);
                $('#QtyAsPerSQFT').val(cities.GrnDetailS.QtyAsPerSQFT);
                $("#ShortageSQFT").val(cities.GrnDetailS.ShortageSQFT);
                $('#QtyAsPerPCS').val(cities.GrnDetailS.QtyAsPerPCS);
                $('#QTYType').val(cities.GrnDetailS.QTYType);
                $('#ReceivedQty').val(cities.GrnDetailS.ReceivedQty);
                $('#ReceivedSQFT').val(cities.GrnDetailS.ReceivedSQFT);
                $('#ReceivedPCS').val(cities.GrnDetailS.ReceivedPCS);
                $('#ReceivedType').val(cities.GrnDetailS.ReceivedType);
                $('#RejectedQty').val(cities.GrnDetailS.RejectedQty);
                $('#RejectedSQFT').val(cities.GrnDetailS.RejectedSQFT);
                $('#RejectedPCS').val(cities.GrnDetailS.RejectedPCS);
                $('#RejectedType').val(cities.GrnDetailS.RejectedType);
                $('#AcceptedQty').val(cities.GrnDetailS.AcceptedQty);
                $('#AcceptedSQFT').val(cities.GrnDetailS.AcceptedSQFT);
                $('#AcceptedPCS').val(cities.GrnDetailS.AcceptedPCS);
                $('#AcceptedType').val(cities.GrnDetailS.AcceptedType);
                $('#QtyExcess').val(cities.GrnDetailS.QtyExcess);
                $('#PendingQty').val(cities.GrnDetailS.PendingQty);
                $('#ExcessApproval').val(cities.GrnDetailS.ExcessApproval);
                $('#GeneralRemarks').val(cities.GrnDetailS.GeneralRemarks);
                $('#Rate').val(cities.GrnDetailS.Rate);
                $('#Value').val(cities.GrnDetailS.Value);
                $('#MRPMargin').val(cities.GrnDetailS.MRPMargin);
                $('#MRPPrice').val(cities.GrnDetailS.MRPPrice);
                $('#AccessibleValue').val(cities.GrnDetailS.AccessibleValue);
                $('#Discount_Per').val(cities.GrnDetailS.Discount_Per);
                $('#Discount_Val').val(cities.GrnDetailS.Discount_Val);
                $('#ExciseDuty_Per').val(cities.GrnDetailS.ExciseDuty_Per);
                $('#ExciseDuty_Val').val(cities.GrnDetailS.ExciseDuty_Val);
                $('#ST_VAT_CST_Per').val(cities.GrnDetailS.ST_VAT_CST_Per);
                $('#ST_VAT_CST_Val').val(cities.GrnDetailS.ST_VAT_CST_Val);
                $('#Ecess_Per').val(cities.GrnDetailS.Ecess_Per);
                $('#Ecess_Val').val(cities.GrnDetailS.Ecess_Val);
                $('#SH_Ecess_Per').val(cities.GrnDetailS.SH_Ecess_Per);
                $('#SH_Ecess_Val').val(cities.GrnDetailS.SH_Ecess_Val);
                $('#Surcharge_Per').val(cities.GrnDetailS.Surcharge_Per);
                $('#Surcharge_Val').val(cities.GrnDetailS.Surcharge_Val);
                $('#TagsPiecesDiscount_Per').val(cities.GrnDetailS.TagsPiecesDiscount_Per);
                $('#TagsPiecesDiscount_Val').val(cities.GrnDetailS.TagsPiecesDiscount_Val);

                $('#GST').val(cities.GrnDetailS.GST);
                $('#SGST').val(cities.GrnDetailS.SGST);
                $('#CGST').val(cities.GrnDetailS.CGST);
                $('#IGST').val(cities.GrnDetailS.IGST);
                $('#ImportIGST').val(cities.GrnDetailS.ImportIGST);
                $('#Surcharges').val(cities.GrnDetailS.Surcharges);
                $('#GSTValue').val(cities.GrnDetailS.GSTValue);
                $('#SGSTValue').val(cities.GrnDetailS.SGSTValue);
                $('#CGSTValue').val(cities.GrnDetailS.CGSTValue);
                $('#IGSTValue').val(cities.GrnDetailS.IGSTValue);
                $('#ImportIGSTValue').val(cities.GrnDetailS.ImportIGSTValue);
                $('#SurchargesValue').val(cities.GrnDetailS.SurchargesValue);
                $('#FreightAmtPercent').val(cities.GrnDetailS.FreightAmtPercent);
                $('#InsuranceAmtPercent').val(cities.GrnDetailS.InsuranceAmtPercent);
                $('#CustomDutyPercent').val(cities.GrnDetailS.CustomDutyPercent);
                $('#ClearingChargePercent').val(cities.GrnDetailS.ClearingChargePercent);
                $('#PackforwardPercent').val(cities.GrnDetailS.PackforwardPercent);
                $('#FreightTaxAmt').val(cities.GrnDetailS.FreightTaxAmt);
                $('#InsuranceTaxAmt').val(cities.GrnDetailS.InsuranceTaxAmt);
                $('#CustomDutyTax').val(cities.GrnDetailS.CustomDutyTax);
                $('#ClearingChargeTax').val(cities.GrnDetailS.ClearingChargeTax);
                $('#PackforwardTax').val(cities.GrnDetailS.PackforwardTax);
                $('#ServiceChargeTax').val(cities.GrnDetailS.ServiceChargeTax);
                $('.ValueInRps').val(cities.GrnDetailS.ValueInRps);
                $('#TotalAmount').val(cities.GrnDetailS.TotalAmount);
                $('#TotalCost').val(cities.GrnDetailS.TotalCost);
                $('#TagsPiecesDiscount').val(cities.GrnDetailS.TagsPiecesDiscount);
                $('#NetTotal').val(cities.GrnDetailS.NetTotal);
                $("#TCS").val(cities.GrnDetailS.TCS);
                $('#TCSValue').val(cities.GrnDetailS.TCSValue);
                $('#AmountplusTax').val(cities.GrnDetailS.AmountplusTax);
                //totalAmlunt += parseFloat($("#AmountplusTax").val());
                $("#TotalAmountVlaue").text(parseFloat($("#AmountplusTax").val()) - parseFloat(cities.GrnDetailS.AmountplusTax));
                //disabled and enabled
                if (cities.store != null) {
                    if (cities.store.StoreName == "Leather Store" || cities.store.StoreName == "Leather Store-Local" || cities.store.StoreName == "Leather Stores-Import") {
                        $("#QTYType").prop("disabled", false);
                        $("#ReceivedType").prop("disabled", false);
                        $("#ShortageType").prop("disabled", false);
                        $("#RejectedType").prop("disabled", false);
                        $("#AcceptedType").prop("disabled", false);
                        $("#QtyAsPerPCS").prop("disabled", false);
                        $("#ReceivedPCS").prop("disabled", false);
                        $("#ShortagePCS").prop("disabled", false);
                        $("#RejectedPCS").prop("disabled", false);
                        $("#AcceptedPCS").prop("disabled", false);
                    }
                    else {
                        $("#QTYType").val("");
                        $("#ReceivedType").val("");
                        $("#ShortageType").val("");
                        $("#RejectedType").val("");
                        $("#AcceptedType").val("");
                        $("#QTYType").prop("disabled", true);
                        $("#MachineryName").prop("disabled", false);
                        $("#ReceivedType").prop("disabled", true);
                        $("#ShortageType").prop("disabled", true);
                        $("#RejectedType").prop("disabled", true);
                        $("#AcceptedType").prop("disabled", true);
                        $("#QtyAsPerPCS").prop("disabled", true);
                        $("#ReceivedPCS").prop("disabled", true);
                        $("#ShortagePCS").prop("disabled", true);
                        $("#RejectedPCS").prop("disabled", true);
                        $("#AcceptedPCS").prop("disabled", true);
                    }
                }
                else {
                    $("#QTYType").val("");
                    $("#ReceivedType").val("");
                    $("#ShortageType").val("");
                    $("#RejectedType").val("");
                    $("#AcceptedType").val("");
                    $("#QTYType").prop("disabled", true);
                    $("#ReceivedType").prop("disabled", true);
                    $("#ShortageType").prop("disabled", true);
                    $("#RejectedType").prop("disabled", true);
                    $("#AcceptedType").prop("disabled", true);
                    $("#QtyAsPerPCS").prop("disabled", true);
                    $("#ReceivedPCS").prop("disabled", true);
                    $("#ShortagePCS").prop("disabled", true);
                    $("#RejectedPCS").prop("disabled", true);
                    $("#AcceptedPCS").prop("disabled", true);
                    $("#ShortageSQFT").prop("disabled", true);
                }
                $('#sizeRangeTable tbody tr').each(function () {
                    $(this).find("td:not(:first)").remove();
                });
                var count = 1;
                var totalQty = 0;
                var isvalue = false;
                if (cities.ListOfSizeRange.length == 0) {
                    $("#isSizeRamge").val(isvalue);
                }
                else {
                    isvalue = 1;
                    $("#isSizeRamge").val(isvalue);
                    for (var i = 0; i <= cities.ListOfSizeRange.length - 1 ; i++) {
                        var size = cities.ListOfSizeRange[i].Size;
                        $('#sizeRangeTable tbody tr:first-child').append('<td class="SizeRangeRefValue" style="background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;"> ' + size + ' </td> ');
                        $('#sizeRangeTable tbody tr:nth-child(2)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Qty_Value' id='Qty_Value' value='" + cities.ListOfSizeRange[i].Qty_Value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        $('#sizeRangeTable tbody tr:nth-child(3)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Received_value' id='Received_value' value='" + cities.ListOfSizeRange[i].Received_value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        $('#sizeRangeTable tbody tr:nth-child(4)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Shortage_value' id='Shortage_value' value='" + cities.ListOfSizeRange[i].Shortage_value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        $('#sizeRangeTable tbody tr:nth-child(5)').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Rejectd_value' id='Rejectd_value' value='" + cities.ListOfSizeRange[i].Rejectd_value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        $('#sizeRangeTable tbody tr:last').append("<td class='' style='background-color: #ddd;padding-bottom: 3px;padding-left: 0;padding-top: 1px;width: 39px !important;'><input type='text' class='Accepted_value' id='Accepted_value' value='" + cities.ListOfSizeRange[i].Accepted_value + "' style='padding-bottom: 0;padding-top: 0;width: 34px;' /></td>");
                        count++;
                        totalQty += parseFloat(cities.ListOfSizeRange[i].Accepted_value);
                    }
                }
                $("#sizeRangeTable").css('display', 'block');
                $("#TotalCount").text(totalQty);
            }
        });

    }

    $(function () {
        $('.loader-overlay').ajaxStart(function () {
            $(this).fadeIn('slow');
        }).ajaxStop(function () {
            $(this).stop().fadeOut('fast');
        });
    });
    var CurrentRowID = "";
    //Click Autodiplay button
    $(".AutoDisplay").unbind().click(function () {
        // $(document).on('click', '#AutoDisplay', function () {
        //validation();
        if (validation() != false) {
            var grnid = "";
            var sizeRangeArr = [];
            $('#sizeRangeTable tbody tr').each(function () {
                sizeRangeArr.push(
                        {
                            Size: $(this).find('td:first').html(),
                            quantity: $(this).find('input[type=text]').val(),
                            Rate: $(this).find(':last-child').text()
                        });
            });

            var SizeRangeRefValue = "";
            $('#sizeRangeTable tbody tr').find('.SizeRangeRefValue').each(function () {
                SizeRangeRefValue += $(this).text().trim() + ",";
            });
            SizeRangeRefValue = SizeRangeRefValue.slice(0, -1);
            var Qty_Value = "";
            $('#sizeRangeTable tbody tr').find('.Qty_Value').each(function () {

                Qty_Value += $(this).val() + ",";
            });
            Qty_Value = Qty_Value.slice(0, -1);
            var Received_value = "";
            $('#sizeRangeTable tbody tr').find('.Received_value').each(function () {
                Received_value += $(this).val() + ",";
            });
            Received_value = Received_value.slice(0, -1);
            var Shortage_value = "";
            $('#sizeRangeTable tbody tr').find('.Shortage_value').each(function () {
                Shortage_value += $(this).val() + ",";
            });
            Shortage_value = Shortage_value.slice(0, -1);
            var Rejectd_value = "";
            $('#sizeRangeTable tbody tr').find('.Rejectd_value').each(function () {
                if ($(this).val() == "") {
                    Rejectd_value += 0 + ",";
                }
                else {
                    Rejectd_value += $(this).val() + ",";
                }
            });
            Rejectd_value = Rejectd_value.slice(0, -1);
            var Accepted_value = "";
            $('#sizeRangeTable tbody tr').find('.Accepted_value').each(function () {
                Accepted_value += $(this).val() + ",";
            });
            Accepted_value = Accepted_value.slice(0, -1);
            CurrentRowID = $('#list-amended-material tr').length;
            $('#SizeRangeDetails').val(JSON.stringify(sizeRangeArr));
            if (CurrentRowID != "") {
                $.ajax({
                    type: 'POST',
                    dataType: 'json',
                    url: '/GRN_DetailNew/SaveDetails',
                    data: {
                        BarCodeNo: $('#BarCodeNo').val(),
                        GrnID: $('#GrnID').val(),
                        GrnNo: $('#GrnNo').val(),
                        GrnDate: $('#GrnDate').val(),
                        GrnRefNo: $('#GrnRefNo').val(),
                        SupplierNameId: $('#SupplierNameId').val(),
                        DC_No: $('#DC_No').val(),
                        DCDate: $('#DCDate').val(),
                        INVoiceNo: $('#INVoiceNo').val(),
                        INVoiceDate: $('#INVoiceDate').val(),
                        GateEntryNo: $('#GateEntryNo').val(),
                        GEDate: $('#GEDate').val(),
                        GETime: $('#GETime').val(),
                        GateRefNo: $('#GateRefNo').val(),
                        GrnType: $('#GrnType').val(),
                        ST_VATcredit: $('#ST_VATcredit').val(),
                        ImportClearance: $('#ImportClearance').val(),
                        BENo: $('#BENo').val(),
                        ExchangeRate: $('#ExchangeRate').val(),
                        ShipmentMode: $('#ShipmentMode').val(),
                        FreightAmount: $('#FreightAmount').val(),
                        InsuranceAmount: $('#InsuranceAmount').val(),
                        CustomsDuty: $('#CustomsDuty').val(),
                        Pack_Forward: $('#Pack_Forward').val(),
                        ServiceTax: $('#ServiceTax').val(),
                        OtherCharges: $('#OtherCharges').val(),
                        Transporter: $('#Transporter').val(),
                        GeneralRemarks1: $('#GeneralRemarks1').val(),
                        PoNO: $('#PoNO').val(),
                        LOTNo: $('#LOTNo').val(),
                        IndentNo: $('#IndentNo').val(),
                        IONo: $('#IONo').val(),
                        Stores: $('#Stores').val(),
                        MaterialId: $('#MaterialId').val(),
                        Grade: $('#Grade').val(),
                        GroupID: $('#GroupID').val(),
                        CategoryId: $('#CategoryId').val(),
                        IfGroupIsMaintenance: $('#IfGroupIsMaintenance').val(),
                        ColourId: $('#ColourId').val(),
                        UOMId: $('#UOMId').val(),
                        DOM: $('#DOM').val(),
                        StoreLocation: $('#StoreLocation').val(),
                        GeneralRemarks: $('#GeneralRemarks').val(),
                        Substance: $('#Substance').val(),
                        Weight: $('#Weight').val(),
                        QtyAsPerDc: $('#QtyAsPerDc').val(),
                        QtyAsPerSQFT: $('#QtyAsPerSQFT').val(),
                        QtyAsPerPCS: $('#QtyAsPerPCS').val(),
                        QTYType: $('#QTYType').val(),
                        ReceivedQty: $('#ReceivedQty').val(),
                        ReceivedSQFT: $('#ReceivedSQFT').val(),
                        ReceivedPCS: $('#ReceivedPCS').val(),
                        ReceivedType: $('#ReceivedType').val(),
                        RejectedQty: $('#RejectedQty').val(),
                        RejectedSQFT: $('#RejectedSQFT').val(),
                        RejectedPCS: $('#RejectedPCS').val(),
                        RejectedType: $('#RejectedType').val(),
                        AcceptedQty: $('#AcceptedQty').val(),
                        AcceptedSQFT: $('#AcceptedSQFT').val(),
                        AcceptedPCS: $('#AcceptedPCS').val(),
                        AcceptedType: $('#AcceptedType').val(),
                        QtyExcess: $('#QtyExcess').val(),
                        PendingQty: $('#PendingQty').val(),
                        ExcessApproval: $('#ExcessApproval').val(),
                        GeneralRemarks: $('#GeneralRemarks').val(),
                        Rate: $('#Rate').val(),
                        Value: $('#Value').val(),
                        MRPMargin: $('#MRPMargin').val(),
                        MRPPrice: $('#MRPPrice').val(),
                        AccessibleValue: $('#AccessibleValue').val(),
                        Discount_Per: $('#Discount_Per').val(),
                        AmountplusTax: $('#AmountplusTax').val(),
                        Discount_Val: $('#Discount_Val').val(),
                        ExciseDuty_Per: $('#ExciseDuty_Per').val(),
                        ExciseDuty_Val: $('#ExciseDuty_Val').val(),
                        ST_VAT_CST_Per: $('#ST_VAT_CST_Per').val(),
                        ST_VAT_CST_Val: $('#ST_VAT_CST_Val').val(),
                        Ecess_Per: $('#Ecess_Per').val(),
                        Ecess_Val: $('#Ecess_Val').val(),
                        SH_Ecess_Per: $('#SH_Ecess_Per').val(),
                        SH_Ecess_Val: $('#SH_Ecess_Val').val(),
                        Surcharge_Per: $('#Surcharge_Per').val(),
                        BuyerSeasonID: $("#BuyerSeasonID").val(),
                        BuyerMasterId: $("#BuyerMasterId").val(),
                        Surcharge_Val: $('#Surcharge_Val').val(),
                        ST_VAT_CST_Val: $('#ST_VAT_CST_Val').val(),
                        TagsPiecesDiscount_Per: $('#TagsPiecesDiscount_Per').val(),
                        TagsPiecesDiscount_Val: $('#TagsPiecesDiscount_Val').val(),
                        ShortageQty: $("#ShortageQty").val(),
                        ShortageSQFT: $("#ShortageSQFT").val(),
                        ShortagePCS: $("#ShortagePCS").val(),
                        ShortageType: $("#ShortageType").val(),
                        BuyerSeasonID_: $("#BuyerSeasonID").val(),
                        BuyerMasterId_: $("#BuyerMasterId").val(),
                        IndentMaterialId_: $("#IndentMaterialId_").val(),
                        AutomaticPONumber: $("#AutomaticPONumber").val(),
                        PoQty: $("#PoQty").val(),
                        SizeRangeDetails: $('#SizeRangeDetails').val(),
                        ServiceTaxPer: $("#ServiceTaxPer").val(),
                        MaterialType: $("#MaterialType").val(),
                        PoDate: $("#PoDate").val(),
                        BEDate: $("#BEDate").val(),
                        ModeofTransport: $("#ModeofTransport").val(),
                        MachineryName: $("#MachineryName").val(),
                        PoReceivedQty: $("#PoReceivedQty").val(),
                        GST: $("#GST").val(),
                        SGST: $("#SGST").val(),
                        CGST: $("#CGST").val(),
                        IGST: $("#IGST").val(),
                        ImportIGST: $("#ImportIGST").val(),
                        Surcharges: $("#Surcharges").val(),
                        GSTValue: $("#GSTValue").val(),
                        SGSTValue: $("#SGSTValue").val(),
                        CGSTValue: $("#CGSTValue").val(),
                        IGSTValue: $("#IGSTValue").val(),
                        ImportIGSTValue: $("#ImportIGSTValue").val(),
                        SurchargesValue: $("#SurchargesValue").val(),
                        FreightAmtPercent: $("#FreightAmtPercent").val(),
                        InsuranceAmtPercent: $("#InsuranceAmtPercent").val(),
                        CustomDutyPercent: $("#CustomDutyPercent").val(),
                        ClearingChargePercent: $("#ClearingChargePercent").val(),
                        PackforwardPercent: $("#PackforwardPercent").val(),
                        FreightTaxAmt: $("#FreightTaxAmt").val(),
                        InsuranceTaxAmt: $("#InsuranceTaxAmt").val(),
                        CustomDutyTax: $("#CustomDutyTax").val(),
                        ClearingChargeTax: $("#ClearingChargeTax").val(),
                        PackforwardTax: $("#PackforwardTax").val(),
                        ServiceChargeTax: $("#ServiceChargeTax").val(),
                        ValueInRps: $("#ValueInRps").val(),
                        Currency: $("#Currency").val(),
                        TotalAmount: $("#TotalAmount").val(),
                        TotalCost: $("#TotalCost").val(),
                        TagsPiecesDiscount: $("#TagsPiecesDiscount").val(),
                        Currencykey: $("#Currencykey").val(),
                        NetTotal: $("#NetTotal").val(),
                        TCS: $("#TCS").val(),
                        TCSValue: $("#TCSValue").val(),
                        SizeRangeRefValue: SizeRangeRefValue,
                        Qty_Value: Qty_Value,
                        Received_value: Received_value,
                        Shortage_value: Shortage_value,
                        Rejectd_value: Rejectd_value,
                        Accepted_value: Accepted_value,
                    },
                    success: function (data) {

                        $('#GrnID').val(0);
                        if (data.Message != 'Already Existed') {
                            alert("Updated Successfully");
                            window.location.href = "GoodReceipeDetailsNew_?GrnNo=" + data.result.Model.GrnNo;
                            return false;
                        }
                        else {
                            alert(data.Message);
                            return false;
                        }
                    }
                });
            }
            else {
                $('#BarCodeNo' + CurrentRowID + '').html($('#BarCodeNo').val());
                $('#GrnID' + CurrentRowID + '').html($('#GrnID').val());
                $('#BuyerSeasonID' + CurrentRowID + '').html($('#BuyerSeasonID').val());
                $('#BuyerMasterId' + CurrentRowID + '').html($('#BuyerMasterId').val());
                $('#GrnNo' + CurrentRowID + '').html($('#GrnNo').val());
                $('#GrnDate' + CurrentRowID + '').html($('#GrnDate').val());
                $('#SupplierNameId' + CurrentRowID + '').html($('#SupplierNameId').val());
                $('#DC_No' + CurrentRowID + '').html($('#DC_No').val());
                $('#DCDate' + CurrentRowID + '').html($('#DCDate').val());
                $('#INVoiceNo' + CurrentRowID + '').html($('#INVoiceNo').val());
                $('#INVoiceDate' + CurrentRowID + '').html($('#INVoiceDate').val());
                $('#GateEntryNo' + CurrentRowID + '').html($('#GateEntryNo').val());
                $('#GEDate' + CurrentRowID + '').html($('#GEDate').val());
                $('#GETime' + CurrentRowID + '').html($('#GETime').val());
                $('#GrnType' + CurrentRowID + '').html($('#GrnType').val());
                $('#ST_VATcredit' + CurrentRowID + '').html($('#ST_VATcredit').val());
                $('#ImportClearance' + CurrentRowID + '').html($('#ImportClearance').val());
                $('#BENo' + CurrentRowID + '').html($('#BENo').val());
                $('#ExchangeRate' + CurrentRowID + '').html($('#ExchangeRate').val());
                $('#ShipmentMode' + CurrentRowID + '').html($('#ShipmentMode').val());
                $('#FreightAmount' + CurrentRowID + '').html($('#FreightAmount').val());
                $('#InsuranceAmount' + CurrentRowID + '').html($('#InsuranceAmount').val());
                $('#CustomsDuty' + CurrentRowID + '').html($('#CustomsDuty').val());
                $('#Pack_Forward' + CurrentRowID + '').html($('#Pack_Forward').val());
                $('#ServiceTax' + CurrentRowID + '').html($('#ServiceTax').val());
                $('#OtherCharges' + CurrentRowID + '').html($('#OtherCharges').val());
                $('#Transporter' + CurrentRowID + '').html($('#Transporter').val());
                $('#GeneralRemarks1' + CurrentRowID + '').html($('#GeneralRemarks1').val());
                $('#PoNO' + CurrentRowID + '').html($('#PoNO').val());
                $('#LOTNo' + CurrentRowID + '').html($('#LOTNo').val());
                $('#IndentNo' + CurrentRowID + '').html($('#IndentNo').val());
                $('#IONo' + CurrentRowID + '').html($('#IONo').val());
                $('#Stores' + CurrentRowID + '').html($('#Stores').val());
                $('#MaterialId' + CurrentRowID + '').html($('#MaterialId').val());
                $('#Grade' + CurrentRowID + '').html($('#Grade').val());
                $('#GroupID' + CurrentRowID + '').html($('#GroupID').val());
                $('#CategoryId' + CurrentRowID + '').html($('#CategoryId').val());
                $('#IfGroupIsMaintenance' + CurrentRowID + '').html($('#IfGroupIsMaintenance').val());
                $('#ColourId' + CurrentRowID + '').html($('#ColourId').val());
                $('#UOMId' + CurrentRowID + '').html($('#UOMId').val());
                $('#DOM' + CurrentRowID + '').html($('#DOM').val());
                $('#StoreLocation' + CurrentRowID + '').html($('#StoreLocation').val());
                $('#GeneralRemarks' + CurrentRowID + '').html($('#GeneralRemarks').val());
                $('#Substance' + CurrentRowID + '').html($('#Substance').val());
                $('#Weight' + CurrentRowID + '').html($('#Weight').val());
                $('#QtyAsPerDc' + CurrentRowID + '').html($('#QtyAsPerDc').val());
                $('#QtyAsPerSQFT' + CurrentRowID + '').html($('#QtyAsPerSQFT').val());
                $('#QtyAsPerPCS' + CurrentRowID + '').html($('#QtyAsPerPCS').val());
                $('#QTYType' + CurrentRowID + '').html($('#QTYType').val());
                $('#ReceivedQty' + CurrentRowID + '').html($('#ReceivedQty').val());
                $('#ReceivedSQFT' + CurrentRowID + '').html($('#ReceivedSQFT').val());
                $('#ReceivedPCS' + CurrentRowID + '').html($('#ReceivedPCS').val());
                $('#ReceivedType' + CurrentRowID + '').html($('#ReceivedType').val());
                $('#RejectedQty' + CurrentRowID + '').html($('#RejectedQty').val());
                $('#RejectedSQFT' + CurrentRowID + '').html($('#RejectedSQFT').val());
                $('#RejectedPCS' + CurrentRowID + '').html($('#RejectedPCS').val());
                $('#RejectedType' + CurrentRowID + '').html($('#RejectedType').val());
                $('#AcceptedQty' + CurrentRowID + '').html($('#AcceptedQty').val());
                $('#AcceptedSQFT' + CurrentRowID + '').html($('#AcceptedSQFT').val());
                $('#AcceptedPCS' + CurrentRowID + '').html($('#AcceptedPCS').val());
                $('#AcceptedType' + CurrentRowID + '').html($('#AcceptedType').val());
                $('#QtyExcess' + CurrentRowID + '').html($('#QtyExcess').val());
                $('#PendingQty' + CurrentRowID + '').html($('#PendingQty').val());
                $('#ExcessApproval' + CurrentRowID + '').html($('#ExcessApproval').val());
                $('#GeneralRemarks' + CurrentRowID + '').html($('#GeneralRemarks').val());
                $('#PoQty' + CurrentRowID + '').html($('#PoQty').val());
                $('#Rate' + CurrentRowID + '').html($('#Rate').val());
                $('#Value' + CurrentRowID + '').html($('#Value').val());
                $('#MRPMargin' + CurrentRowID + '').html($('#MRPMargin').val());
                $('#MRPPrice' + CurrentRowID + '').html($('#MRPPrice').val());
                $('#AccessibleValue' + CurrentRowID + '').html($('#AccessibleValue').val());
                $('#Discount_Per' + CurrentRowID + '').html($('#Discount_Per').val());
                $('#Discount_Val' + CurrentRowID + '').html($('#Discount_Val').val());
                $('#ExciseDuty_Per' + CurrentRowID + '').html($('#ExciseDuty_Per').val());
                $('#ExciseDuty_Val' + CurrentRowID + '').html($('#ExciseDuty_Val').val());
                $('#ST_VAT_CST_Per' + CurrentRowID + '').html($('#ST_VAT_CST_Per').val());
                $('#ST_VAT_CST_Val' + CurrentRowID + '').html($('#ST_VAT_CST_Val').val());
                $('#Ecess_Per' + CurrentRowID + '').html($('#Ecess_Per').val());
                $('#Ecess_Val' + CurrentRowID + '').html($('#Ecess_Val').val());
                $('#SH_Ecess_Per' + CurrentRowID + '').html($('#SH_Ecess_Per').val());
                $('#SH_Ecess_Val' + CurrentRowID + '').html($('#SH_Ecess_Val').val());
                $('#Surcharge_Per' + CurrentRowID + '').html($('#Surcharge_Per').val());
                $('#Surcharge_Val' + CurrentRowID + '').html($('#Surcharge_Val').val());
                $('#ST_VAT_CST_Val' + CurrentRowID + '').html($('#ST_VAT_CST_Val').val());
                $('#TagsPiecesDiscount_Per' + CurrentRowID + '').html($('#TagsPiecesDiscount_Per').val());
                $('#TagsPiecesDiscount_Val' + CurrentRowID + '').html($('#TagsPiecesDiscount_Val').val());
                $('#ShortageQty' + CurrentRowID + '').html($('#ShortageQty').val());
                $('#ShortageSQFT' + CurrentRowID + '').html($('#ShortageSQFT').val());
                $('#ShortagePCS' + CurrentRowID + '').html($('#ShortagePCS').val());
                $('#ShortageType' + CurrentRowID + '').html($('#ST_VAT_CST_Val').val());
                $('#AutomaticPONumber' + CurrentRowID + '').html($('#AutomaticPONumber').val());
                $('#SizeRangeDetails' + CurrentRowID + '').html($('#SizeRangeDetails').val());
                $('#TotalCount' + CurrentRowID + '').html($('#TotalCount').val());
                $("input[type='text'],textarea").val("");
                $("select option:first-child").prop("selected", "selected");

            }
        }
    });
    //Save Process


    function validation() {
        if ($("#isSizeRamge").val() == 1) {
            var Qty_Value_ = 0;
            $('#sizeRangeTable tbody tr').find('.Qty_Value').each(function () {
                Qty_Value_ += parseFloat($(this).val());
            });
            var Received_value_ = 0;
            $('#sizeRangeTable tbody tr').find('.Received_value').each(function () {
                Received_value_ += parseFloat($(this).val());
            });
            var Shortage_value_ = 0;
            $('#sizeRangeTable tbody tr').find('.Shortage_value').each(function () {
                Shortage_value_ += parseFloat($(this).val());
            });
            var Rejectd_value_ = 0;
            $('#sizeRangeTable tbody tr').find('.Rejectd_value').each(function () {
                if ($(this).val() != "") {
                    Rejectd_value_ += parseFloat($(this).val());
                }
            });
            var add = 0;
            $('#sizeRangeTable tbody tr').find('.Accepted_value').each(function () {
                add += Number($(this).val());
            });
            $("#TotalCount").text(add);
            $("#TotalCount").prop("disabled", true);
            var Accepted_value_ = 0;
            $('#sizeRangeTable tbody tr').find('.Accepted_value').each(function () {
                if ($(this).val() != "") {
                    Accepted_value_ += parseFloat($(this).val());
                }
            });
            var AcceptedQty_ = $("#AcceptedQty").val();
            if ($("#isSizeRamge").val() == 1) {
                if (Number(AcceptedQty_) != Accepted_value_) {
                    alert("Accepted qty and SizeRanges Qty are differed");
                    $('#AcceptedQty').css('border-color', 'red');
                    $('#AcceptedQty').focus();
                    return false;
                }
            }
            var receivedQty = 0
            var qty = $("#QtyAsPerDc").val();
            receivedQty = $("#ReceivedQty").val();
            var shortageQty = $("#ShortageQty").val();
            var rejectedQty = $("#RejectedQty").val();
            var acceptedQty = $("#AcceptedQty").val();
            if (parseFloat(qty) > Qty_Value_) {
                alert("Qty As Per Dc and size range qty is differed.Please checck");
                $('#QtyAsPerDc').css('border-color', 'red');
                $('#QtyAsPerDc').focus();
                return false;
            }
            else {
                $('#QtyAsPerDc').css('border-color', '');
            }
            if (parseFloat(receivedQty) > Received_value_) {
                alert("ReceivedQty and size range receivedQty is differed.Please checck");
                $('#ReceivedQty').css('border-color', 'red');
                $('#ReceivedQty').focus();
                return false;
            }
            else {
                $('#ReceivedQty').css('border-color', '');
            }
            if (parseFloat(shortageQty) > Shortage_value_) {
                alert("ShortageQty and size range shortage Qty is differed.Please checck");
                $('#ShortageQty').css('border-color', 'red');
                $('#ShortageQty').focus();
                return false;
            }
            else {
                $('#ShortageQty').css('border-color', '');
            }
            if (parseFloat(rejectedQty) > Rejectd_value_) {
                alert("RejectedQty and size range rejected Qty is differed.Please checck");
                $('#RejectedQty').css('border-color', 'red');
                $('#RejectedQty').focus();
                return false;
            }
            else {
                $('#RejectedQty').css('border-color', '');
            }
            if (parseFloat(acceptedQty) > Accepted_value_) {
                alert("AcceptedQty and size range accepted Qty is differed.Please checck");
                $('#AcceptedQty').css('border-color', 'red');
                $('#AcceptedQty').focus();
                return false;
            }
            else {
                $('#AcceptedQty').css('border-color', '');
            }
        }
        //if ($('#BarCodeNo').val() == "") {
        //    alert("Please Enter Bar Code No."); $('#BarCodeNo').css('border-color', 'red'); $('#BarCodeNo').focus(); return false;
        //}
        //else {
        //    $('#BarCodeNo').css('border-color', '');
        //}
        if ($('#GrnNo').val() == "") {
            alert("Please Enter Grn No."); $('#GrnNo').css('border-color', 'red'); $('#GrnNo').focus(); return false;
        }
        else {
            $('#GrnNo').css('border-color', '');
        }
        if ($('#GrnDate').val() == "") {
            alert("Please Enter Grn Date."); $('#GrnDate').css('border-color', 'red'); $('#GrnDate').focus(); return false;
        }
        else {
            $('#GrnDate').css('border-color', '');
        }

        if ($('#GrnRefNo').val() == "") {
            alert("Please Enter Grn Ref No."); $('#GrnRefNo').css('border-color', 'red'); $('#GrnRefNo').focus(); return false;
        }
        else {
            $('#GrnRefNo').css('border-color', '');
        }

        if ($('#SupplierNameId').val() == "" || $('#SupplierNameId').val() == "0" || $('#SupplierNameId ').val() == 0) {
            alert("Please Select Supplier Name.");
            $('#SupplierNameId').css('border-color', 'red');
            $('#SupplierNameId').focus(); return false;
        }
        else {
            $('#SupplierNameId').css('border-color', '');
        }

        if ($('#DC_No').val() == "") {
            alert("Please Enter DC No."); $('#DC_No').css('border-color', 'red'); $('#DC_No').focus(); return false;
        }
        else {
            $('#DC_No').css('border-color', '');
        }

        if ($('#DCDate').val() == "") {
            alert("Please Enter DC Date."); $('#DC_No').css('border-color', 'red'); $('#DCDate').focus(); return false;
        }
        else {
            $('#DCDate').css('border-color', '');
        }

        if ($('#GateEntryNo').val() == "") {
            alert("Please Enter Gate Entry No."); $('#GateEntryNo').css('border-color', 'red'); $('#GateEntryNo').focus(); return false;
        }
        else {
            $('#GateEntryNo').css('border-color', '');
        }
        if ($('#GEDate').val() == "") {
            alert("Please Enter GE Date."); $('#GEDate').css('border-color', 'red'); $('#GEDate').focus(); return false;
        }
        else {
            $('#GEDate').css('border-color', '');
        }

        if ($('#GateRefNo').val() == "") {
            alert("Please Enter Gate Ref No."); $('#GateRefNo').css('border-color', 'red'); $('#GateRefNo').focus(); return false;
        }
        else {
            $('#GateRefNo').css('border-color', '');
        }
        if ($('#GrnType').val() == "") {
            alert("Please Enter Grn Type."); $('#GrnType').css('border-color', 'red'); $('#GrnType').focus(); return false;
        }
        else {
            $('#GrnType').css('border-color', '');
        }
      
        //if ($('#ST_VATcredit').val() == "") {
        //    alert("Please Enter ST-VATcredit."); $('#ST_VATcredit').css('border-color', 'red'); $('#ST_VATcredit').focus(); return false;
        //}
        //else {
        //    $('#ST_VATcredit').css('border-color', '');
        //}

        //if ($('#ImportClearance').val() == "") {
        //    alert("Please Enter Import Clearance."); $('#ImportClearance').css('border-color', 'red'); $('#ImportClearance').focus(); return false;
        //}
        //else {
        //    $('#ImportClearance').css('border-color', '');
        //}

        if ($('#BENo').val() == "") {
            alert("Please Enter BE No."); $('#BENo').css('border-color', 'red'); $('#BENo').focus(); return false;
        }
        else {
            $('#BENo').css('border-color', '');
        }

        if ($('#ExchangeRate').val() == "") {
            alert("Please Enter ExchangeRate."); $('#ExchangeRate').css('border-color', 'red'); $('#ExchangeRate').focus(); return false;
        }
        else {
            $('#ExchangeRate').css('border-color', '');
        }
        //if ($('#ShipmentMode').val() == "") {
        //    alert("Please Enter Shipment Mode."); $('#ShipmentMode').css('border-color', 'red'); $('#ShipmentMode').focus(); return false;
        //}
        //else {
        //    $('#ShipmentMode').css('border-color', '');
        //}
        if ($('#FreightAmount').val() == "") {
            alert("Please Enter Freight Amount."); $('#FreightAmount').css('border-color', 'red'); $('#FreightAmount').focus(); return false;
        }
        else {
            $('#FreightAmount').css('border-color', '');
        }


        if ($('#Pack_Forward').val() == "") {
            alert("Please Enter Pack & Forward."); $('#Pack_Forward').css('border-color', 'red'); $('#Pack_Forward').focus(); return false;
        }
        else {
            $('#Pack_Forward').css('border-color', '');
        }
        if ($('#ServiceTaxPer').val() == "") {
            alert("Please Enter Service Tax Per."); $('#ServiceTaxPer').css('border-color', 'red'); $('#ServiceTaxPer').focus(); return false;
        }
        else {
            $('#ServiceTaxPer').css('border-color', '');
        }
        if ($('#ServiceTax').val() == "") {
            alert("Please Enter Service Tax."); $('#ServiceTax').css('border-color', 'red'); $('#ServiceTax').focus(); return false;
        }
        else {
            $('#ServiceTax').css('border-color', '');
        }
        //if ($('#Transporter').val() == "") {
        //    alert("Please Enter Transporter."); $('#Transporter').css('border-color', 'red'); $('#Transporter').focus(); return false;
        //}
        //else {
        //    $('#Transporter').css('border-color', '');
        //}


        if ($('#GrnType option:selected').text() == "Direct GRN") {
            if ($('#AutomaticPONumber').val() == "") {
                alert("Please Enter PoNO."); $('#AutomaticPONumber').css('border-color', 'red'); $('#AutomaticPONumber').focus(); return false;
            }
            else {
                $('#AutomaticPONumber').css('border-color', '');
            }
        }
        if ($('#GrnType option:selected').text() == "General") {
            if ($('#PoNO').val() == "") {
                alert("Please Enter PoNO."); $('#PoNO').css('border-color', 'red'); $('#PoNO').focus(); return false;
            }
            else {
                $('#PoNO').css('border-color', '');
            }
        }
        if ($('#LOTNo').val() == "") {
            alert("Please Enter LOT No."); $('#LOTNo').css('border-color', 'red'); $('#LOTNo').focus(); return false;
        }
        else {
            $('#LOTNo').css('border-color', '');
        }

        if ($('#Stores').val() == "") {
            alert("Please Enter Stores."); $('#Stores').css('border-color', 'red'); $('#Stores').focus(); return false;
        }
        else {
            $('#Stores').css('border-color', '');
        }
        if ($('#MaterialId').val() == "") {
            alert("Please Enter MaterialId."); $('#MaterialId').css('border-color', 'red'); $('#MaterialId').focus(); return false;
        }
        else {
            $('#MaterialId').css('border-color', '');
        }

        if ($("#Stores option:selected").text() == "Maintenance Store") {
            if ($('#MachineryName').val() == "") {
                alert("Please select machinery name."); $('#MachineryName').css('border-color', 'red'); $('#MachineryName').focus(); return false;
            }
            else {
                $('#MachineryName').css('border-color', '');
            }
        }
        else {
            $('#MachineryName').css('border-color', '');
        }
        if ($('#MaterialType').val() == "" || $('#MaterialType').val() == "0") {
            alert("Please select material type."); $('#MaterialType').css('border-color', 'red'); $('#MaterialType').focus(); return false;
        }
        else {
            $('#MaterialType').css('border-color', '');
        }

        if ($('#Grade').is(':disabled') != true) {
            if ($('#Grade').val() == "") {
                alert("Please Enter Grade."); $('#Grade').css('border-color', 'red'); $('#Grade').focus(); return false;
            }
            else {
                $('#Grade').css('border-color', '');
            }
        }
        if ($('#GroupID').val() == "") {
            alert("Please Enter Group ID."); $('#GroupID').css('border-color', 'red'); $('#GroupID').focus(); return false;
        }
        else {
            $('#GroupID').css('border-color', '');
        }
        if ($('#CategoryId').val() == "") {
            alert("Please Enter CategoryId."); $('#CategoryId').css('border-color', 'red'); $('#CategoryId').focus(); return false;
        }
        else {
            $('#CategoryId').css('border-color', '');
        }

        if ($('#ColourId').val() == "") {
            alert("Please select Colour."); $('#ColourId').css('border-color', 'red'); $('#ColourId').focus(); return false;
        }
        else {
            $('#ColourId').css('border-color', '');
        }
        if ($('#Substance').is(':disabled') != true) {
            if ($('#Substance').val() == "") {
                alert("Please Enter Substance."); $('#Substance').css('border-color', 'red'); $('#Substance').focus(); return false;
            }
            else {
                $('#Substance').css('border-color', '');
            }
        }
        //if ($('#Weight').val() == "") {
        //    alert("Please Enter Weight."); $('#Weight').css('border-color', 'red'); $('#Weight').focus(); return false;
        //}
        //else {
        //    $('#Weight').css('border-color', '');
        //}

        if ($('#QtyAsPerDc').val() == "") {
            alert("Please Enter QtyAsPerDc."); $('#QtyAsPerDc').css('border-color', 'red'); $('#QtyAsPerDc').focus(); return false;
        }
        else {
            $('#QtyAsPerDc').css('border-color', '');
        }


        if ($('#QtyAsPerSQFT').val() == "") {
            alert("Please select  Qty type."); $('#QtyAsPerSQFT').css('border-color', 'red'); $('#QtyAsPerSQFT').focus(); return false;
        }
        else {
            $('#QtyAsPerSQFT').css('border-color', '');
        }
        //if ($("#QtyAsPerPCS").is(':disabled') != true) {
        //    if ($('#QtyAsPerPCS').val() == "") {
        //        alert("Please enter  PCS."); $('#QtyAsPerPCS').css('border-color', 'red'); $('#QtyAsPerPCS').focus(); return false;
        //    }
        //    else {
        //        $('#QtyAsPerPCS').css('border-color', '');
        //    }
        //}
        //if ($("#QTYType").is(':disabled') != true) {
        //    if ($('#QTYType').val() == "") {
        //        alert("Please enter  QTY Type."); $('#QTYType').css('border-color', 'red'); $('#QTYType').focus(); return false;
        //    }
        //    else {
        //        $('#QTYType').css('border-color', '');
        //    }
        //}
        if ($('#ReceivedQty').val() == "") {
            alert("Please Enter Received Qty."); $('#ReceivedQty').css('border-color', 'red'); $('#ReceivedQty').focus(); return false;
        }
        else {
            $('#ReceivedQty').css('border-color', '');
        }
        if ($('#ReceivedSQFT').val() == "") {
            alert("Please select  type."); $('#ReceivedSQFT').css('border-color', 'red'); $('#ReceivedSQFT').focus(); return false;
        }
        else {
            $('#ReceivedSQFT').css('border-color', '');
        }
        //if ($("#ReceivedPCS").is(':disabled') != true) {
        //    if ($('#ReceivedPCS').val() == "") {
        //        alert("Please enter  PCS."); $('#ReceivedPCS').css('border-color', 'red'); $('#ReceivedPCS').focus(); return false;
        //    }
        //    else {
        //        $('#ReceivedPCS').css('border-color', '');
        //    }
        //}
        //if ($("#ReceivedType").is(':disabled') != true) {
        //    if ($('#ReceivedType').val() == "") {
        //        alert("Please enter Type."); $('#ReceivedType').css('border-color', 'red'); $('#ReceivedType').focus(); return false;
        //    }
        //    else {
        //        $('#ReceivedType').css('border-color', '');
        //    }
        //}
        //if ($("#ShortagePCS").is(':disabled') != true) {
        //    if ($('#ShortagePCS').val() == "") {
        //        alert("Please enter ShortagePCS."); $('#ShortagePCS').css('border-color', 'red'); $('#ShortagePCS').focus(); return false;
        //    }
        //    else {
        //        $('#ShortagePCS').css('border-color', '');
        //    }
        //}
        //if ($("#ShortageType").is(':disabled') != true) {
        //    if ($('#ShortageType').val() == "") {
        //        alert("Please enter ShortageType."); $('#ShortageType').css('border-color', 'red'); $('#ShortageType').focus(); return false;
        //    }
        //    else {
        //        $('#ShortageType').css('border-color', '');
        //    }
        //}
        //if ($("#RejectedPCS").is(':disabled') != true) {
        //    if ($('#RejectedPCS').val() == "") {
        //        alert("Please enter Rejected PCS."); $('#RejectedPCS').css('border-color', 'red'); $('#RejectedPCS').focus(); return false;
        //    }
        //    else {
        //        $('#RejectedPCS').css('border-color', '');
        //    }
        //}
        //if ($("#RejectedType").is(':disabled') != true) {
        //    if ($('#RejectedType').val() == "") {
        //        alert("Please enter RejectedType."); $('#RejectedType').css('border-color', 'red'); $('#RejectedType').focus(); return false;
        //    }
        //    else {
        //        $('#RejectedType').css('border-color', '');
        //    }
        //}
        //if ($("#AcceptedPCS").is(':disabled') != true) {
        //    if ($('#AcceptedPCS').val() == "") {
        //        alert("Please enter Accepted PCS."); $('#AcceptedPCS').css('border-color', 'red'); $('#AcceptedPCS').focus(); return false;
        //    }
        //    else {
        //        $('#AcceptedPCS').css('border-color', '');
        //    }
        //}
        //if ($("#AcceptedType").is(':disabled') != true) {
        //    if ($('#AcceptedType').val() == "") {
        //        alert("Please enter AcceptedType."); $('#AcceptedType').css('border-color', 'red'); $('#AcceptedType').focus(); return false;
        //    }
        //    else {
        //        $('#AcceptedType').css('border-color', '');
        //    }
        //}
        //if ($('#QtyExcess').val() == "") {
        //    alert("Please Enter Qty Excess."); $('#QtyExcess').css('border-color', 'red'); $('#QtyExcess').focus(); return false;
        //}
        //else {
        //    $('#QtyExcess').css('border-color', '');
        //}
        if ($('#PendingQty').val() == "") {
            alert("Please Enter Pending Qty."); $('#PendingQty').css('border-color', 'red'); $('#PendingQty').focus(); return false;
        }
        else {
            $('#PendingQty').css('border-color', '');
        }
        //if ($('#ExcessApproval').val() == "") {
        //    alert("Please Enter ExcessApproval."); $('#ExcessApproval').css('border-color', 'red'); $('#ExcessApproval').focus(); return false;
        //}
        //else {
        //    $('#ExcessApproval').css('border-color', '');
        //}
        if ($('#Rate').val() == "") {
            alert("Please Enter Rate."); $('#Rate').css('border-color', 'red'); $('#Rate').focus(); return false;
        }
        else {
            $('#Rate').css('border-color', '');
        }
        if ($('#Value').val() == "") {
            alert("Please Enter Value."); $('#Value').css('border-color', 'red'); $('#Value').focus(); return false;
        }
        else {
            $('#Value').css('border-color', '');
        }

        if ($('#BuyerMasterId').val() == "") {
            alert("Please select buyer name."); $('#BuyerMasterId').css('border-color', 'red'); $('#BuyerMasterId').focus(); return false;
        }
        else {
            $('#BuyerMasterId').css('border-color', '');
        }
        if ($('#BuyerSeasonID').val() == "") {
            alert("Please select buyerseason."); $('#BuyerSeasonID').css('border-color', 'red'); $('#BuyerSeasonID').focus(); return false;
        }
        else {
            $('#BuyerSeasonID').css('border-color', '');
        }

        //if ($('#MRPMargin').val() == "") {
        //    alert("Please Enter MRPMargin."); $('#MRPMargin').css('border-color', 'red'); $('#MRPMargin').focus(); return false;
        //}
        //else {
        //    $('#MRPMargin').css('border-color', '');
        //}
        //if ($('#MRPPrice').val() == "") {
        //    alert("Please Enter MRPPrice."); $('#MRPPrice').css('border-color', 'red'); $('#MRPPrice').focus(); return false;
        //}
        //else {
        //    $('#MRPPrice').css('border-color', '');
        //}
        //if ($('#AccessibleValue').val() == "") {
        //    alert("Please Enter AccessibleValue."); $('#AccessibleValue').css('border-color', 'red'); $('#AccessibleValue').focus(); return false;
        //}
        //else {
        //    $('#AccessibleValue').css('border-color', '');
        //}


        //if ($('#Discount_Per').val() == "") {
        //    alert("Please Enter Discount_Per."); $('#Discount_Per').css('border-color', 'red'); $('#Discount_Per').focus(); return false;
        //}
        //else {
        //    $('#Discount_Per').css('border-color', '');
        //}
        //if ($('#Discount_Val').val() == "") {
        //    alert("Please Enter Discount_Val."); $('#Discount_Val').css('border-color', 'red'); $('#Discount_Val').focus(); return false;
        //}
        //else {
        //    $('#Discount_Val').css('border-color', '');
        //}

        //if ($('#ExciseDuty_Per').val() == "") {
        //    alert("Please Enter Excise Duty_Per."); $('#ExciseDuty_Per').css('border-color', 'red'); $('#ExciseDuty_Per').focus(); return false;
        //}
        //else {
        //    $('#ExciseDuty_Per').css('border-color', '');
        //}
        //if ($('#ExciseDuty_Val').val() == "") {
        //    alert("Please Enter ExciseDuty_Val."); $('#ExciseDuty_Val').css('border-color', 'red'); $('#ExciseDuty_Val').focus(); return false;
        //}
        //else {
        //    $('#ExciseDuty_Val').css('border-color', '');
        //}
        //if ($('#ST_VAT_CST_Per').val() == "") {
        //    alert("Please Enter ST_VAT_CST_Per."); $('#ST_VAT_CST_Per').css('border-color', 'red'); $('#ST_VAT_CST_Per').focus(); return false;
        //}
        //else {
        //    $('#ST_VAT_CST_Per').css('border-color', '');
        //}
        //if ($('#ST_VAT_CST_Val').val() == "") {
        //    alert("Please Enter ST/VAT/CST/Val ."); $('#ST_VAT_CST_Val').css('border-color', 'red'); $('#ST_VAT_CST_Val').focus(); return false;
        //}
        //else {
        //    $('#ST_VAT_CST_Val').css('border-color', '');
        //}
        //if ($('#Ecess_Per').val() == "") {
        //    alert("Please Enter Ecess_Per."); $('#Ecess_Per').css('border-color', 'red'); $('#Ecess_Per').focus(); return false;
        //}
        //else {
        //    $('#Ecess_Per').css('border-color', '');
        //}
        //if ($('#Ecess_Val').val() == "") {
        //    alert("Please Enter Ecess_Val."); $('#Ecess_Val').css('border-color', 'red'); $('#Ecess_Val').focus(); return false;
        //}
        //else {
        //    $('#Ecess_Val').css('border-color', '');
        //}
        //if ($('#SH_Ecess_Per').val() == "") {
        //    alert("Please Enter SH_Ecess_Per."); $('#SH_Ecess_Per').css('border-color', 'red'); $('#SH_Ecess_Per').focus(); return false;
        //}
        //else {
        //    $('#SH_Ecess_Per').css('border-color', '');
        //}
        //if ($('#SH_Ecess_Val').val() == "") {
        //    alert("Please Enter SH_Ecess_Val."); $('#SH_Ecess_Val').css('border-color', 'red'); $('#SH_Ecess_Val').focus(); return false;
        //}
        //else {
        //    $('#SH_Ecess_Val').css('border-color', '');
        //}
        //if ($('#Surcharge_Val').val() == "") {
        //    alert("Please Enter Surcharge_Val."); $('#Surcharge_Val').css('border-color', 'red'); $('#Surcharge_Val').focus(); return false;
        //}
        //else {
        //    $('#Surcharge_Val').css('border-color', '');
        //}
        //if ($('#TagsPiecesDiscount_Val').val() == "") {
        //    alert("Please Enter TagsPiecesDiscount_Val."); $('#TagsPiecesDiscount_Val').css('border-color', 'red'); $('#TagsPiecesDiscount_Val').focus(); return false;
        //}
        //else {
        //    $('#TagsPiecesDiscount_Val').css('border-color', '');
        //}
        //if ($('#TagsPiecesDiscount_Per').val() == "") {
        //    alert("Please Enter TagsPiecesDiscount_Per."); $('#TagsPiecesDiscount_Per').css('border-color', 'red'); $('#TagsPiecesDiscount_Per').focus(); return false;
        //}
        //else {
        //    $('#TagsPiecesDiscount_Per').css('border-color', '');
        //}
    }

    function Supplier_lotGet() {
        var storename=$("#Stores option:selected").text();
        if (storename == "Wetblue Stores") {
            $.ajax({
                url: '/JobWorkTransaction/GEt_Supplier_lot',
                type: 'POST',
                dataType: "JSON",
                data: {
                    Stores: $('#Stores').val(),
                    SupplierNameId: $('#SupplierNameId').val(),
                    MaterialId: $('#MaterialId').val()
                },
                success: function (data) {
                    var Stores_name = $("#Stores option:selected").text();
                    if (Stores_name == "Wetblue Stores") {
                        $('#LOTNo').val(data.lot_count);
                        $("#AcceptedPCS").prop("disabled", false);
                    }
                }
            });
        }
    }
</script>
