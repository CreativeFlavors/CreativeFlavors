@model MMS.Web.Models.Salesorders
@using MMS.Web.Models

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="~/Content/css1/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/css1/custom.css" rel="stylesheet" />
    <link href="~/Content/css1/responsive.css" rel="stylesheet" />
    <link href="~/Content/css1/variables.css" rel="stylesheet" />
    <link href="~/Content/css1/mrp.css" rel="stylesheet" />
    <style>
        li.hidden-content {
            display: none;
        }

        img#plus {
            width: 29%;
            margin-top: -7%;

        }
        div#Name {
            text-align: left;
        }
        li.hidden-content {
            margin-top: -2%;
            background-color: #fbfbff;
            box-shadow: 0px 16px 35px -25px rgba(0, 0, 0, 1.1);
            /*    border-right: groove;
            border-left: groove;
            border-bottom: groove;*/
        }

        .manage_customers .table tr th, .manage_customers .table tr td, .common_Manage_subMerchant .table tr th, .common_Manage_subMerchant .table tr td {
            padding: 6px;
        }
    </style>
</head>
<body>

    <div class="main-page">
        <div id="transaction_report" class="reports common_Manage_subMerchant">

            <div class="table-responsive reports_table_responsive">
                <div class="d-flex justify-content-center align-items-center manage_customers_head">
                    <h2>Material Requirement Planning<small></small></h2>
                    @*<div class="push">
                            <div class="on active"><span id="pro">Production stage</span></div>
                            <a href="/MRP/MRP_Master">
                                <div class="off non"><span id="stock">Stock stage</span></div>
                            </a>

                        </div>*@
                </div>
                <div class="container">
                    <ul class="responsive-table table text-center header ">
                        <li class="table-header">
                            <div class="col col-1">SI.NO</div>
                            <div class="col col-1">Product</div>
                            <div class="col col-1">Sales_Qty</div>
                            <div class="col col-1">Available Stock</div>
                            <div class="col col-1">procurement</div>
                            <div class="col col-1">Duedate</div>
                            <div class="col col-1">Production</div>
                            <div class="col col-1">Pro_Duedate</div>
                            <div class="col col-1">Status</div>
                            <div class="col col-1">Check</div>
                        </li>
                        @if (Model.MRP_Detail != null)
                        {
                            int count = 1;
                            foreach (var i in Model.MRP_Detail)
                            {
                                <li class="table-row header">
                                    <div class="col col-1" data-label="Job Id">@count</div>
                                    <div class="col col-1" data-label="Name" id="ProductName">@i.ProductName</div>
                                    <div class="col col-1" data-label="Amount">@i.SalesQuantity</div>
                                    <div class="col col-1" data-label="Payment Status">@i.AvailableStock</div>
                                    @if (i.SalesQuantity >= i.AvailableStock)
                                    {
                                        <div class="col col-1" data-label="Customer Name">@string.Format("{0:0.00}", (i.SalesQuantity - i.AvailableStock))</div>
                                    }
                                    else
                                    {
                                        <div class="col col-1" data-label="Customer Name">0</div>
                                    }
                                    <div class="col col-1" data-label="Customer Name"></div>
                                    <div class="col col-1" data-label="Customer Name">@i.ProductionQty</div>
                                    @if (@i.ProductionDueDate != null)
                                    {
                                        <div class="col col-1" data-label="Amount">
                                            @i.ProductionDueDate.Value.ToString("dd/MM/yyyy")

                                        </div>
                                    }
                                    else
                                    {
                                        <div class="col col-1" data-label="Amount" style="color: #b9b1b1">Null</div>
                                    }
                                    <div class="col col-1" data-label="Status"id="Name">@i.Status</div>
                                    <div class="col col-1" colspan="2">
                                        <img src="~/Content/assets/images/plus1.png" id="plus" class="toggle-image" />
                                    </div>
                                </li>
                                count++;
                                <li class="hidden-content">
                                    <table class="table table-bordered table-fixed" style="text-align: center; width: 100%;">
                                        <thead>
                                            <tr style="position: -webkit-sticky; position: sticky; top: 0; background-color: #cbcbcb; color: #fff;">
                                                <th><span class="text">Material</span></th>
                                                <th><span class="text">Type</span></th>
                                                <th><span class="text">UOM</span></th>
                                                <th><span class="text">On Hand</span></th>
                                                <th><span class="text">Days of</span></th>
                                                <th><span class="text">Lead time</span></th>
                                                <th><span class="text">Min Lot</span></th>
                                                <th><span class="text">Total-Oty</span></th>
                                                <th><span class="text">Status</span></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Red_Flavour</td>
                                                <td>Material</td>
                                                <td>Box</td>
                                                <td>40</td>
                                                <td>4</td>
                                                <td>10</td>
                                                <td>100</td>
                                                <td>150</td>
                                                <td>PO_Raised</td>
                                            </tr>
                                            <tr>
                                                <td>Green_Flavour</td>
                                                <td>Subassembly</td>
                                                <td>Box</td>
                                                <td>40</td>
                                                <td>4</td>
                                                <td>10</td>
                                                <td>150</td>
                                                <td>200</td>
                                                <td>Others</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </li>
                            }
                        }

                    </ul>
                </div>

            </div>

        </div>

    </div>



    <script src="~/Content/js/custom.js"></script>
    <link href="~/Content/css1/sweetalert.css" rel="stylesheet" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="~/Content/js/bootstrap.bundle.min.js"></script>

    <script>
        $('.push').click(function () {
            $(this).find('div').toggleClass('active').toggleClass('non');
        });
        $(window).on("load", function () {
            $(".report-inner-section").addClass("transection");
            $("#mrp").attr('checked', true);

        });
    </script>
    <script>
        $(document).ready(function () {
            $('.toggle-image').on('click', function () {
                const $this = $(this);
                const $parentLi = $this.closest('li');
                const $nextLi = $parentLi.next('.hidden-content');

                $nextLi.slideToggle(100, function () {
                    if ($nextLi.is(':visible')) {
                        $this.attr('src', '/Content/assets/images/minus.png');
                    } else {
                        $this.attr('src', '/Content/assets/images/plus1.png');
                    }
                });
            });
        });
    </script>

</body>
</html>
