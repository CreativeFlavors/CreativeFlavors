@{
    ViewBag.Title = "MaterialRequirementPlan";
    Layout = "~/Views/Shared/_Layout.cshtml";

    <link href="~/Content/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/css/FormStyle.css" rel="stylesheet" />

}

<script>
    $(document).ready(function () {
        $('#EditColorPartial').hide();
    });

    function Save()
    {
        var actv = null;
        if ($('#IsDetailed').is(":checked")) {
            actv = true;
        }
        else {
            actv = false;
        }
        var consolidt = null;
        if ($('#IsConsolidated').is(":checked")) {
            consolidt = true;
        }
        else {
            consolidt = false;
        }
        var conInhouse = null;
        if ($('#IsConversionInhouse').is(":checked")) {
            conInhouse = true;
        }
        else {
            conInhouse = false;
        }
       
        if ($('#MrpNo').val() == "") {
            alert('Please Enter MrpNo');
            $('#MrpNo').css('border-color', 'red');
            $('#MrpNo').focus();
            return false;
        }
        else {
            $('#MrpNo').css('border-color', '');
        }
        if ($('#Date').val() == "") {
            alert('Please Select Date');
            $('#Date').css('border-color', 'red');
            $('#Date').focus();
            return false;
        }
        else {
            $('#Date').css('border-color', '');
        }
        if ($('#MrpType').val() == "") {
            alert('Please Enter MrpType');
            $('#MrpType').css('border-color', 'red');
            $('#MrpType').focus();
            return false;
        }
        else {
            $('#MrpType').css('border-color', '');
        }
        if ($('#Buyer').val() == "") {
            alert('Please Select Buyer');
            $('#Buyer').css('border-color', 'red');
            $('#Buyer').focus();
            return false;
        }
        else {
            $('#Buyer').css('border-color', '');
        }
        if ($('#WeekNo').val() == "") {
            alert('Please Enter WeekNo');
            $('#WeekNo').css('border-color', 'red');
            $('#WeekNo').focus();
            return false;
        }
        else {
            $('#WeekNo').css('border-color', '');
        }
        if ($('#SeasonMasterId').val() == "") {
            alert('Please Select Season');
            $('#SeasonMasterId').css('border-color', 'red');
            $('#SeasonMasterId').focus();
            return false;
        }
        else {
            $('#SeasonMasterId').css('border-color', '');
        }
        if ($('#LotNo').val() == "") {
            alert('Please Enter LotNo');
            $('#LotNo').css('border-color', 'red');
            $('#LotNo').focus();
            return false;
        }
        else {
            $('#LotNo').css('border-color', '');
        }
        if ($('#SizeRangeMasterId').val() == "") {
            alert('Please Select SizeRange');
            $('#SizeRangeMasterId').css('border-color', 'red');
            $('#SizeRangeMasterId').focus();
            return false;
        }
        else {
            $('#SizeRangeMasterId').css('border-color', '');
        }
        if ($('#FROM').val() == "") {
            alert('Please Select FROM');
            $('#FROM').css('border-color', 'red');
            $('#FROM').focus();
            return false;
        }
        else {
            $('#FROM').css('border-color', '');
        }
        if ($('#TO').val() == "") {
            alert('Please Select FROM');
            $('#TO').css('border-color', 'red');
            $('#TO').focus();
            return false;
        }
        else {
            $('#TO').css('border-color', '');
        }
        if ($('#CustPlan').val() == "") {
            alert('Please Enter CustPlan');
            $('#CustPlan').css('border-color', 'red');
            $('#CustPlan').focus();
            return false;
        }
        else {
            $('#CustPlan').css('border-color', '');
        }
        if ($('#ListOfCategory').val() == "") {
            alert('Please Select ListCategory');
            $('#ListOfCategory').css('border-color', 'red');
            $('#ListOfCategory').focus();
            return false;
        }
        else {
            $('#ListOfCategory').css('border-color', '');
        }
        if ($('#ListOfGroup').val() == "") {
            alert('Please Select ListGroup');
            $('#ListOfGroup').css('border-color', 'red');
            $('#ListOfGroup').focus();
            return false;
        }
        else {
            $('#ListOfGroup').css('border-color', '');
        }
        if ($('#MaterialList').val() == "") {
            alert('Please Select Material');
            $('#MaterialList').css('border-color', 'red');
            $('#MaterialList').focus();
            return false;
        }
        else {
            $('#MaterialList').css('border-color', '');
        }
        if ($('#TotalNoOfIos').val() == "") {
            alert('Please Enter Total No Of Ios');
            $('#TotalNoOfIos').css('border-color', 'red');
            $('#TotalNoOfIos').focus();
            return false;
        }
        else {
            $('#TotalNoOfIos').css('border-color', '');
        }
        if ($('#TotalNoOfPrs').val() == "") {
            alert('Please Enter Total No Of Prs');
            $('#TotalNoOfPrs').css('border-color', 'red');
            $('#TotalNoOfPrs').focus();
            return false;
        }
        else {
            $('#TotalNoOfPrs').css('border-color', '');
        }
        if ($('#ETA').val() == "") {
            alert('Please Enter ETA');
            $('#ETA').css('border-color', 'red');
            $('#ETA').focus();
            return false;
        }
        else {
            $('#ETA').css('border-color', '');
        }
        if ($('#Weight').val() == "") {
            alert('Please Enter Weight');
            $('#Weight').css('border-color', 'red');
            $('#Weight').focus();
            return false;
        }
        else {
            $('#Weight').css('border-color', '');
        }
        if ($('#ShinkagePercent').val() == "") {
            alert('Please Enter ShinkagePercent');
            $('#ShinkagePercent').css('border-color', 'red');
            $('#ShinkagePercent').focus();
            return false;
        }
        else {
            $('#ShinkagePercent').css('border-color', '');
        }
        if ($('#WastagePercent').val() == "") {
            alert('Please Enter WastagePercent');
            $('#WastagePercent').css('border-color', 'red');
            $('#WastagePercent').focus();
            return false;
        }
        else {
            $('#WastagePercent').css('border-color', '');
        }
        if ($('#ShortagePercent').val() == "") {
            alert('Please Enter ShortagePercent');
            $('#ShortagePercent').css('border-color', 'red');
            $('#ShortagePercent').focus();
            return false;
        }
        else {
            $('#ShortagePercent').css('border-color', '');
        }
        if ($('#Category').val() == "") {
            alert('Please Select Category');
            $('#Category').css('border-color', 'red');
            $('#Category').focus();
            return false;
        }
        else {
            $('#Category').css('border-color', '');
        }
        if ($('#Material').val() == "") {
            alert('Please Select Material');
            $('#Material').css('border-color', 'red');
            $('#Material').focus();
            return false;
        }
        else {
            $('#Material').css('border-color', '');
        }
        if ($('#BomQty').val() == "") {
            alert('Please Enter BomQty');
            $('#BomQty').css('border-color', 'red');
            $('#BomQty').focus();
            return false;
        }
        else {
            $('#BomQty').css('border-color', '');
        }
        if ($('#ConversionTable').val() == "") {
            alert('Please Enter ConversionTable');
            $('#ConversionTable').css('border-color', 'red');
            $('#ConversionTable').focus();
            return false;
        }
        else {
            $('#ConversionTable').css('border-color', '');
        }
        if ($('#Wastage').val() == "") {
            alert('Please Enter Wastage');
            $('#Wastage').css('border-color', 'red');
            $('#Wastage').focus();
            return false;
        }
        else {
            $('#Wastage').css('border-color', '');
        }
        if ($('#DisplayIO').val() == "") {
            alert('Please Select DisplayIO');
            $('#DisplayIO').css('border-color', 'red');
            $('#DisplayIO').focus();
            return false;
        }
        else {
            $('#DisplayIO').css('border-color', '');
        }

        var AddSelectedIoNo = "";

        var selectedValues = $.map($('#DisplayIO option:selected'), function (element) {

            AddSelectedIoNo = AddSelectedIoNo + element.value + ",";

        });

        var DisplayIO1 = $('#DisplayIO').val();
        if (DisplayIO1 == null) {
            DisplayIO1 = "";
        }
        DisplayIO1 = DisplayIO1.toString();       
        $.ajax({
            type: 'POST',
            url: '/MaterialRequirementPlan/MaterialRequirementPlan/',
            data: {
                MaterialRequirementPlanId: $('#MaterialRequirementPlanId').val(),
                IsProductionPlanBasis: $('#IsProductionPlanBasis').is(":checked"),
                IsOrderBasis: $('#IsOrderBasis').is(":checked"),
                IsRejectionOrReplacement: $('#IsRejectionOrReplacement').is(":checked"),
                IsOverConsumption: $('#IsOverConsumption').is(":checked"),
                MrpNo: $('#MrpNo').val(),
                Buyer: $('#Buyer').val(),
                SizeRangeMasterId: $('#SizeRangeMasterId').val(),
                Date: $('#Date').val(),
                MrpType: $('#MrpType').val(),
                WeekNo: $('#WeekNo').val(),
                SeasonMasterId: $('#SeasonMasterId').val(),
                LotNo: $('#LotNo').val(),
                FROM: $('#FROM').val(),
                TO: $('#TO').val(),
                CustPlan: $('#CustPlan').val(),
                ListOfCategory: $('#ListOfCategory').val(),
                ListOfGroup: $('#ListOfGroup').val(),
                IsCritical: $('#IsCritical').is(":checked"),
                IsCustomerSupplied: $('#IsCustomerSupplied').is(":checked"), 
                IsGeneral: $('#IsGeneral').is(":checked"),
                IsImported: $('#IsImported').is(":checked"),
                IsReOrder: $('#IsReOrder').is(":checked"),
                IsSelectAll: $('#IsSelectAll').is(":checked"),
                IsBalToOrder: $('#IsBalToOrder').is(":checked"),
                MaterialList: $('#MaterialList').val(),
                TotalNoOfIos: $('#TotalNoOfIos').val(),
                TotalNoOfPrs: $('#TotalNoOfPrs').val(),
                ETA: $('#ETA').val(),
                Weight: $('#Weight').val(),
                ShinkagePercent: $('#ShinkagePercent').val(),
                WastagePercent: $('#WastagePercent').val(),
                ShortagePercent: $('#ShortagePercent').val(),
                Category: $('#Category').val(),
                Material: $('#Material').val(),
                BomQty: $('#BomQty').val(),
                ConversionTable: $('#ConversionTable').val(),
                Wastage: $('#Wastage').val(),
                IsDetailed: actv,
                IsConsolidated: consolidt,
                //MultipleIO:
                DisplayIO: AddSelectedIoNo,
                IsConversionInhouse: conInhouse,
            },
            success: function (data) {
                if (data.MaterialRequirementPlanId != "" || data.MaterialRequirementPlanId != 0) {
                    alert('Saved Successfully.');
                    location.href = "/MaterialRequirementPlan/MaterialRequirementPlan/";
                    return false;
                }
                else {
                    alert('Saved Process Failed.');
                    location.href = "/MaterialRequirementPlan/MaterialRequirementPlan/";
                    return false;
                }
            },
            error: function (ex) {
                alert('Already Exist in the database.');
            }
        });
        
    }

    function Update() {
        var actv = null;
        if ($('#IsDetailed').is(":checked")) {
            actv = true;
        }
        else {
            actv = false;
        }
        var consolidt = null;
        if ($('#IsConsolidated').is(":checked")) {
            consolidt = true;
        }
        else {
            consolidt = false;
        }
        var conInhouse = null;
        if ($('#IsConversionInhouse').is(":checked")) {
            conInhouse = true;
        }
        else {
            conInhouse = false;
        }

        if ($('#MrpNo').val() == "") {
            alert('Please Enter MrpNo');
            $('#MrpNo').css('border-color', 'red');
            $('#MrpNo').focus();
            return false;
        }
        else {
            $('#MrpNo').css('border-color', '');
        }
        if ($('#Date').val() == "") {
            alert('Please Select Date');
            $('#Date').css('border-color', 'red');
            $('#Date').focus();
            return false;
        }
        else {
            $('#Date').css('border-color', '');
        }
        if ($('#MrpType').val() == "") {
            alert('Please Enter MrpType');
            $('#MrpType').css('border-color', 'red');
            $('#MrpType').focus();
            return false;
        }
        else {
            $('#MrpType').css('border-color', '');
        }
        if ($('#Buyer').val() == "") {
            alert('Please Select Buyer');
            $('#Buyer').css('border-color', 'red');
            $('#Buyer').focus();
            return false;
        }
        else {
            $('#Buyer').css('border-color', '');
        }
        if ($('#WeekNo').val() == "") {
            alert('Please Enter WeekNo');
            $('#WeekNo').css('border-color', 'red');
            $('#WeekNo').focus();
            return false;
        }
        else {
            $('#WeekNo').css('border-color', '');
        }
        if ($('#SeasonMasterId').val() == "") {
            alert('Please Select Season');
            $('#SeasonMasterId').css('border-color', 'red');
            $('#SeasonMasterId').focus();
            return false;
        }
        else {
            $('#SeasonMasterId').css('border-color', '');
        }
        if ($('#LotNo').val() == "") {
            alert('Please Enter LotNo');
            $('#LotNo').css('border-color', 'red');
            $('#LotNo').focus();
            return false;
        }
        else {
            $('#LotNo').css('border-color', '');
        }
        if ($('#SizeRangeMasterId').val() == "") {
            alert('Please Select SizeRange');
            $('#SizeRangeMasterId').css('border-color', 'red');
            $('#SizeRangeMasterId').focus();
            return false;
        }
        else {
            $('#SizeRangeMasterId').css('border-color', '');
        }
        if ($('#FROM').val() == "") {
            alert('Please Select FROM');
            $('#FROM').css('border-color', 'red');
            $('#FROM').focus();
            return false;
        }
        else {
            $('#FROM').css('border-color', '');
        }
        if ($('#TO').val() == "") {
            alert('Please Select FROM');
            $('#TO').css('border-color', 'red');
            $('#TO').focus();
            return false;
        }
        else {
            $('#TO').css('border-color', '');
        }
        if ($('#CustPlan').val() == "") {
            alert('Please Enter CustPlan');
            $('#CustPlan').css('border-color', 'red');
            $('#CustPlan').focus();
            return false;
        }
        else {
            $('#CustPlan').css('border-color', '');
        }
        if ($('#ListOfCategory').val() == "") {
            alert('Please Select ListCategory');
            $('#ListOfCategory').css('border-color', 'red');
            $('#ListOfCategory').focus();
            return false;
        }
        else {
            $('#ListOfCategory').css('border-color', '');
        }
        if ($('#ListOfGroup').val() == "") {
            alert('Please Select ListGroup');
            $('#ListOfGroup').css('border-color', 'red');
            $('#ListOfGroup').focus();
            return false;
        }
        else {
            $('#ListOfGroup').css('border-color', '');
        }
        if ($('#MaterialList').val() == "") {
            alert('Please Select Material');
            $('#MaterialList').css('border-color', 'red');
            $('#MaterialList').focus();
            return false;
        }
        else {
            $('#MaterialList').css('border-color', '');
        }
        if ($('#TotalNoOfIos').val() == "") {
            alert('Please Enter Total No Of Ios');
            $('#TotalNoOfIos').css('border-color', 'red');
            $('#TotalNoOfIos').focus();
            return false;
        }
        else {
            $('#TotalNoOfIos').css('border-color', '');
        }
        if ($('#TotalNoOfPrs').val() == "") {
            alert('Please Enter Total No Of Prs');
            $('#TotalNoOfPrs').css('border-color', 'red');
            $('#TotalNoOfPrs').focus();
            return false;
        }
        else {
            $('#TotalNoOfPrs').css('border-color', '');
        }
        if ($('#ETA').val() == "") {
            alert('Please Enter ETA');
            $('#ETA').css('border-color', 'red');
            $('#ETA').focus();
            return false;
        }
        else {
            $('#ETA').css('border-color', '');
        }
        if ($('#Weight').val() == "") {
            alert('Please Enter Weight');
            $('#Weight').css('border-color', 'red');
            $('#Weight').focus();
            return false;
        }
        else {
            $('#Weight').css('border-color', '');
        }
        if ($('#ShinkagePercent').val() == "") {
            alert('Please Enter ShinkagePercent');
            $('#ShinkagePercent').css('border-color', 'red');
            $('#ShinkagePercent').focus();
            return false;
        }
        else {
            $('#ShinkagePercent').css('border-color', '');
        }
        if ($('#WastagePercent').val() == "") {
            alert('Please Enter WastagePercent');
            $('#WastagePercent').css('border-color', 'red');
            $('#WastagePercent').focus();
            return false;
        }
        else {
            $('#WastagePercent').css('border-color', '');
        }
        if ($('#ShortagePercent').val() == "") {
            alert('Please Enter ShortagePercent');
            $('#ShortagePercent').css('border-color', 'red');
            $('#ShortagePercent').focus();
            return false;
        }
        else {
            $('#ShortagePercent').css('border-color', '');
        }
        if ($('#Category').val() == "") {
            alert('Please Select Category');
            $('#Category').css('border-color', 'red');
            $('#Category').focus();
            return false;
        }
        else {
            $('#Category').css('border-color', '');
        }
        if ($('#Material').val() == "") {
            alert('Please Select Material');
            $('#Material').css('border-color', 'red');
            $('#Material').focus();
            return false;
        }
        else {
            $('#Material').css('border-color', '');
        }
        if ($('#BomQty').val() == "") {
            alert('Please Enter BomQty');
            $('#BomQty').css('border-color', 'red');
            $('#BomQty').focus();
            return false;
        }
        else {
            $('#BomQty').css('border-color', '');
        }
        if ($('#ConversionTable').val() == "") {
            alert('Please Enter ConversionTable');
            $('#ConversionTable').css('border-color', 'red');
            $('#ConversionTable').focus();
            return false;
        }
        else {
            $('#ConversionTable').css('border-color', '');
        }
        if ($('#Wastage').val() == "") {
            alert('Please Enter Wastage');
            $('#Wastage').css('border-color', 'red');
            $('#Wastage').focus();
            return false;
        }
        else {
            $('#Wastage').css('border-color', '');
        }
        if ($('#DisplayIO').val() == "") {
            alert('Please Select DisplayIO');
            $('#DisplayIO').css('border-color', 'red');
            $('#DisplayIO').focus();
            return false;
        }
        else {
            $('#DisplayIO').css('border-color', '');
        }

        var AddSelectedIoNo = "";

        var selectedValues = $.map($('#DisplayIO option:selected'), function (element) {

            AddSelectedIoNo = AddSelectedIoNo + element.value + ",";

        });

        var DisplayIO1 = $('#DisplayIO').val();
        if (DisplayIO1 == null) {
            DisplayIO1 = "";
        }
        DisplayIO1 = DisplayIO1.toString();
       
        $.ajax({
            type: 'POST',
            url: '/MaterialRequirementPlan/Update/',
            data: {
                MaterialRequirementPlanId: $('#MaterialRequirementPlanId').val(),
                IsProductionPlanBasis: $('#IsProductionPlanBasis').is(":checked"),
                IsOrderBasis: $('#IsOrderBasis').is(":checked"),
                IsRejectionOrReplacement: $('#IsRejectionOrReplacement').is(":checked"),
                IsOverConsumption: $('#IsOverConsumption').is(":checked"),
                MrpNo: $('#MrpNo').val(),
                Buyer: $('#Buyer').val(),
                SizeRangeMasterId: $('#SizeRangeMasterId').val(),
                Date: $('#Date').val(),
                MrpType: $('#MrpType').val(),
                WeekNo: $('#WeekNo').val(),
                SeasonMasterId: $('#SeasonMasterId').val(),
                LotNo: $('#LotNo').val(),
                FROM: $('#FROM').val(),
                TO: $('#TO').val(),
                CustPlan: $('#CustPlan').val(),
                ListOfCategory: $('#ListOfCategory').val(),
                ListOfGroup: $('#ListOfGroup').val(),
                IsCritical: $('#IsCritical').is(":checked"),
                IsCustomerSupplied: $('#IsCustomerSupplied').is(":checked"),
                IsGeneral: $('#IsGeneral').is(":checked"),
                IsImported: $('#IsImported').is(":checked"),
                IsReOrder: $('#IsReOrder').is(":checked"),
                IsSelectAll: $('#IsSelectAll').is(":checked"),
                IsBalToOrder: $('#IsBalToOrder').is(":checked"),
                MaterialList: $('#MaterialList').val(),
                TotalNoOfIos: $('#TotalNoOfIos').val(),
                TotalNoOfPrs: $('#TotalNoOfPrs').val(),
                ETA: $('#ETA').val(),
                Weight: $('#Weight').val(),
                ShinkagePercent: $('#ShinkagePercent').val(),
                WastagePercent: $('#WastagePercent').val(),
                ShortagePercent: $('#ShortagePercent').val(),
                Category: $('#Category').val(),
                Material: $('#Material').val(),
                BomQty: $('#BomQty').val(),
                ConversionTable: $('#ConversionTable').val(),
                Wastage: $('#Wastage').val(),
                IsDetailed: actv,
                IsConsolidated: consolidt,
                //MultipleIO:
                DisplayIO: AddSelectedIoNo,
                IsConversionInhouse: conInhouse,
            },
            success: function (data) {
                if (data.MaterialRequirementPlanId != "" || data.MaterialRequirementPlanId != 0) {
                    alert('Updated Successfully.');
                    location.href = "/MaterialRequirementPlan/MaterialRequirementPlan/";
                    return false;
                }
                else {
                    alert('Updated Process Failed.');
                    location.href = "/MaterialRequirementPlan/MaterialRequirementPlan/";
                    return false;
                }
            },
            error: function (ex) {
                alert('Already Exist in the database.');
            }
        });

    }

</script>

<h2 class="content-title">Material Requirement Planning</h2>
<div style="width: 100%; float: left;">

    <div id="tabVehicleWatchList">
        @Html.Action("MaterialRequirementPlanGrid", "MaterialRequirementPlan")
    </div>
</div>
